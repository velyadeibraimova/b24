{"version":3,"file":"script.js","sources":["src/options.js","src/controllers/default-controller.js","src/controllers/preset-custom-controller.js","src/utils.js","src/controllers/preset-default-controller.js","src/controllers/settings-controller.js","src/backend.js","src/items/item.js","src/items/item-user-favorites.js","src/items/item-user-self.js","src/items/item-admin-shared.js","src/items/item-admin-custom.js","src/items/item-main-page.js","src/items/item-system.js","src/items/item-group.js","src/items/item-group-system.js","src/items/index.js","src/items/item-active.js","src/controllers/items-controller.js","src/controllers/item-director.js","src/analytics.js","src/group-panel.js","src/menu.js"],"sourcesContent":["import { Type } from 'main.core';\n\nexport default class Options\n{\n\tstatic version = '2021.10';\n\tstatic eventNameSpace = 'BX.Intranet.LeftMenu:';\n\n\tstatic eventName(name): string\n\t{\n\t\treturn ['BX.Intranet.LeftMenu:', ...(Type.isStringFilled(name) ? [name] : name)].join(':');\n\t}\n\n\tstatic isExtranet = false;\n\tstatic isAdmin = false;\n\tstatic isCustomPresetRestricted = false;\n\tstatic settingsPath = null;\n\tstatic isMainPageEnabled = false;\n\n\tstatic availablePresetTools = null;\n\tstatic inviteDialogLink = null;\n\tstatic showMarta = null;\n\tstatic showSitemapMenuItem = null;\n}\n","import {Loc} from 'main.core';\nimport {Menu, MenuItem} from 'main.popup';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport Options from '../options';\n\nexport default class DefaultController\n{\n\tcontainer;\n\t#popup = null;\n\n\tconstructor(\n\t\tcontainer, {\n\t\t\tevents\n\t\t}\n\t)\n\t{\n\t\tthis.container = container;\n\t\tif (events)\n\t\t{\n\t\t\tArray\n\t\t\t\t.from(Object.keys(events))\n\t\t\t\t.forEach((key) => {\n\t\t\t\t\tEventEmitter.subscribe(this, Options.eventName(key), events[key])\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\tgetContainer(): ?Element\n\t{\n\t\treturn this.container;\n\t}\n\n\tcreatePopup(): Popup\n\t{\n\n\t}\n\n\tgetPopup()\n\t{\n\t\treturn this.#popup;\n\t}\n\n\tshow()\n\t{\n\t\tif (this.#popup === null)\n\t\t{\n\t\t\tthis.#popup = this.createPopup(...arguments);\n\t\t\tEventEmitter.subscribe(this.#popup, 'onClose', () => {\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onClose'));\n\t\t\t});\n\t\t\tEventEmitter.subscribe(this.#popup, 'onShow', () => {\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onShow'));\n\t\t\t});\n\t\t\tEventEmitter.subscribe(this.#popup, 'onDestroy', () => {\n\t\t\t\tthis.#popup = null;\n\t\t\t});\n\t\t}\n\t\tthis.#popup.show()\n\t}\n\n\thide()\n\t{\n\t\tif (this.#popup)\n\t\t{\n\t\t\tthis.#popup.close();\n\t\t}\n\t}\n}\n","import { type Button } from 'ui.buttons';\nimport { Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PopupManager, type Popup } from 'main.popup';\nimport DefaultController from './default-controller';\nimport Options from '../options';\nimport { CancelButton, SaveButton } from 'ui.buttons';\n\nexport default class PresetCustomController extends DefaultController\n{\n\tisReady: boolean = true;\n\n\tcreatePopup(): Popup\n\t{\n\t\tconst form = Tag.render`\n\t\t\t<form id=\"customPresetForm\" style=\"min-width: 350px;\">\n\t\t\t\t<div style=\"margin: 15px 0 15px 9px;\">\n\t\t\t\t\t<input type=\"radio\" name=\"userScope\" id=\"customPresetCurrentUser\" value=\"currentUser\">\n\t\t\t\t\t<label for=\"customPresetCurrentUser\">${Loc.getMessage('MENU_CUSTOM_PRESET_CURRENT_USER')}</label>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"margin: 0 0 38px 9px;\">\n\t\t\t\t\t<input type=\"radio\" name=\"userScope\" id=\"customPresetNewUser\" value=\"newUser\" checked>\n\t\t\t\t\t<label for=\"customPresetNewUser\">${Loc.getMessage('MENU_CUSTOM_PRESET_NEW_USER')}</label>\n\t\t\t\t</div>\n\t\t\t\t<hr style=\"background-color: #edeef0; border: none; color:  #edeef0; height: 1px;\">\n\t\t\t</form>\n\t\t`\n\t\t;\n\n\t\treturn PopupManager.create('custom-preset-form-popup', null, {\n\t\t\toverlay: true,\n\t\t\tcontentColor: 'white',\n\t\t\tcontentNoPaddings: true,\n\t\t\tlightShadow: true,\n\t\t\tdraggable: { restrict: true },\n\t\t\tcloseByEsc: true,\n\t\t\ttitleBar: Loc.getMessage('MENU_CUSTOM_PRESET_POPUP_TITLE'),\n\t\t\toffsetTop: 1,\n\t\t\toffsetLeft: 20,\n\t\t\tcacheable: false,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: form,\n\t\t\tbuttons: [\n\t\t\t\t(new SaveButton({\n\t\t\t\t\tonclick: (button: Button) => {\n\t\t\t\t\t\tif (this.isReady === false)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbutton.setWaiting(true);\n\t\t\t\t\t\tthis.isReady = false;\n\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onPresetIsSet'), form.elements.userScope.value === 'newUser')\n\t\t\t\t\t\t\t.forEach((promise) => {\n\t\t\t\t\t\t\t\tpromise\n\t\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\tbutton.setWaiting(false);\n\t\t\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t\t\t\tPopupManager.create('menu-custom-preset-success-popup', null, {\n\t\t\t\t\t\t\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\t\t\t\t\t\t\tcontentColor: 'white',\n\t\t\t\t\t\t\t\t\t\t\ttitleBar: Loc.getMessage('MENU_CUSTOM_PRESET_POPUP_TITLE'),\n\t\t\t\t\t\t\t\t\t\t\tcontent: Loc.getMessage('MENU_CUSTOM_PRESET_SUCCESS'),\n\t\t\t\t\t\t\t\t\t\t}).show();\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t\t\tconsole.log('Error!!');\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t\tthis.isReady = true;\n\t\t\t\t\t},\n\t\t\t\t})),\n\t\t\t\tnew CancelButton({\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n}\n","import { Loc, Reflection, Runtime, Uri } from 'main.core';\n\nexport default class Utils\n{\n\tstatic #curPage = null;\n\tstatic #curUri = null;\n\n\tstatic getCurPage(): ?String\n\t{\n\t\tif (this.#curPage === null)\n\t\t{\n\t\t\tthis.#curPage = document.location.pathname + document.location.search;\n\t\t}\n\n\t\treturn this.#curPage === '' ? null : this.#curPage;\n\t}\n\n\tstatic getCurUri(): Uri\n\t{\n\t\tif (this.#curUri === null)\n\t\t{\n\t\t\tthis.#curUri = new Uri(document.location.href);\n\t\t}\n\n\t\treturn this.#curUri;\n\t}\n\n\tstatic catchError(response): void\n\t{\n\t\tRuntime.loadExtension('ui.notification')\n\t\t\t.then(() => {\n\t\t\t\tconst notificationCenter = Reflection.getClass('BX.UI.Notification.Center');\n\t\t\t\tnotificationCenter.notify({\n\t\t\t\t\tcontent: [\n\t\t\t\t\t\tLoc.getMessage('MENU_ERROR_OCCURRED'),\n\t\t\t\t\t\t(response.errors ? `: ${response.errors[0].message}` : ''),\n\t\t\t\t\t].join(' '),\n\t\t\t\t\tposition: 'bottom-left',\n\t\t\t\t\tcategory: 'menu-self-item-popup',\n\t\t\t\t\tautoHideDelay: 3000,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tconsole.log('LeftMenu: cannot load ui.notification.');\n\t\t\t})\n\t\t;\n\t}\n\n\tstatic refineUrl(originUrl: string): string\n\t{\n\t\tlet url = String(originUrl).trim();\n\t\tif (url !== '')\n\t\t{\n\t\t\tif (!/^https?:\\/\\//i.test(url) && !/^\\//i.test(url))\n\t\t\t{\n\t\t\t\t// for external links like \"google.com\" (without a protocol)\n\t\t\t\turl = `https://${url}`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst link = document.createElement('a');\n\t\t\t\tlink.href = url;\n\n\t\t\t\tif (document.location.host === link.host)\n\t\t\t\t{\n\t\t\t\t\t// http://portal.com/path/ => /path/\n\t\t\t\t\turl = link.pathname + link.search + link.hash;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn url;\n\t}\n}\n","import {Loc, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {PopupManager} from 'main.popup';\nimport DefaultController from './default-controller';\nimport Options from \"../options\";\nimport Utils from \"../utils\";\nimport {CancelButton, CreateButton} from 'ui.buttons';\nimport {MessageBox, MessageBoxButtons} from \"ui.dialogs.messagebox\";\n\nexport default class PresetDefaultController extends DefaultController\n{\n\tisReady: boolean = true;\n\t#unavailableToolPopup: ?MessageBox;\n\t#mode: string;\n\n\tcreatePopup(mode): Popup\n\t{\n\t\tlet button;\n\t\tthis.#mode = mode;\n\t\tconst content = document.querySelector('#left-menu-preset-popup').cloneNode(true);\n\t\treturn PopupManager.create(\n\t\t\tthis.constructor.name.toString(), null, {\n\t\t\toverlay: true,\n\t\t\tcontentColor : \"white\",\n\t\t\tcontentNoPaddings : true,\n\t\t\tlightShadow: true,\n\t\t\tdraggable: {restrict: true},\n\t\t\tcloseByEsc: true,\n\t\t\toffsetTop: 1,\n\t\t\toffsetLeft: 20,\n\t\t\tcacheable: false,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: content,\n\t\t\tevents: {\n\t\t\t\tonFirstShow: () => {\n\t\t\t\t\t[...content.querySelectorAll('.js-left-menu-preset-item')]\n\t\t\t\t\t\t.forEach((node) => {\n\t\t\t\t\t\t\tnode.addEventListener('click', () => {\n\t\t\t\t\t\t\t\t[...content.querySelectorAll('.js-left-menu-preset-item')]\n\t\t\t\t\t\t\t\t\t.forEach((otherNode) => {\n\t\t\t\t\t\t\t\t\t\totherNode.classList[otherNode === node ? 'add' : 'remove']('left-menu-popup-selected');\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t},\n\t\t\tbuttons: [\n\t\t\t\t(button = new CreateButton({\n\t\t\t\t\ttext: Loc.getMessage('MENU_CONFIRM_BUTTON'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\tif (button.isWaiting())\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbutton.setWaiting(true);\n\t\t\t\t\tconst currentPreset = this.getSelectedPreset();\n\n\t\t\t\t\tif (!Options.isAdmin && Options.availablePresetTools && Options.availablePresetTools[currentPreset] === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tbutton.setWaiting(false);\n\t\t\t\t\t\tthis.showUnavailableToolPopup();\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onPresetIsSet'),\n\t\t\t\t\t\t{presetId: currentPreset, mode})\n\t\t\t\t\t\t.forEach((promise) => {\n\t\t\t\t\t\t\tpromise\n\t\t\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t\t\tbutton.setWaiting(false);\n\t\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t\t\tif (response.data.hasOwnProperty(\"url\"))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tdocument.location.href = response.data.url;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(Utils.catchError)\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}})),\n\t\t\t\tnew CancelButton({\n\t\t\t\t\ttext: Loc.getMessage('MENU_DELAY_BUTTON'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onPresetIsPostponed'), {mode});\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t} }),\n\t\t\t]\n\t\t});\n\t}\n\n\tgetMode(): string\n\t{\n\t\treturn this.#mode;\n\t}\n\n\tgetSelectedPreset()\n\t{\n\t\tlet currentPreset = '';\n\t\tif (document.forms['left-menu-preset-form'])\n\t\t{\n\t\t\t[...document.forms['left-menu-preset-form']\n\t\t\t\t.elements['presetType']]\n\t\t\t\t.forEach((node) => {\n\t\t\t\t\tif (node.checked)\n\t\t\t\t\t{\n\t\t\t\t\t\tcurrentPreset = node.value;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\n\t\treturn currentPreset;\n\t}\n\n\tshowUnavailableToolPopup(): void\n\t{\n\t\tif (!(this.#unavailableToolPopup instanceof MessageBox))\n\t\t{\n\t\t\tthis.#unavailableToolPopup = MessageBox.create({\n\t\t\t\tmessage: Loc.getMessage('MENU_UNAVAILABLE_TOOL_POPUP_DESCRIPTION'),\n\t\t\t\tbuttons: MessageBoxButtons.OK,\n\t\t\t});\n\t\t}\n\n\t\tthis.#unavailableToolPopup.show();\n\t}\n}","import { Type } from 'main.core';\nimport { Menu, MenuItem, type MenuItemOptions, Popup } from 'main.popup';\nimport { EventEmitter } from 'main.core.events';\nimport Options from '../options';\nimport DefaultController from './default-controller';\n\nexport default class SettingsController extends DefaultController\n{\n\tmenuId = 'leftMenuSettingsPopup';\n\n\tcreatePopup(): Popup\n\t{\n\t\tconst menu = new Menu({\n\t\t\tbindElement: this.container,\n\t\t\ttargetContainer: document.querySelector('.js-app__left-menu'),\n\t\t\titems: this.getItems(),\n\t\t\tangle: true,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 50,\n\t\t});\n\n\t\treturn menu.getPopupWindow();\n\t}\n\n\tgetItems(): Array\n\t{\n\t\tconst notHandledMenuItems = EventEmitter.emit(this, Options.eventName('onGettingSettingMenuItems'));\n\n\t\treturn this.#getMenuItems([...notHandledMenuItems][0]);\n\t}\n\n\t#getMenuItems(items: MenuItemOptions[]): MenuItemOptions[]\n\t{\n\t\tif (Type.isArray(items) === false)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn items.map((item) => {\n\t\t\treturn this.#getMenuItem(item);\n\t\t});\n\t}\n\n\t#getMenuItem(data: MenuItemOptions): MenuItemOptions\n\t{\n\t\tif (!Type.isPlainObject(data))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { text, html, onclick, className, items = [], delimiter = false } = data;\n\n\t\treturn {\n\t\t\thtml,\n\t\t\ttext: html ? undefined : text,\n\t\t\titems: this.#getMenuItems(items),\n\t\t\tdelimiter,\n\t\t\tclassName: `menu-popup-no-icon ${className}`,\n\t\t\tonclick: (event, item: MenuItem) => {\n\t\t\t\tif (!Type.isArrayFilled(items))\n\t\t\t\t{\n\t\t\t\t\titem.getMenuWindow().close();\n\t\t\t\t}\n\t\t\t\titem.getMenuWindow().getParentMenuItem()?.getMenuWindow()?.close();\n\n\t\t\t\tif (onclick)\n\t\t\t\t{\n\t\t\t\t\tonclick(event, item);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t}\n}\n","import {ajax, Loc} from 'main.core';\nimport Options from './options';\n\nexport default class Backend\n{\n\tstatic toggleMenu(collapse)\n\t{\n\t\tif (Loc.getMessage('USER_ID') <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst siteDir = Loc.getMessage('SITE_DIR') || '/';\n\t\tconst context = window.location.pathname.toString().startsWith(`${siteDir}online/`) ? 'online' : '';\n\n\t\treturn ajax.runAction(`intranet.leftmenu.${collapse ? \"collapseMenu\" : \"expandMenu\"}`, {\n\t\t\tdata: {\n\t\t\t\tcontext,\n\t\t\t},\n\t\t\tanalyticsLabel: { leftmenu: {action: collapse ? \"collapseMenu\" : \"expandMenu\"} }\n\t\t});\n\t}\n\n\tstatic saveSelfItemMenu(itemData) {\n\t\tconst action =  itemData.id > 0 ? \"update\" : \"add\";\n\t\treturn ajax.runAction(`intranet.leftmenu.${action}SelfItem`, {\n\t\t\tdata: {itemData: itemData },\n\t\t\tanalyticsLabel: { leftmenu: {action: 'selfItemAddOrUpdate'} }\n\t\t});\n\t}\n\n\tstatic deleteSelfITem(id) {\n\t\treturn ajax.runAction('intranet.leftmenu.deleteSelfItem', {\n\t\t\tdata: {menuItemId: id},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'selfItemDelete'}}\n\t\t});\n\t}\n\n\tstatic addFavoritesItemMenu(itemData) {\n\t\treturn ajax.runAction('intranet.leftmenu.addStandartItem', {\n\t\t\tdata: { itemData: itemData },\n\t\t\tanalyticsLabel: {leftmenu: {action: 'standardItemAdd'}}\n\t\t});\n\t}\n\n\tstatic deleteFavoritesItemMenu(itemData) {\n\t\treturn ajax.runAction('intranet.leftmenu.deleteStandartItem', {\n\t\t\tdata: { itemData: itemData },\n\t\t\tanalyticsLabel: {leftmenu: {action: 'standardItemDelete'}}\n\t\t});\n\t}\n\n\tstatic updateFavoritesItemMenu(itemData) {\n\t\treturn ajax.runAction('intranet.leftmenu.updateStandartItem', {\n\t\t\tdata: {\n\t\t\t\titemText: itemData.text,\n\t\t\t\titemId: itemData.id,\n\t\t\t},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'standardItemUpdate'}}\n\t\t})\n\t}\n\tstatic addAdminSharedItemMenu(itemData) {\n\t\treturn ajax.runAction('intranet.leftmenu.addItemToAll', {\n\t\t\tdata: { itemInfo: itemData },\n\t\t\tanalyticsLabel: {leftmenu: {action: 'adminItemAdd'}}\n\t\t});\n\t}\n\n\tstatic deleteAdminSharedItemMenu(id) {\n\t\treturn ajax.runAction('intranet.leftmenu.deleteItemFromAll', {\n\t\t\tdata: { menu_item_id: id},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'adminItemDelete'}}\n\t\t});\n\t}\n\n\tstatic saveItemsSort(menuItems, firstItemLink, analyticsLabel)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.saveItemsSort', {\n\t\t\tdata: {\n\t\t\t\titems: menuItems,\n\t\t\t\tfirstItemLink: firstItemLink,\n\t\t\t\tversion: Options.version\n\t\t\t},\n\t\t\tanalyticsLabel: {leftmenu: analyticsLabel}\n\t\t});\n\t}\n\n\tstatic setFirstPage(firstPageLink)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.setFirstPage', {\n\t\t\tdata: {firstPageUrl: firstPageLink},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'mainPageIsSet'}}\n\t\t})\n\t}\n\n\tstatic setDefaultPreset()\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.setDefaultMenu', {\n\t\t\tdata: {},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'defaultMenuIsSet'}}\n\t\t});\n\t}\n\n\tstatic setCustomPreset(forNewUsersOnly, itemsSort, customItems, firstItemLink)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.saveCustomPreset', {\n\t\t\tdata: {\n\t\t\t\tuserApply: forNewUsersOnly === true ? 'newUser' : 'currentUser',\n\t\t\t\titemsSort: itemsSort,\n\t\t\t\tcustomItems: customItems,\n\t\t\t\tfirstItemLink: firstItemLink,\n\t\t\t\tversion: Options.version\n\t\t\t},\n\t\t\tanalyticsLabel: { leftmenu: {action: 'customPresetIsSet'} }\n\t\t});\n\t}\n\n\tstatic deleteCustomItem(id)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.deleteCustomItemFromAll', {\n\t\t\tdata: {menu_item_id: id},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'customItemDelete'}}\n\t\t});\n\t}\n\n\tstatic setSystemPreset(mode, presetId)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.setPreset', {\n\t\t\tdata: {\n\t\t\t\tpreset: presetId,\n\t\t\t\tmode: mode === 'global' ? 'global' : 'personal'\n\t\t\t},\n\t\t\tanalyticsLabel: {\n\t\t\t\tleftmenu: {\n\t\t\t\t\taction: 'systemPresetIsSet',\n\t\t\t\t\tpresetId: presetId,\n\t\t\t\t\tmode: mode,\n\t\t\t\t\tanalyticsFirst: mode === 'global' ? 'y' : 'n'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic postponeSystemPreset(mode)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.delaySetPreset', {\n\t\t\tdata: {},\n\t\t\tanalyticsLabel: {\n\t\t\t\tleftmenu: {\n\t\t\t\t\taction: 'systemPresetIsPostponed',\n\t\t\t\t\tmode: mode,\n\t\t\t\t\tanalyticsFirst: mode === 'global' ? 'y' : 'n'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic clearCache()\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.clearCache', {\n\t\t\tdata: {},\n\t\t\tanalyticsLabel: { leftmenu: {action: 'clearCache'} }\n\t\t});\n\t}\n\n\tstatic expandGroup(id)\n\t{\n\t\tif (Loc.getMessage('USER_ID') <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn ajax.runAction('intranet.leftmenu.expandMenuGroup', {\n\t\t\tdata: {id},\n\t\t\tanalyticsLabel: { leftmenu: {action: 'expandMenuGroup' }}\n\t\t});\n\t}\n\n\tstatic collapseGroup(id)\n\t{\n\t\tif (Loc.getMessage('USER_ID') <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn ajax.runAction('intranet.leftmenu.collapseMenuGroup', {\n\t\t\tdata: {id},\n\t\t\tanalyticsLabel: { leftmenu: {action: 'collapseMenuGroup' }}\n\t\t});\n\t}\n}\n","import { Event, Uri, Type, Loc, Text, Tag, Dom } from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {PopupManager, Menu, MenuItem} from 'main.popup';\nimport Options from \"../options\";\nimport Utils from \"../utils\";\nimport {SaveButton, CancelButton} from 'ui.buttons';\nimport { Counter } from 'ui.cnt';\n\nexport default class Item\n{\n\tstatic code = 'abstract';\n\n\tparentContainer: Element;\n\tcontainer: Element;\n\tlinks = [];\n\tisDraggable = true;\n\tstorage: Array = [];\n\n\tconstructor(parentContainer, container)\n\t{\n\t\tthis.parentContainer = parentContainer;\n\t\tthis.container = container;\n\t\tthis.init();\n\n\t\tthis.onDeleteAsFavorites = this.onDeleteAsFavorites.bind(this);\n\t\tsetTimeout(() => {\n\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'), this.onDeleteAsFavorites);\n\t\t\tEventEmitter.incrementMaxListeners(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'));\n\t\t\tEventEmitter.subscribe(this, Options.eventName('onItemDelete'), this.destroy.bind(this));\n\t\t}, 0);\n\t\tthis.showError = this.showError.bind(this);\n\t\tthis.showMessage = this.showMessage.bind(this);\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.container.dataset.id;\n\t}\n\n\tgetCode(): string\n\t{\n\t\treturn this.constructor.code;\n\t}\n\n\tgetName()\n\t{\n\t\treturn this.container.querySelector(\"[data-role='item-text']\").textContent;\n\t}\n\n\tcanDelete(): boolean\n\t{\n\t\treturn false;\n\t}\n\n\tdelete()\n\t{\n\t\t// Just do it.\n\t}\n\n\tinit()\n\t{\n\t\tthis.links = [];\n\t\tif (\n\t\t\tthis.container.hasAttribute('data-link')\n\t\t\t&& Type.isStringFilled(this.container.getAttribute(\"data-link\"))\n\t\t)\n\t\t{\n\t\t\tthis.links.push(\n\t\t\t\tthis.container.getAttribute(\"data-link\")\n\t\t\t);\n\t\t}\n\n\t\tif (this.container\n\t\t\t.hasAttribute(\"data-all-links\"))\n\t\t{\n\t\t\tthis.container\n\t\t\t\t.getAttribute(\"data-all-links\")\n\t\t\t\t.split(\",\")\n\t\t\t\t.forEach((link) => {\n\t\t\t\t\tlink = String(link).trim();\n\t\t\t\t\tif (Type.isStringFilled(link))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.links.push(\n\t\t\t\t\t\t\tlink\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\tthis.makeTextIcons();\n\t\tthis.storage = this.container.dataset.storage.split(',');\n\t}\n\n\tupdate({link, openInNewPage, text})\n\t{\n\t\topenInNewPage = (openInNewPage === 'Y' ? 'Y' : 'N');\n\n\t\tif (this.container.hasAttribute('data-link'))\n\t\t{\n\t\t\tthis.container.setAttribute('data-link', Text.encode(link));\n\t\t\tthis.container.setAttribute('data-new-page', openInNewPage);\n\t\t}\n\n\t\tconst linkNode = this.container.querySelector('a');\n\t\tif (linkNode)\n\t\t{\n\t\t\tif (Type.isString(link))\n\t\t\t{\n\t\t\t\tlinkNode.setAttribute('href', Text.encode(link));\n\t\t\t}\n\n\t\t\tlinkNode.setAttribute('target', openInNewPage === 'Y' ? '_blank' : '_self');\n\t\t}\n\t\tthis.container.querySelector(\"[data-role='item-text']\").innerHTML = Text.encode(text);\n\t\tthis.init();\n\t}\n\n\tdestroy()\n\t{\n\t\tEventEmitter.unsubscribe(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'), this.onDeleteAsFavorites);\n\t\tEventEmitter.decrementMaxListeners(EventEmitter.GLOBAL_TARGET, 'onItemDeleteAsFavorites');\n\t}\n\n\tgetSimilarToUrl(currentUri: Uri): Array\n\t{\n\t\tconst result = [];\n\n\t\tthis.links.forEach((link, index) => {\n\t\t\tif (areUrlsEqual(link, currentUri))\n\t\t\t{\n\t\t\t\tlet priority = 0;\n\t\t\t\tif (index === 0) // main link is in higher priority\n\t\t\t\t{\n\t\t\t\t\tpriority = this.getCode() === 'default' ? 2 : 1;\n\t\t\t\t}\n\n\t\t\t\tresult.push({\n\t\t\t\t\tpriority,\n\t\t\t\t\turl: link,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tmakeTextIcons()\n\t{\n\t\tif (!this.container.classList.contains(\"menu-item-no-icon-state\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst icon = this.container.querySelector(\".menu-item-icon\");\n\t\tconst text = this.container.querySelector(\".menu-item-link-text\");\n\n\t\tif (icon && text)\n\t\t{\n\t\t\ticon.textContent = getShortName(text.textContent);\n\t\t}\n\t}\n\n\tgetCounterValue(): ?number\n\t{\n\t\tconst counter = Counter.initFromCounterNode(this.container.querySelector(`.${Counter.BaseClassname}`));\n\n\t\tif (!counter)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn counter.getRealValue();\n\t}\n\n\tupdateCounter(counterValue: number): { oldValue: number, newValue: number }\n\t{\n\t\tconst counter = Counter.initFromCounterNode(this.container.querySelector(`.${Counter.BaseClassname}`));\n\n\t\tif (!counter)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst oldValue = counter.getRealValue() || 0;\n\n\t\tcounter.update(parseInt(counterValue, 10));\n\n\t\tif (counterValue > 0)\n\t\t{\n\t\t\tDom.addClass(this.container, 'menu-item-with-index');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.container, 'menu-item-with-index');\n\t\t}\n\n\t\treturn {\n\t\t\toldValue,\n\t\t\tnewValue: counterValue,\n\t\t};\n\t}\n\n\tmarkAsActive()\n\t{\n\t\tconsole.error('This action is only for the group');\n\t}\n\n\tshowWarning(title, events)\n\t{\n\t\tthis.removeWarning();\n\t\tconst link = this.container.querySelector(\"a.menu-item-link\");\n\t\tif (!link)\n\t\t{\n\t\t\treturn\n\t\t}\n\t\ttitle = title ? Text.encode(title) : '';\n\t\tconst node = Tag.render`<a class=\"menu-post-warn-icon\" title=\"${title}\"></a>`;\n\t\tif (events)\n\t\t{\n\t\t\tObject.keys(events).forEach((key) => {\n\t\t\t\tEvent.bind(node, key, events[key]);\n\t\t\t});\n\t\t}\n\t\tthis.container.classList.add(\"menu-item-warning-state\");\n\t\tlink.appendChild(node);\n\t}\n\n\tremoveWarning()\n\t{\n\t\tif (!this.container.classList.contains('menu-item-warning-state'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.container.classList.remove('menu-item-warning-state');\n\t\tlet node;\n\t\twhile (node = this.container.querySelector(\"a.menu-post-warn-icon\"))\n\t\t{\n\t\t\tnode.parentNode.removeChild(node);\n\t\t}\n\t}\n\n\tshowMessagePopup;\n\tshowMessage(message)\n\t{\n\t\tif (this.showMessagePopup)\n\t\t{\n\t\t\tthis.showMessagePopup.close();\n\t\t}\n\t\tthis.showMessagePopup = PopupManager.create(\"left-menu-message\", this.container,\n\t\t\t{\n\t\t\t\tcontent: '<div class=\"left-menu-message-popup\">' + message + '</div>',\n\t\t\t\tdarkMode: true,\n\t\t\t\toffsetTop: 2,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tangle: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => { this.showMessagePopup = null;}\n\t\t\t\t},\n\t\t\t\tautoHide: true\n\t\t\t});\n\n\t\tthis.showMessagePopup.show();\n\n\t\tsetTimeout(() => { if (this.showMessagePopup) {this.showMessagePopup.close()} }, 3000);\n\t}\n\n\tshowError(response)\n\t{\n\t\tconst errors = [];\n\t\tif (response.errors)\n\t\t{\n\t\t\terrors.push(response.errors[0].message);\n\t\t}\n\t\telse if (response instanceof TypeError)\n\t\t{\n\t\t\terrors.push(response.message);\n\t\t}\n\n\t\tconst message = [Loc.getMessage(\"MENU_ERROR_OCCURRED\"), ...errors].join(' ');\n\t\tthis.showMessage(message);\n\t}\n\n\tgetDropDownActions(): Array\n\t{\n\t\treturn [];\n\t}\n\n\tgetEditFields(): Object\n\t{\n\t\treturn {id: this.getId(), text: this.getName()};\n\t}\n\n\tonDeleteAsFavorites({data})\n\t{\n\t\tif (String(data.id) === String(this.getId()))\n\t\t{\n\t\t\tif (this.getCode() === 'standard'/* instanceof ItemUserFavorites*/)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemDelete'), {\n\t\t\t\t\titem: this,\n\t\t\t\t\tanimate: true\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.storage = [...this.storage].filter((v) => {return v !== 'standard'});\n\t\t\t\tthis.container.dataset.storage = this.storage.join(',');\n\t\t\t}\n\t\t\tEventEmitter.unsubscribe(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'), this.onDeleteAsFavorites);\n\t\t\tEventEmitter.decrementMaxListeners(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'));\n\t\t\t}\n\t}\n\n\tstatic detect(node)\n\t{\n\t\treturn node.getAttribute(\"data-role\") !== 'group' &&\n\t\t\tnode.getAttribute(\"data-type\") === this.code;\n\t}\n\n\tstatic createNode({id, text, link, openInNewPage, counterId, counterValue, topMenuId})\n\t{\n\t\tid = Text.encode(id);\n\t\ttext = Text.encode(text);\n\t\tlink = Text.encode(link);\n\t\tcounterId = counterId ? Text.encode(counterId) : '';\n\t\tcounterValue = counterValue ? parseInt(counterValue) : 0;\n\t\topenInNewPage = openInNewPage === 'Y' ? 'Y' : 'N';\n\t\tconst counter = new Counter({\n\t\t\tsize: Counter.Size.SMALL,\n\t\t\tstyle: Counter.Style.FILLED_ALERT,\n\t\t\tuseAirDesign: true,\n\t\t\tvalue: counterValue,\n\t\t\tid: `menu-counter-${counterId}`,\n\t\t});\n\n\t\treturn Tag.render`<li \n\t\t\tid=\"bx_left_menu_${id}\" \n\t\t\tdata-status=\"show\" \n\t\t\tdata-id=\"${id}\" \n\t\t\tdata-role=\"item\"\n\t\t\tdata-storage=\"\" \n\t\t\tdata-counter-id=\"${counterId}\" \n\t\t\tdata-link=\"${link}\" \n\t\t\tdata-all-links=\"\" \n\t\t\tdata-type=\"${this.code}\" \n\t\t\tdata-delete-perm=\"Y\" \n\t\t\t${topMenuId ? `data-top-menu-id=\"${Text.encode(topMenuId)}\"` : \"\"}\n\t\t\tdata-new-page=\"${openInNewPage}\" \n\t\t\tclass=\"menu-item-block menu-item-no-icon-state\">\n\t\t\t\t<span class=\"menu-favorites-btn menu-favorites-draggable\">\n\t\t\t\t\t<span class=\"menu-fav-draggable-icon\"></span>\n\t\t\t\t</span>\n\t\t\t\t<a class=\"menu-item-link\" data-slider-ignore-autobinding=\"true\" href=\"${link}\" target=\"${openInNewPage === 'Y' ? '_blank' : '_self'}\">\n\t\t\t\t\t<span class=\"menu-item-icon-box\">\n\t\t\t\t\t\t<span class=\"menu-item-icon\">W</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"menu-item-link-text \" data-role=\"item-text\">${text}</span>\n\t\t\t\t\t${counterId ? \n\t\t\t\t\t`<span class=\"menu-item-index-wrap\">\n\t\t\t\t\t\t${counter.render()}\n\t\t\t\t\t</span>` : '' }\n\t\t\t\t</a>\n\t\t\t\t<span data-role=\"item-edit-control\" class=\"menu-fav-editable-btn menu-favorites-btn\">\n\t\t\t\t\t<span class=\"menu-favorites-btn-icon\"></span>\n\t\t\t\t</span>\n\t\t\t</li>`;\n\t}\n\n\t//region Edition for siblings\n\tstatic backendSaveItem(itemInfo): Promise\n\t{\n\t\tthrow 'Function backendSaveItem must be replaced';\n\t}\n\tstatic popup: Popup;\n\tstatic showUpdate(item: Item)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.showForm(item.container, item.getEditFields(), resolve, reject);\n\t\t});\n\t}\n\tstatic checkForm(form: HTMLFormElement): boolean\n\t{\n\t\tif (String(form.elements[\"text\"].value).trim().length <= 0)\n\t\t{\n\t\t\tform.elements[\"text\"].classList.add('menu-form-input-error');\n\t\t\tform.elements[\"text\"].focus();\n\t\t\treturn false;\n\t\t}\n\t\tif (form.elements[\"link\"])\n\t\t{\n\t\t\tif (String(form.elements[\"link\"].value).trim().length <= 0 ||\n\t\t\t\tUtils.refineUrl(form.elements[\"link\"].value).length <= 0)\n\t\t\t{\n\t\t\t\tform.elements[\"link\"].classList.add('menu-form-input-error');\n\t\t\t\tform.elements[\"link\"].focus();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tform.elements[\"link\"].value = Utils.refineUrl(form.elements[\"link\"].value);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\tstatic showForm(bindElement, itemInfo, resolve, reject)\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.close();\n\t\t}\n\n\t\tconst isEditMode = itemInfo.id !== '';\n\t\tconst form = Tag.render`\n<form name=\"menuAddToFavoriteForm\">\n\t<input type=\"hidden\" name=\"id\" value=\"${Text.encode(itemInfo.id || '')}\">\n\t<label for=\"menuPageToFavoriteName\" class=\"menu-form-label\">${Loc.getMessage(\"MENU_ITEM_NAME\")}</label>\n\t<input name=\"text\" type=\"text\" id=\"menuPageToFavoriteName\" class=\"menu-form-input\" value=\"${Text.encode(itemInfo.text || '')}\" >\n\t${itemInfo['link'] !== undefined ? `<br><br>\n\t<label for=\"menuPageToFavoriteLink\" class=\"menu-form-label\">${Loc.getMessage(\"MENU_ITEM_LINK\")}</label>\n\t<input name=\"link\" id=\"menuPageToFavoriteLink\" type=\"text\" class=\"menu-form-input\" value=\"${Text.encode(itemInfo.link)}\" >` : ''}\n\t${itemInfo['openInNewPage'] !== undefined ? `<br><br>\n\t<input name=\"openInNewPage\" id=\"menuOpenInNewPage\" type=\"checkbox\" value=\"Y\" ${itemInfo.openInNewPage === 'Y' ? 'checked' : ''} >\n\t<label for=\"menuOpenInNewPage\" class=\"menu-form-label\">${Loc.getMessage(\"MENU_OPEN_IN_NEW_PAGE\")}</label>` : ''}\n</form>`;\n\t\tObject.keys(itemInfo)\n\t\t\t.forEach((key) => {\n\t\t\t\tif (['id', 'text', 'link', 'openInNewPage'].indexOf(key) < 0)\n\t\t\t\t{\n\t\t\t\t\tconst name = Text.encode(key);\n\t\t\t\t\tconst value = Text.encode(itemInfo[key]);\n\t\t\t\t\tform.appendChild(\n\t\t\t\t\t\tTag.render`<input type=\"hidden\" name=\"${name}\" value=\"${value}\">`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\tthis.popup = PopupManager.create('menu-self-item-popup', bindElement, {\n\t\t\tclassName: 'menu-self-item-popup',\n\t\t\ttitleBar: (itemInfo['link'] === undefined ? Loc.getMessage(\"MENU_RENAME_ITEM\") : (\n\t\t\t\tisEditMode ? Loc.getMessage(\"MENU_EDIT_SELF_PAGE\") : Loc.getMessage(\"MENU_ADD_SELF_PAGE\")\n\t\t\t)),\n\t\t\toffsetTop: 1,\n\t\t\toffsetLeft: 20,\n\t\t\tcacheable: false,\n\t\t\tcloseIcon: true,\n\t\t\tlightShadow: true,\n\t\t\tdraggable: {restrict: true},\n\t\t\tcloseByEsc: true,\n\t\t\tcontent: form,\n\t\t\tbuttons: [\n\t\t\t\tnew SaveButton({ onclick: () => {\n\t\t\t\t\t\tif (this.checkForm(form))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst itemInfoToSave = {};\n\t\t\t\t\t\t\t[...form.elements].forEach((node) => {\n\t\t\t\t\t\t\t\titemInfoToSave[node.name] = node.value;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (form.elements['openInNewPage'])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titemInfoToSave['openInNewPage'] = form.elements[\"openInNewPage\"].checked ? 'Y' : 'N';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t.backendSaveItem(itemInfoToSave)\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\tresolve(itemInfoToSave);\n\t\t\t\t\t\t\t\t\tthis.popup.close();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(Utils.catchError);\n\t\t\t\t\t\t}\n\t\t\t\t\t} } ),\n\t\t\t\tnew CancelButton({ onclick: () => { this.popup.close();} }),\n\t\t\t]\n\t\t});\n\t\tthis.popup.show();\n\t}\n\t//endregion\n}\n\nfunction areUrlsEqual(url, currentUri: Uri)\n{\n\tconst checkedUri = new Uri(url);\n\tconst checkedUrlBrief = checkedUri.getPath().replace('/index.php', '').replace('/index.html', '');\n\n\tconst currentUrlBrief = currentUri.getPath().replace('/index.php', '').replace('/index.html', '');\n\n\tif (\n\t\tcheckedUri.getHost() !== ''\n\t\t&&\n\t\tcheckedUri.getHost() !== currentUri.getHost()\n\t)\n\t{\n\t\treturn false;\n\t}\n\tif (currentUrlBrief.indexOf(checkedUrlBrief) !== 0)\n\t{\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction getShortName(name)\n{\n\tif (!Type.isStringFilled(name))\n\t{\n\t\treturn \"...\";\n\t}\n\n\tname = name.replace(/['`\".,:;~|{}*^$#@&+\\-=?!()[\\]<>\\n\\r]+/g, \"\").trim();\n\tif (name.length <= 0)\n\t{\n\t\treturn '...';\n\t}\n\n\tlet shortName;\n\tlet words = name.split(/[\\s,]+/);\n\tif (words.length <= 1)\n\t{\n\t\tshortName = name.substring(0, 1);\n\t}\n\telse if (words.length === 2)\n\t{\n\t\tshortName = words[0].substring(0, 1) + words[1].substring(0, 1);\n\t}\n\telse\n\t{\n\t\tlet firstWord = words[0];\n\t\tlet secondWord = words[1];\n\n\t\tfor (let i = 1; i < words.length; i++)\n\t\t{\n\t\t\tif (words[i].length > 3)\n\t\t\t{\n\t\t\t\tsecondWord = words[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tshortName = firstWord.substring(0, 1) + secondWord.substring(0, 1);\n\t}\n\n\treturn shortName.toUpperCase();\n}\n","import {Loc, Text, Tag} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {PopupManager} from 'main.popup'\nimport Item from './item';\nimport Utils from '../utils';\nimport Backend from '../backend';\nimport Options from \"../options\";\nimport ItemAdminShared from \"./item-admin-shared\";\n\nexport default class ItemUserFavorites extends Item\n{\n\tstatic code = 'standard';\n\tstatic #currentPageInTopMenu = null;\n\n\tcanDelete(): boolean\n\t{\n\t\treturn true;\n\t}\n\n\tdelete()\n\t{\n\t\tBackend\n\t\t\t.deleteFavoritesItemMenu({id: this.getId(), storage: this.storage})\n\t\t\t.then(() => {\n\t\t\t\tthis.destroy();\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemDelete'), {animate: true});\n\t\t\t\tconst context = this.getSimilarToUrl(\n\t\t\t\t\tUtils.getCurUri()\n\t\t\t\t).length > 0 ? window : {'doesnotmatter': ''};\n\n\t\t\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuItemDeleted\", [{id: this.getId()}, this]);\n\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess', [{\n\t\t\t\t\tisActive: false,\n\t\t\t\t\tcontext: context\n\t\t\t\t}]);\n\t\t\t});\n\t}\n\n\tgetDropDownActions(): Array\n\t{\n\t\tconst contextMenuItems = [];\n\t\tcontextMenuItems.push({\n\t\t\ttext: Loc.getMessage(\"MENU_RENAME_ITEM\"),\n\t\t\tonclick: () => {\n\t\t\t\tthis.constructor\n\t\t\t\t\t.showUpdate(this)\n\t\t\t\t\t.then(this.update.bind(this))\n\t\t\t\t\t.catch(this.showError);\n\t\t\t}\n\t\t});\n\t\tcontextMenuItems.push({\n\t\t\ttext: Loc.getMessage(\"MENU_REMOVE_STANDARD_ITEM\"),\n\t\t\tonclick: () => {\n\t\t\t\tthis.delete();\n\t\t\t}\n\t\t});\n\n\t\tif (Options.isAdmin)\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"MENU_ADD_ITEM_TO_ALL\"),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tconst itemLinkNode = this.container.querySelector('a');\n\t\t\t\t\tBackend\n\t\t\t\t\t\t.addAdminSharedItemMenu({\n\t\t\t\t\t\t\tid: this.getId(),\n\t\t\t\t\t\t\tlink: this.links[0],\n\t\t\t\t\t\t\ttext: this.getName(),\n\t\t\t\t\t\t\tcounterId: this.container.dataset.counterId,\n\t\t\t\t\t\t\topenInNewPage: itemLinkNode && itemLinkNode.getAttribute(\"target\") === \"_blank\" ? \"Y\" : \"N\"\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.showMessage(Loc.getMessage('MENU_ITEM_WAS_ADDED_TO_ALL'));\n\t\t\t\t\t\t\tthis.container.dataset.type = ItemAdminShared.code;\n\t\t\t\t\t\t\tthis.storage.push(ItemUserFavorites.code);\n\t\t\t\t\t\t\tthis.container.dataset.storage = this.storage.join(',');\n\t\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemConvert'), this);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(this.showError);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn contextMenuItems;\n\t}\n\n\tstatic backendSaveItem(itemInfoToSave): Promise\n\t{\n\t\treturn Backend.updateFavoritesItemMenu(itemInfoToSave);\n\t}\n\n\tstatic getActiveTopMenuItem()\n\t{\n\t\tif (this.#currentPageInTopMenu)\n\t\t{\n\t\t\treturn this.#currentPageInTopMenu;\n\t\t}\n\n\t\tif (!BX.Main\n\t\t\t|| !BX.Main.interfaceButtonsManager)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst firstTopMenuInstance = Array.from(\n\t\t\tObject.values(\n\t\t\t\tBX.Main.interfaceButtonsManager\n\t\t\t\t\t.getObjects()\n\t\t\t)\n\t\t).shift();\n\n\t\tif (firstTopMenuInstance)\n\t\t{\n\t\t\tconst topMenuItem = firstTopMenuInstance.getActive();\n\n\t\t\tif (topMenuItem && typeof topMenuItem === \"object\")\n\t\t\t{\n\t\t\t\tconst link = document.createElement(\"a\");\n\t\t\t\tlink.href = topMenuItem['URL'];\n\t\t\t\t//IE11 omits slash in the pathname\n\t\t\t\tconst path = link.pathname[0] !== \"/\" ? (\"/\" + link.pathname) : link.pathname;\n\n\t\t\t\tthis.#currentPageInTopMenu = {\n\t\t\t\t\tID: topMenuItem['ID'] || null,\n\t\t\t\t\tNODE: topMenuItem['NODE'] || null,\n\t\t\t\t\tURL: path + link.search,\n\t\t\t\t\tTEXT: topMenuItem['TEXT'],\n\t\t\t\t\tDATA_ID: topMenuItem['DATA_ID'],\n\t\t\t\t\tCOUNTER_ID: topMenuItem['COUNTER_ID'],\n\t\t\t\t\tCOUNTER: topMenuItem['COUNTER'],\n\t\t\t\t\tSUB_LINK: topMenuItem['SUB_LINK'],\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn this.#currentPageInTopMenu;\n\t}\n\n\tstatic isCurrentPageStandard(topMenuPoint): boolean\n\t{\n\t\tif (topMenuPoint && topMenuPoint['URL'])\n\t\t{\n\t\t\tconst currentFullPath = document.location.pathname + document.location.search;\n\t\t\treturn topMenuPoint.URL === currentFullPath && topMenuPoint.URL.indexOf('workgroups') < 0;\n\t\t}\n\t\treturn false;\n\t}\n\n\tstatic saveCurrentPage({pageTitle, pageLink})\n\t{\n\t\tconst topMenuPoint = this.getActiveTopMenuItem();\n\t\tlet itemInfo, startX, startY;\n\n\t\tif (topMenuPoint\n\t\t\t&& topMenuPoint.NODE\n\t\t\t&& this.isCurrentPageStandard(topMenuPoint)\n\t\t\t&& (pageLink === Utils.getCurPage() || pageLink === topMenuPoint.URL || !pageLink)\n\t\t)\n\t\t{\n\t\t\tconst menuNodeCoord = topMenuPoint.NODE.getBoundingClientRect();\n\t\t\tstartX = menuNodeCoord.left;\n\t\t\tstartY = menuNodeCoord.top;\n\n\t\t\titemInfo = {\n\t\t\t\tid: topMenuPoint.DATA_ID,\n\t\t\t\ttext: pageTitle || topMenuPoint.TEXT,\n\t\t\t\tlink: Utils.getCurPage() || topMenuPoint.URL,\n\t\t\t\tcounterId: topMenuPoint.COUNTER_ID,\n\t\t\t\tcounterValue: topMenuPoint.COUNTER,\n\t\t\t\tisStandardItem: true,\n\t\t\t\tsubLink: topMenuPoint.SUB_LINK\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\titemInfo = {\n\t\t\t\ttext: pageTitle || document.getElementById('pagetitle').innerText,\n\t\t\t\tlink: pageLink || Utils.getCurPage(),\n\t\t\t\tisStandardItem: pageLink === Utils.getCurPage()\n\t\t\t};\n\t\t\tconst titleCoord = BX(\"pagetitle\").getBoundingClientRect();\n\t\t\tstartX = titleCoord.left;\n\t\t\tstartY = titleCoord.top\n\t\t}\n\n\t\treturn Backend\n\t\t\t.addFavoritesItemMenu(itemInfo)\n\t\t\t.then(({data: {itemId}}) => {\n\t\t\t\titemInfo.id = itemId;\n\t\t\t\titemInfo.topMenuId = itemInfo.id;\n\t\t\t\treturn {node: this.createNode(itemInfo), animateFromPoint: {startX, startY}, itemInfo: itemInfo};\n\t\t\t})\n\t\t;\n\t}\n\n\tstatic deleteCurrentPage({pageLink})\n\t{\n\t\tconst topPoint = this.getActiveTopMenuItem();\n\n\t\tvar itemInfo = {}, startX, startY;\n\n\t\tif (topPoint && this.isCurrentPageStandard(topPoint))\n\t\t{\n\t\t\titemInfo['id'] = topPoint.DATA_ID;\n\n\t\t\tconst menuNodeCoord = topPoint.NODE.getBoundingClientRect();\n\t\t\tstartX = menuNodeCoord.left;\n\t\t\tstartY = menuNodeCoord.top;\n\t\t}\n\t\telse\n\t\t{\n\t\t\titemInfo['link'] = pageLink || Utils.getCurPage();\n\t\t\tconst titleCoord = BX(\"pagetitle\").getBoundingClientRect();\n\t\t\tstartX = titleCoord.left;\n\t\t\tstartY = titleCoord.top\n\t\t}\n\t\treturn Backend\n\t\t\t.deleteFavoritesItemMenu(itemInfo)\n\t\t\t.then(({data}) => {\n\t\t\t\tif (!itemInfo.id && data && data['itemId'])\n\t\t\t\t{\n\t\t\t\t\titemInfo.id = data['itemId'];\n\t\t\t\t}\n\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'), {id: itemInfo.id});\n\t\t\t\treturn {itemInfo: itemInfo, animateToPoint: {startX, startY}};\n\t\t\t});\n\t}\n\n\tstatic saveStandardPage({DATA_ID, TEXT, SUB_LINK, COUNTER_ID, COUNTER, NODE, URL})\n\t{\n\t\tconst itemInfo = {\n\t\t\tid: DATA_ID,\n\t\t\ttext: TEXT,\n\t\t\tlink: URL,\n\t\t\tsubLink: SUB_LINK,\n\t\t\tcounterId: COUNTER_ID,\n\t\t\tcounterValue: COUNTER\n\t\t};\n\n\t\tconst pos = NODE.getBoundingClientRect();\n\t\tconst startX = pos.left;\n\t\tconst startY = pos.top\n\t\treturn Backend\n\t\t\t.addFavoritesItemMenu(itemInfo)\n\t\t\t.then(({data: {itemId}}) => {\n\t\t\t\titemInfo.id = itemId;\n\t\t\t\titemInfo.topMenuId = itemInfo.id;\n\n\t\t\t\tconst topPoint = this.getActiveTopMenuItem();\n\t\t\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuItemAdded\", [itemInfo, this]);\n\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess', [{\n\t\t\t\t\tisActive: true,\n\t\t\t\t\tcontext: topPoint && topPoint.DATA_ID === DATA_ID ? window : null,\n\t\t\t\t}]);\n\n\t\t\t\treturn {node: this.createNode(itemInfo), animateFromPoint: {startX, startY}};\n\t\t\t})\n\t\t;\n\t}\n\n\tstatic deleteStandardPage({DATA_ID})\n\t{\n\t\tconst itemInfo = {id: DATA_ID};\n\t\treturn Backend\n\t\t\t.deleteFavoritesItemMenu(itemInfo)\n\t\t\t.then(() => {\n\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'), {id: itemInfo.id});\n\t\t\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuItemDeleted\", [itemInfo, this]);\n\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess', [{\n\t\t\t\t\tisActive: false,\n\t\t\t\t}]);\n\t\t\t\treturn {itemInfo: itemInfo};\n\t\t\t});\n\t}\n}\n","import {Loc, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Item from './item';\nimport Backend from \"../backend\";\nimport Options from \"../options\";\nimport {MessageBox} from 'ui.dialogs.messagebox';\nimport ItemUserFavorites from \"./item-user-favorites\";\nimport ItemAdminShared from \"./item-admin-shared\";\n\nexport default class ItemUserSelf extends Item\n{\n\tstatic code = 'self';\n\n\tcanDelete(): boolean\n\t{\n\t\treturn true;\n\t}\n\n\tdelete()\n\t{\n\t\treturn Backend\n\t\t\t.deleteSelfITem(this.getId())\n\t\t\t.then(() => {\n\t\t\t\tif (this.storage.indexOf(ItemUserFavorites.code) >= 0)\n\t\t\t\t{\n\t\t\t\t\tBackend.deleteFavoritesItemMenu({id: this.getId()});\n\t\t\t\t}\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemDelete'), {animate: true});\n\t\t\t})\n\t\t\t.catch(this.showError)\n\t\t;\n\t}\n\n\tgetDropDownActions(): Array\n\t{\n\t\tconst contextMenuItems = [];\n\t\tcontextMenuItems.push({\n\t\t\ttext: Loc.getMessage(\"MENU_EDIT_ITEM\"),\n\t\t\tonclick: () => {\n\t\t\t\tthis.constructor\n\t\t\t\t\t.showUpdate(this)\n\t\t\t\t\t.then(this.update.bind(this))\n\t\t\t\t\t.catch(this.showError);\n\t\t\t}\n\t\t});\n\t\tcontextMenuItems.push({\n\t\t\ttext: Loc.getMessage('MENU_DELETE_SELF_ITEM'),\n\t\t\tonclick: () => {\n\t\t\t\tMessageBox.confirm(\n\t\t\t\t\tLoc.getMessage('MENU_DELETE_SELF_ITEM_CONFIRM'),\n\t\t\t\t\tLoc.getMessage('MENU_DELETE_SELF_ITEM'),\n\t\t\t\t\t(messageBox) => {\n\t\t\t\t\t\tthis.delete();\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t\tLoc.getMessage('MENU_DELETE'),\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tif (Options.isAdmin)\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"MENU_ADD_ITEM_TO_ALL\"),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tconst itemLinkNode = this.container.querySelector('a');\n\t\t\t\t\tBackend\n\t\t\t\t\t\t.addAdminSharedItemMenu({\n\t\t\t\t\t\t\tid: this.getId(),\n\t\t\t\t\t\t\tlink: this.links[0],\n\t\t\t\t\t\t\ttext: this.getName(),\n\t\t\t\t\t\t\tcounterId: this.container.dataset.counterId,\n\t\t\t\t\t\t\topenInNewPage: itemLinkNode && itemLinkNode.getAttribute(\"target\") === \"_blank\" ? \"Y\" : \"N\"\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.showMessage(Loc.getMessage('MENU_ITEM_WAS_ADDED_TO_ALL'));\n\t\t\t\t\t\t\tthis.container.dataset.type = ItemAdminShared.code;\n\t\t\t\t\t\t\tthis.storage.push(ItemUserSelf.code);\n\t\t\t\t\t\t\tthis.container.dataset.storage = this.storage.join(',');\n\t\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemConvert'), this);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(this.showError);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn contextMenuItems;\n\t}\n\n\tgetEditFields(): Object\n\t{\n\t\treturn {id: this.getId(), text: this.getName(), link: this.links[0],  openInNewPage: this.container.getAttribute('data-new-page')};\n\t}\n\n\tstatic backendSaveItem(itemInfo): Promise\n\t{\n\t\treturn Backend.saveSelfItemMenu(itemInfo)\n\t\t\t.then(({data}) => {\n\t\t\t\tif (data && data['itemId'])\n\t\t\t\t{\n\t\t\t\t\titemInfo.id = data['itemId'];\n\t\t\t\t}\n\t\t\t\treturn itemInfo;\n\t\t\t});\n\t}\n\n\tstatic showAdd(bindElement)\n\t{\n\t\treturn new Promise((resolve1, reject2) => {\n\t\t\tthis.showForm(\n\t\t\t\tbindElement,\n\t\t\t\t{id: 0, name: '', link: '', openInNewPage: 'Y'},\n\t\t\t\tresolve1, reject2\n\t\t\t)\n\t\t})\n\t\t.then((itemInfo) => {\n\t\t\treturn {node: this.createNode(itemInfo)}\n\t\t});\n\t}\n}\n\n","import {Tag, Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Item from './item';\nimport Backend from \"../backend\";\nimport Options from \"../options\";\nimport ItemUserFavorites from \"./item-user-favorites\";\nimport ItemUserSelf from \"./item-user-self\";\nimport Utils from \"../utils\";\n\nexport default class ItemAdminShared extends Item\n{\n\tstatic code = 'admin';\n\n\tcanDelete(): boolean\n\t{\n\t\treturn this.container.dataset.deletePerm === 'Y';\n\t}\n\n\tdelete()\n\t{\n\t\tBackend\n\t\t\t.deleteAdminSharedItemMenu(this.getId())\n\t\t\t.then(() => {\n\t\t\t\tif (this.storage.indexOf(ItemUserFavorites.code) >= 0)\n\t\t\t\t{\n\t\t\t\t\tBackend.deleteFavoritesItemMenu({id: this.getId()});\n\t\t\t\t}\n\t\t\t\tif (this.storage.indexOf(ItemUserSelf.code) >= 0)\n\t\t\t\t{\n\t\t\t\t\tBackend.deleteSelfITem(this.getId());\n\t\t\t\t}\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemDelete'), {animate: true});\n\t\t\t})\n\t\t\t.catch(this.showError)\n\t\t;\n\t}\n\n\tgetDropDownActions(): Array\n\t{\n\t\tif (!this.canDelete())\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tconst contextMenuItems = [];\n/*\t\tcontextMenuItems.push({\n\t\t\ttext: Loc.getMessage(\"MENU_RENAME_ITEM\"),\n\t\t\tonclick: () => {\n\t\t\t\tthis.constructor\n\t\t\t\t\t.showUpdate(this)\n\t\t\t\t\t.then(this.update.bind(this))\n\t\t\t\t\t.catch(this.showError.bind(this));\n\t\t\t}\n\t\t});\n*/\n\n\t\tif (this.storage.filter((value) => {return value === ItemUserFavorites.code || value === ItemUserSelf.code;}).length > 0)\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage('MENU_REMOVE_STANDARD_ITEM'),\n\t\t\t\tonclick: this.delete.bind(this)\n\t\t\t});\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage('MENU_DELETE_CUSTOM_ITEM_FROM_ALL'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tBackend\n\t\t\t\t\t\t.deleteAdminSharedItemMenu(this.getId())\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.showMessage(Loc.getMessage('MENU_ITEM_WAS_DELETED_FROM_ALL'));\n\t\t\t\t\t\t\tconst codeToConvert = this.storage.indexOf(ItemUserSelf.code) >= 0 ? ItemUserSelf.code : ItemUserFavorites.code;\n\t\t\t\t\t\t\tthis.container.dataset.type = codeToConvert;\n\t\t\t\t\t\t\tthis.container.dataset.storage = this.storage.filter((v) => {return v !== codeToConvert}).join(',');\n\t\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemConvert'), this);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(this.showError);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"MENU_DELETE_CUSTOM_ITEM_FROM_ALL\"),\n\t\t\t\tonclick: this.delete.bind(this)\n\t\t\t});\n\t\t}\n\t\treturn contextMenuItems;\n\t}\n}","import {Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Item from './item';\nimport Backend from \"../backend\";\nimport Options from \"../options\";\nimport ItemUserFavorites from \"./item-user-favorites\";\n\nexport default class ItemAdminCustom extends Item\n{\n\tstatic code = 'custom';\n\n\tcanDelete(): boolean\n\t{\n\t\treturn this.container.dataset.deletePerm === 'Y';\n\t}\n\n\tdelete()\n\t{\n\t\tif (this.canDelete())\n\t\t{\n\t\t\tBackend\n\t\t\t\t.deleteCustomItem(this.getId())\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (this.storage.indexOf(ItemUserFavorites.code) >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tBackend.deleteFavoritesItemMenu({id: this.getId()});\n\t\t\t\t\t}\n\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemDelete'), {animate: true});\n\t\t\t\t})\n\t\t\t\t.catch(this.showError)\n\t\t\t;\n\t\t}\n\t}\n\n\tgetDropDownActions(): Array\n\t{\n\t\tconst actions = [];\n\t\tif (this.canDelete())\n\t\t{\n\t\t\tactions.push({\n\t\t\t\ttext: Loc.getMessage(\"MENU_DELETE_ITEM_FROM_ALL\"),\n\t\t\t\tonclick: this.delete.bind(this)\n\t\t\t});\n\t\t}\n\t\treturn actions;\n\t}\n}","import { Loc } from 'main.core';\nimport Item from './item';\n\nexport class ItemMainPage extends Item\n{\n\tstatic code = 'main';\n\n\tcanDelete(): boolean\n\t{\n\t\treturn false;\n\t}\n\n\topenSettings(): void\n\t{\n\t\tconst url = `${Loc.getMessage('mainpage_settings_path')}&analyticContext=left_menu`;\n\t\tBX.SidePanel.Instance.open(url);\n\t}\n}\n","import Item from './item';\n\nexport default class ItemSystem extends Item\n{\n\tstatic code = 'default';\n\n\tcanDelete(): boolean\n\t{\n\t\treturn false;\n\t}\n}\n","import Item from './item';\nimport Backend from '../backend';\nimport { Dom, Text } from 'main.core';\nimport { Counter } from 'ui.cnt';\n\nexport default class ItemGroup extends Item\n{\n\tstatic code = 'group';\n\tgroupContainer: Element;\n\n\tconstructor()\n\t{\n\t\tsuper(...arguments);\n\t\tthis.container.addEventListener('click', this.toggleAndSave.bind(this), true);\n\t\tthis.container.addEventListener('mouseleave', () => {\n\t\t\tDom.removeClass(this.container, 'menu-item-group-actioned');\n\t\t});\n\t\tthis.groupContainer = this.container.parentNode.querySelector(`[data-group-id=\"${this.getId()}\"]`);\n\t\tif (this.container.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t{\n\t\t\tthis.groupContainer.style.display = 'none';\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tthis.updateCounter();\n\t\t}, 0);\n\t}\n\n\ttoggleAndSave(event)\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tif (this.container.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t{\n\t\t\tBackend.expandGroup(this.getId());\n\t\t\tthis\n\t\t\t\t.expand()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.container.setAttribute('data-collapse-mode', 'expanded');\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBackend.collapseGroup(this.getId());\n\t\t\tthis\n\t\t\t\t.collapse()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.container.setAttribute('data-collapse-mode', 'collapsed');\n\t\t\t\t});\n\t\t}\n\t\treturn false;\n\t}\n\n\tcheckAndCorrect(): ItemGroup\n\t{\n\t\tconst groupContainer = this.groupContainer;\n\n\t\tif (groupContainer.parentNode === this.container)\n\t\t{\n\t\t\tDom.insertAfter(groupContainer, this.container);\n\t\t}\n\t\t[...groupContainer\n\t\t\t.querySelectorAll(`.menu-item-block`)\n\t\t].forEach((node) => {\n\t\t\tnode.setAttribute('data-status', this.container.getAttribute(\"data-status\"));\n\t\t});\n\t\treturn this;\n\t}\n\n\t#collapsingAnimation;\n\tcollapse(hideGroupContainer): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst groupContainer = this.groupContainer;\n\n\t\t\tif (this.#collapsingAnimation)\n\t\t\t{\n\t\t\t\tthis.#collapsingAnimation.stop();\n\t\t\t}\n\n\t\t\tgroupContainer.style.overflow = 'hidden';\n\t\t\tDom.addClass(this.container, 'menu-item-group-collapsing');\n\t\t\tDom.addClass(this.container, 'menu-item-group-actioned');\n\t\t\tDom.addClass(groupContainer, 'menu-item-group-collapsing');\n\t\t\tconst slideParams = {\n\t\t\t\theight: groupContainer.offsetHeight,\n\t\t\t\tdisplay: groupContainer.style.display\n\t\t\t};\n\n\t\t\tthis.#collapsingAnimation = (new BX.easing({\n\t\t\t\tduration: 500,\n\t\t\t\tstart: {height: slideParams.height, opacity: 100},\n\t\t\t\tfinish: {height: 0, opacity: 0},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: function (state) {\n\t\t\t\t\tgroupContainer.style.height = state.height + 'px';\n\t\t\t\t\tgroupContainer.style.opacity = state.opacity / 100;\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tgroupContainer.style.display = 'none';\n\t\t\t\t\tgroupContainer.style.opacity = 'auto';\n\t\t\t\t\tgroupContainer.style.height = 'auto';\n\t\t\t\t\tDom.style(groupContainer, 'overflow', null);\n\n\t\t\t\t\tif (this.container.getAttribute('data-contains-active-item') === 'Y')\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.container, 'menu-item-active');\n\t\t\t\t\t}\n\t\t\t\t\tDom.removeClass(this.container, 'menu-item-group-collapsing');\n\t\t\t\t\tDom.removeClass(groupContainer, 'menu-item-group-collapsing');\n\t\t\t\t\tthis.#collapsingAnimation = null;\n\t\t\t\t\tif (hideGroupContainer === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.container.appendChild(groupContainer);\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis.#collapsingAnimation.animate();\n\t\t});\n\t}\n\n\texpand(checkAttribute): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst container = this.container;\n\t\t\tconst groupContainer = this.groupContainer;\n\n\t\t\tif (checkAttribute === true\n\t\t\t\t&& container.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t\t{\n\t\t\t\treturn resolve();\n\t\t\t}\n\n\t\t\tconst contentHeight = groupContainer.querySelectorAll('li').length * (container.offsetHeight + 4);\n\t\t\tDom.addClass(container, 'menu-item-group-expanding');\n\t\t\tDom.addClass(container, 'menu-item-group-actioned');\n\t\t\tDom.addClass(groupContainer, 'menu-item-group-expanding');\n\n\t\t\tif (groupContainer.parentNode === this.container)\n\t\t\t{\n\t\t\t\tDom.insertAfter(groupContainer, this.container);\n\t\t\t}\n\n\t\t\tgroupContainer.style.display = 'block';\n\t\t\tthis.#collapsingAnimation = (new BX.easing({\n\t\t\t\tduration: 500,\n\t\t\t\tstart: {height: 0, opacity: 0},\n\t\t\t\tfinish: {height: contentHeight, opacity: 100},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: function (state) {\n\t\t\t\t\tgroupContainer.style.height = state.height + 'px';\n\t\t\t\t\tgroupContainer.style.opacity = state.opacity / 100;\n\t\t\t\t},\n\t\t\t\tcomplete: function () {\n\t\t\t\t\tDom.removeClass(container, 'menu-item-group-expanding menu-item-active');\n\t\t\t\t\tDom.removeClass(groupContainer, 'menu-item-group-expanding');\n\t\t\t\t\tgroupContainer.style.height = 'auto';\n\t\t\t\t\tgroupContainer.style.opacity = 'auto';\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis.#collapsingAnimation.animate();\n\t\t});\n\t}\n\n\tcanDelete(): boolean\n\t{\n\t\treturn false;\n\t}\n\n\tupdateCounter()\n\t{\n\t\tlet counterValue = 0;\n\t\t[...this.container\n\t\t\t.parentNode\n\t\t\t.querySelector(`[data-group-id=\"${this.getId()}\"]`)\n\t\t\t.querySelectorAll(`.${Counter.BaseClassname}`)]\n\t\t\t.forEach((node) => {\n\t\t\t\tconst counter = Counter.initFromCounterNode(node);\n\t\t\t\tcounterValue += counter.getRealValue();\n\t\t\t});\n\n\t\tCounter.updateCounterNodeValue(\n\t\t\tthis.container.querySelector(`.${Counter.BaseClassname}`),\n\t\t\tcounterValue,\n\t\t);\n\n\t\tif (counterValue > 0)\n\t\t{\n\t\t\tDom.addClass(this.container, 'menu-item-with-index');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.container, 'menu-item-with-index');\n\t\t}\n\t}\n\n\tmarkAsActive()\n\t{\n\t\tthis.container.setAttribute('data-contains-active-item', 'Y');\n\t\tif (this.container.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t\tDom.addClass(this.container, 'menu-item-active');\n\t}\n\n\tmarkAsInactive()\n\t{\n\t\tthis.container.removeAttribute('data-contains-active-item');\n\t\tDom.removeClass(this.container, 'menu-item-active');\n\t}\n\n\tisActive()\n\t{\n\t\treturn this.container.getAttribute('data-contains-active-item') === 'Y';\n\t}\n\n\tstatic detect(node)\n\t{\n\t\treturn node.getAttribute(\"data-role\") === 'group' &&\n\t\t\tnode.getAttribute(\"data-type\") === this.code;\n\t}\n}\n","import {Uri, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.event';\nimport ItemGroup from './item-group';\n\nexport default class ItemGroupSystem extends ItemGroup\n{\n\tconstructor() {\n\t\tsuper(...arguments);\n\n\t\tthis.container\n\t\t\t.querySelector('[data-role=\"item-edit-control\"]')\n\t\t\t.style.display = 'none';\n\t}\n\tstatic code = 'system_group';\n}\n","import Item from './item';\nimport ItemAdminShared from './item-admin-shared';\nimport ItemAdminCustom from './item-admin-custom';\nimport { ItemMainPage } from './item-main-page';\nimport ItemUserFavorites from './item-user-favorites';\nimport ItemUserSelf from './item-user-self';\nimport ItemSystem from './item-system';\nimport ItemGroup from './item-group';\nimport ItemGroupSystem from './item-group-system';\n\nconst itemMappings = [\n\tItem,\n\tItemAdminShared,\n\tItemUserFavorites,\n\tItemAdminCustom,\n\tItemUserSelf,\n\tItemSystem,\n\tItemGroup,\n\tItemGroupSystem,\n\tItemMainPage,\n];\n\nexport default function getItem(itemData): Item\n{\n\tlet itemClassName = Item;\n\titemMappings.forEach((itemClass) => {\n\t\tif (itemClass.detect(itemData))\n\t\t{\n\t\t\titemClassName = itemClass;\n\t\t}\n\t});\n\treturn itemClassName;\n}","import {Runtime, Uri} from 'main.core';\nimport Item from './item'\nimport ItemSystem from './item-system'\ntype ActiveLink = {\n\tpriority: number,\n\turl: string,\n\turi: Uri\n};\nexport default class ItemActive\n{\n\titem: ?Item;\n\t#link: ?ActiveLink;\n\t#actualLink: Uri;\n\n\tconstructor()\n\t{\n\t\tthis.#actualLink = new Uri(window.location.href);\n\t}\n\n\tcheckAndSet(item: Item, links: Array): boolean\n\t{\n\t\t/*\n\t\tCustom items have more priority than standard items.\n\t\tExample:\n\t\t\tCalendar (standard item)\n\t\t\t\tdata-link=\"/company/personal/user/1/calendar/\"\n\t\t\t\tdata-all-links=\"/company/personal/user/1/calendar/,/calendar/\n\n\t\t\tCompany Calendar (custom item)\n\t\t\t\t data-link=\"/calendar/\"\n\n\t\tWe've got two items with the identical link /calendar/'.\n\t\t*/\n\t\tif (item === this.item)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet theMostOfTheLinks = this.#link;\n\t\tlinks.forEach((link) => {\n\t\t\tconst linkUri = new Uri(link.url);\n\t\t\tlet changeActiveItem = false;\n\t\t\tif (\n\t\t\t\t!theMostOfTheLinks\n\t\t\t\t|| theMostOfTheLinks.uri.getPath().length < linkUri.getPath().length\n\t\t\t)\n\t\t\t{\n\t\t\t\tchangeActiveItem = true;\n\t\t\t}\n\t\t\telse if (theMostOfTheLinks.uri.getPath().length === linkUri.getPath().length)\n\t\t\t{\n\t\t\t\tconst actualParams = this.#actualLink.getQueryParams();\n\t\t\t\tconst theMostOfTheLinkServiceData = {\n\t\t\t\t\tparams: theMostOfTheLinks.uri.getQueryParams(),\n\t\t\t\t\tmatches: 0,\n\t\t\t\t};\n\t\t\t\tconst comparedLinkParams = {\n\t\t\t\t\tparams: linkUri.getQueryParams(),\n\t\t\t\t\tmatches: 0,\n\t\t\t\t};\n\n\t\t\t\tfor (const key of Object.keys(actualParams))\n\t\t\t\t{\n\t\t\t\t\tif (\n\t\t\t\t\t\tkey in actualParams\n\t\t\t\t\t\t&& key in theMostOfTheLinkServiceData.params\n\t\t\t\t\t\t&& String(actualParams[key]) === String(theMostOfTheLinkServiceData.params[key])\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\ttheMostOfTheLinkServiceData.matches++;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tkey in actualParams\n\t\t\t\t\t\t&& key in comparedLinkParams.params\n\t\t\t\t\t\t&& String(actualParams[key]) === String(comparedLinkParams.params[key])\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tcomparedLinkParams.matches++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tcomparedLinkParams.matches > theMostOfTheLinkServiceData.matches\n\t\t\t\t\t|| (\n\t\t\t\t\t\tcomparedLinkParams.matches === theMostOfTheLinkServiceData.matches\n\t\t\t\t\t\t&& Object.keys(comparedLinkParams.params).length < Object.keys(theMostOfTheLinkServiceData.params).length\n\t\t\t\t\t)\n\t\t\t\t\t|| theMostOfTheLinks.priority < link.priority\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tchangeActiveItem = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (changeActiveItem)\n\t\t\t{\n\t\t\t\ttheMostOfTheLinks = {\n\t\t\t\t\tpriority: link.priority,\n\t\t\t\t\turl: link.url,\n\t\t\t\t\turi: linkUri,\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tif (theMostOfTheLinks !== this.#link)\n\t\t{\n\t\t\tif (this.item)\n\t\t\t{\n\t\t\t\tthis.unhighlight(this.item);\n\t\t\t}\n\t\t\tthis.#link = theMostOfTheLinks;\n\t\t\tthis.item = item;\n\n\t\t\tthis.highlight();\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tcheckAndUnset(item: Item)\n\t{\n\t\tif (item instanceof Item && item === this.item)\n\t\t{\n\t\t\tthis.unhighlight(this.item);\n\t\t\tthis.item = null;\n\t\t\tthis.#link = null;\n\t\t}\n\t}\n\n\thighlight()\n\t{\n\t\tif (this.item)\n\t\t{\n\t\t\tthis.item.container.classList.add('menu-item-active');\n\n\t\t\tlet parent = this.item.container.closest('[data-role=\"group-content\"]');\n\t\t\tlet parentContainer;\n\t\t\twhile (parent)\n\t\t\t{\n\t\t\t\tparentContainer = parent.parentNode.querySelector(`[data-id=\"${parent.getAttribute('data-group-id')}\"]`);\n\t\t\t\tif (parentContainer)\n\t\t\t\t{\n\t\t\t\t\tparentContainer.setAttribute('data-contains-active-item', 'Y');\n\t\t\t\t\tif (parentContainer.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t\t\t\t{\n\t\t\t\t\t\tparentContainer.classList.add('menu-item-active');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tparent = parent.closest('[data-relo=\"group-content\"]');\n\t\t\t}\n\t\t}\n\t}\n\n\tunhighlight(item: ?Item): ?Item\n\t{\n\t\tif (!(item instanceof Item))\n\t\t{\n\t\t\titem = this.item;\n\t\t}\n\t\tif (item instanceof Item)\n\t\t{\n\t\t\titem.container.classList.remove('menu-item-active');\n\t\t\tlet parent = item.container.closest('[data-role=\"group-content\"]');\n\t\t\tlet parentContainer;\n\t\t\twhile (parent)\n\t\t\t{\n\t\t\t\tparentContainer = parent.parentNode.querySelector(`[data-id=\"${parent.getAttribute('data-group-id')}\"]`);\n\t\t\t\tif (parentContainer)\n\t\t\t\t{\n\t\t\t\t\tparentContainer.removeAttribute('data-contains-active-item');\n\t\t\t\t\tparentContainer.classList.remove('menu-item-active');\n\t\t\t\t}\n\t\t\t\tparent = parent.closest('[data-relo=\"group-content\"]');\n\t\t\t}\n\t\t\treturn item;\n\t\t}\n\t\treturn null;\n\t}\n}\n","import { Loc, Type, Dom, Text, Reflection } from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport getItem from '../items/index';\nimport Item from '../items/item';\nimport ItemActive from '../items/item-active';\nimport { ItemMainPage } from '../items/item-main-page';\nimport ItemUserSelf from '../items/item-user-self';\nimport ItemUserFavorites from '../items/item-user-favorites';\nimport Options from \"../options\";\nimport DefaultController from \"./default-controller\";\nimport Utils from \"../utils\";\nimport Backend from \"../backend\";\nimport ItemAdminCustom from \"../items/item-admin-custom\";\nimport {Menu, MenuItem} from 'main.popup';\nimport ItemGroup from \"../items/item-group\";\nimport { Counter } from 'ui.cnt';\n\nexport default class ItemsController extends DefaultController{\n\tparentContainer: Element;\n\tcontainer: Element;\n\thiddenContainer: Element;\n\titems: Map = new Map();\n\t#activeItem: ItemActive = new ItemActive;\n\t#isEditMode = false;\n\n\tconstructor(container, {events})\n\t{\n\t\tsuper(container, {events});\n\t\tthis.parentContainer = container;\n\t\tthis.container = container.querySelector(\".menu-items\");\n\n\t\tthis.hiddenContainer = container\n\t\t\t.querySelector('#left-menu-hidden-items-block');\n\n\t\tcontainer\n\t\t\t.querySelectorAll('li.menu-item-block')\n\t\t\t.forEach(this.registerItem.bind(this))\n\t\t;\n\t\tcontainer\n\t\t\t.querySelector('#left-menu-hidden-separator')\n\t\t\t.addEventListener('click', this.toggleHiddenContainer.bind(this))\n\t\t;\n\n\t\tif (this.getActiveItem()\n\t\t\t&& this.getActiveItem().container\n\t\t\t\t.getAttribute('data-status') === 'hide'\n\t\t)\n\t\t{\n\t\t\tthis.#showHiddenContainer(false);\n\t\t}\n\t}\n\n\tregisterItem(node): Item\n\t{\n\t\tconst itemClass = getItem(node);\n\t\tconst item = new itemClass(this.container, node);\n\t\tthis.items.set(item.getId(), item);\n\n\t\tif (!(item instanceof ItemMainPage))\n\t\t{\n\t\t\tthis.#registerDND(item);\n\t\t}\n\n\t\tif (this.#activeItem.checkAndSet(\n\t\t\titem,\n\t\t\titem.getSimilarToUrl(\n\t\t\t\tUtils.getCurUri()\n\t\t\t)\n\t\t) === true)\n\t\t{\n\t\t\tlet parentItem = this.#getParentItemFor(item);\n\t\t\twhile (parentItem)\n\t\t\t{\n\t\t\t\tparentItem.markAsActive();\n\t\t\t\tparentItem = this.#getParentItemFor(parentItem);\n\t\t\t}\n\t\t}\n\n\t\tEventEmitter.subscribe(item, Options.eventName('onItemDelete'), ({data}) => {this.deleteItem(item, data)});\n\t\tEventEmitter.subscribe(item, Options.eventName('onItemConvert'), ({data}) => {this.convertItem(item, data)});\n\n\t\t[...item.container.querySelectorAll('a')]\n\t\t\t.forEach((node) => {\n\t\t\t\tnode.addEventListener('click', (event) => {\n\t\t\t\t\tif (this.#isEditMode === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}, true)\n\t\t\t})\n\t\t;\n\t\titem.container\n\t\t\t.querySelector('[data-role=\"item-edit-control\"]')\n\t\t\t?.addEventListener('click', (event) => {\n\t\t\t\tthis.openItemMenu(item, event.target, event.currentTarget);\n\t\t\t});\n\t\treturn item;\n\t}\n\n\tunregisterItem(item: Item)\n\t{\n\t\tif (!this.items.has(item.getId()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.items.delete(item.getId());\n\n\t\tthis.#activeItem.checkAndUnset(\n\t\t\titem,\n\t\t\titem.getSimilarToUrl(\n\t\t\t\tUtils.getCurUri()\n\t\t\t)\n\t\t);\n\n\t\tEventEmitter.unsubscribeAll(item, Options.eventName('onItemDelete'));\n\t\tEventEmitter.unsubscribeAll(item, Options.eventName('onItemConvert'));\n\t\titem.container.parentNode.replaceChild(item.container.cloneNode(true), item.container);\n\t}\n\n\tget isEditMode()\n\t{\n\t\treturn this.#isEditMode;\n\t}\n\n\tswitchToEditMode()\n\t{\n\t\tif (this.#isEditMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#isEditMode = true;\n\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('EditMode'),\n\t\t);\n\t}\n\n\tswitchToViewMode()\n\t{\n\t\tif (!this.#isEditMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#isEditMode = false;\n\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('ViewMode'),\n\t\t);\n\t}\n\n\tisHiddenContainerVisible()\n\t{\n\t\treturn this.hiddenContainer.classList.contains('menu-item-favorites-more-open');\n\t}\n\n\ttoggleHiddenContainer(animate)\n\t{\n\t\tif (this.hiddenContainer.classList.contains('menu-item-favorites-more-open'))\n\t\t{\n\t\t\tthis.#hideHiddenContainer(animate);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#showHiddenContainer(animate);\n\t\t}\n\t}\n\n\t#showHiddenContainer(animate)\n\t{\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('onHiddenBlockIsVisible')\n\t\t);\n\t\tif (animate === false)\n\t\t{\n\t\t\treturn this.hiddenContainer.classList.add('menu-item-favorites-more-open');\n\t\t}\n\n\t\tthis.hiddenContainer.style.height = \"0px\";\n\t\tthis.hiddenContainer.style.opacity = 0;\n\t\tthis.#animation(true, this.hiddenContainer, this.hiddenContainer.scrollHeight);\n\t}\n\n\t#hideHiddenContainer(animate)\n\t{\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('onHiddenBlockIsHidden')\n\t\t);\n\t\tif (animate === false)\n\t\t{\n\t\t\treturn this.hiddenContainer.classList.remove('menu-item-favorites-more-open');\n\t\t}\n\t\tthis.#animation(false, this.hiddenContainer, this.hiddenContainer.offsetHeight);\n\t}\n\n\t#animation(opening, hiddenBlock, maxHeight)\n\t{\n\t\thiddenBlock.style.overflow = \"hidden\";\n\t\t(new BX.easing({\n\t\t\tduration: 200,\n\t\t\tstart: {opacity: opening ? 0 : 100, height: opening ? 0 : maxHeight},\n\t\t\tfinish: {opacity: opening ? 100 : 0, height: opening ? maxHeight : 0},\n\t\t\ttransition: BX.easing.transitions.linear,\n\t\t\tstep: function (state) {\n\t\t\t\thiddenBlock.style.opacity = state.opacity / 100;\n\t\t\t\thiddenBlock.style.height = state.height + \"px\";\n\t\t\t},\n\t\t\tcomplete: function () {\n\t\t\t\tif (opening)\n\t\t\t\t{\n\t\t\t\t\thiddenBlock.classList.add('menu-item-favorites-more-open');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\thiddenBlock.classList.remove('menu-item-favorites-more-open');\n\t\t\t\t}\n\t\t\t\thiddenBlock.style.opacity = \"\";\n\t\t\t\thiddenBlock.style.overflow = \"\";\n\t\t\t\thiddenBlock.style.height = \"\";\n\t\t\t}\n\n\t\t})).animate();\n\t}\n\n\tsetItemAsAMainPage(item: Item)\n\t{\n\t\tconst node = item.container;\n\t\tnode.setAttribute(\"data-status\", \"show\");\n\t\tconst startTop = node.offsetTop;\n\t\tconst dragElement = Dom.create(\"div\", {\n\t\t\tattrs: {className: \"menu-draggable-wrap\"},\n\t\t\tstyle: {top: startTop}\n\t\t});\n\n\t\tconst insertBeforeElement = node.nextElementSibling;\n\t\tif (insertBeforeElement)\n\t\t{\n\t\t\tnode.parentNode.insertBefore(dragElement, insertBeforeElement);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.parentNode.appendChild(dragElement);\n\t\t}\n\n\t\tdragElement.appendChild(node);\n\n\t\tDom.addClass(node, \"menu-item-draggable\");\n\n\t\t(new BX.easing({\n\t\t\tduration: 500,\n\t\t\tstart: {top: startTop},\n\t\t\tfinish: {top: 0},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: function (state) { dragElement.style.top = state.top + \"px\"; },\n\t\t\tcomplete: () => {\n\t\t\t\tthis.container.insertBefore(node, BX(\"left-menu-empty-item\").nextSibling);\n\t\t\t\tDom.removeClass(node, \"menu-item-draggable\");\n\t\t\t\tDom.remove(dragElement);\n\t\t\t\tthis.#saveItemsSort({\n\t\t\t\t\taction: 'mainPageIsSet',\n\t\t\t\t\titemId: item.getId()\n\t\t\t\t});\n\t\t\t}\n\t\t})).animate();\n\t}\n\n\tshowItem(item: Item)\n\t{\n\t\tconst oldParent = this.#getParentItemFor(item);\n\t\tconst container = this.container;\n\n\t\titem.container.setAttribute('data-status', 'show');\n\t\tif (this.#canChangePaternity(item))\n\t\t{\n\t\t\tcontainer.appendChild(item.container);\n\t\t\tthis.#refreshActivity(item, oldParent);\n\t\t}\n\t\telse if (oldParent)\n\t\t{\n\t\t\tcontainer.appendChild(oldParent.container);\n\t\t\toldParent.container.setAttribute('data-status', 'show');\n\t\t\tcontainer.appendChild(oldParent.groupContainer);\n\t\t}\n\n\t\tif (this.hiddenContainer.querySelector('.menu-item-block') === null)\n\t\t{\n\t\t\tEventEmitter.emit(this, Options.eventName('onHiddenBlockIsEmpty'));\n\t\t\tthis.#hideHiddenContainer(false);\n\t\t}\n\n\t\tthis.#recalculateCounters(item);\n\t\tthis.#saveItemsSort({\n\t\t\taction: 'showItem',\n\t\t\titemId: item.getId()\n\t\t});\n\t}\n\n\thideItem(item: Item)\n\t{\n\t\tconst oldParent = this.#getParentItemFor(item);\n\t\tconst container = this.hiddenContainer.querySelector('#left-menu-hidden-items-list');\n\t\tconst emitEvent = container.querySelector('.menu-item-block') === null;\n\n\t\titem.container.setAttribute('data-status', 'hide');\n\t\tif (this.#canChangePaternity(item))\n\t\t{\n\t\t\tcontainer.appendChild(item.container);\n\t\t\tthis.#refreshActivity(item, oldParent);\n\t\t}\n\t\telse if (oldParent)\n\t\t{\n\t\t\tcontainer.appendChild(oldParent.container);\n\t\t\toldParent.container.setAttribute('data-status', 'hide');\n\t\t\tcontainer.appendChild(oldParent.groupContainer);\n\t\t}\n\n\t\tif (emitEvent)\n\t\t{\n\t\t\tEventEmitter.emit(this, Options.eventName('onHiddenBlockIsNotEmpty'));\n\t\t}\n\n\t\tthis.#recalculateCounters(item);\n\n\t\tthis.#saveItemsSort({\n\t\t\taction: 'hideItem',\n\t\t\titemId: item.getId()\n\t\t});\n\t}\n\n\t#recalculateCounters(item: Item)\n\t{\n\t\tlet counterValue = 0;\n\t\tconst counter = Counter.initFromCounterNode(item.container.querySelector(`.${Counter.BaseClassname}`));\n\n\t\tif (counter)\n\t\t{\n\t\t\tcounterValue = counter.getRealValue();\n\t\t}\n\n\t\tif (counterValue <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t[...this.items.entries()]\n\t\t\t.forEach(([id, itemGroup]) => {\n\t\t\t\tif (itemGroup instanceof ItemGroup)\n\t\t\t\t{\n\t\t\t\t\titemGroup.updateCounter();\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\tlet hiddenCounterValue = 0;\n\t\t[...this.parentContainer\n\t\t\t.querySelectorAll(`.menu-item-block[data-status=\"hide\"][data-role='item']`)\n\t\t].forEach((node) => {\n\t\t\tconst hiddenMenuItemCounter = Counter.initFromCounterNode(node.querySelector(`.${Counter.BaseClassname}`));\n\n\t\t\tif (hiddenMenuItemCounter)\n\t\t\t{\n\t\t\t\thiddenCounterValue += hiddenMenuItemCounter.getRealValue();\n\t\t\t}\n\t\t});\n\n\t\tCounter.updateCounterNodeValue(\n\t\t\tCounter.initFromCounterNode(this.parentContainer.querySelector('#menu-hidden-counter')),\n\t\t\thiddenCounterValue,\n\t\t);\n\t}\n\n\t#refreshActivity(item: Item, oldParent:? ItemGroup)\n\t{\n\t\tif (this.getActiveItem() !== item)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst newParent = this.#getParentItemFor(item);\n\n\t\tif (oldParent !== newParent)\n\t\t{\n\t\t\tif (oldParent instanceof ItemGroup)\n\t\t\t{\n\t\t\t\toldParent.markAsInactive();\n\t\t\t}\n\t\t\tif (newParent instanceof ItemGroup)\n\t\t\t{\n\t\t\t\tnewParent.markAsActive();\n\t\t\t}\n\t\t}\n\t}\n\n\t#updateCountersLastValue = null\n\tupdateCounters(counters, send)\n\t{\n\t\tconst countersDynamic = {};\n\t\tsend = send !== false;\n\t\t[...Object.entries(counters)]\n\t\t\t.forEach(([counterId, counterValue]) => {\n\t\t\t\t[...this.#getItemsByCounterId(counterId)]\n\t\t\t\t\t.forEach((item) => {\n\t\t\t\t\t\tconst {oldValue, newValue} = item.updateCounter(counterValue);\n\t\t\t\t\t\tconst state = item.container.getAttribute('data-status');\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(counterId.indexOf('crm_') < 0 || counterId.indexOf('crm_all') >= 0)\n\t\t\t\t\t\t\t&&\n\t\t\t\t\t\t\t(counterId.indexOf('tasks_') < 0 || counterId.indexOf('tasks_total') >= 0)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcountersDynamic[state] = countersDynamic[state] || 0;\n\t\t\t\t\t\t\tcountersDynamic[state] += (newValue - oldValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet parentItem = this.#getParentItemFor(item);\n\t\t\t\t\t\twhile (parentItem)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparentItem.updateCounter();\n\t\t\t\t\t\t\tparentItem = this.#getParentItemFor(parentItem);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\tif (send)\n\t\t\t\t{\n\t\t\t\t\tBX.localStorage.set('lmc-' + counterId, counterValue, 5);\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\tif (countersDynamic['hide'] !== undefined && countersDynamic['hide'] !== 0)\n\t\t{\n\t\t\tconst hiddenCounterNode = this.parentContainer.querySelector('#menu-hidden-counter');\n\t\t\thiddenCounterNode.dataset.counterValue = Math.max(0, Number(hiddenCounterNode.dataset.counterValue) + Number(countersDynamic['hide']));\n\t\t\tif (hiddenCounterNode.dataset.counterValue > 0)\n\t\t\t{\n\t\t\t\thiddenCounterNode.classList.remove('menu-hidden-counter');\n\t\t\t\thiddenCounterNode.innerHTML = hiddenCounterNode.dataset.counterValue > 99 ? '99+' : hiddenCounterNode.dataset.counterValue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thiddenCounterNode.classList.add('menu-hidden-counter');\n\t\t\t\thiddenCounterNode.innerHTML = '';\n\t\t\t}\n\t\t}\n\n\t\tif (typeof BXIM !== 'undefined')\n\t\t{\n\t\t\tif (this.#updateCountersLastValue === null)\n\t\t\t{\n\t\t\t\tthis.#updateCountersLastValue = 0;\n\t\t\t\t[...this.items.entries()]\n\t\t\t\t\t.forEach(([id, item]) => {\n\t\t\t\t\t\tif (item instanceof ItemGroup)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst res = item.getCounterValue();\n\n\t\t\t\t\t\tif (res > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet counterId = 'doesNotMatter';\n\t\t\t\t\t\t\tif (id.indexOf('menu_crm') >= 0 || id.indexOf('menu_tasks') >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst counterNode = item.container.querySelector(`.${Counter.BaseClassname}`);\n\t\t\t\t\t\t\t\tif (counterNode)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcounterId = counterNode.id;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tcounterId === 'doesNotMatter'\n\t\t\t\t\t\t\t\t|| counterId.indexOf('crm_all') >= 0\n\t\t\t\t\t\t\t\t|| counterId.indexOf('tasks_total') >= 0\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.#updateCountersLastValue += res;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#updateCountersLastValue += (countersDynamic['show'] !== undefined ? countersDynamic['show'] : 0);\n\t\t\t\tthis.#updateCountersLastValue += (countersDynamic['hide'] !== undefined ? countersDynamic['hide'] : 0);\n\t\t\t}\n\t\t\tconst visibleValue = (this.#updateCountersLastValue > 99 ? '99+' : (\n\t\t\t\tthis.#updateCountersLastValue < 0 ? '0' : this.#updateCountersLastValue\n\t\t\t));\n\n\t\t\tconst DesktopApi = Reflection.getClass('BX.Messenger.v2.Lib.DesktopApi');\n\t\t\tif (DesktopApi && DesktopApi.isDesktop())\n\t\t\t{\n\t\t\t\tDesktopApi.setBrowserIconBadge(visibleValue);\n\t\t\t}\n\t\t}\n\n\t\t[...this.items.entries()]\n\t\t\t.forEach(([id, itemGroup]) => {\n\t\t\t\tif (itemGroup instanceof ItemGroup)\n\t\t\t\t{\n\t\t\t\t\titemGroup.updateCounter();\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\tdecrementCounter(counters)\n\t{\n\t\t[...Object.entries(counters)]\n\t\t\t.forEach(([counterId, counterValue]) => {\n\t\t\t\tconst item = this.#getItemsByCounterId(counterId).shift();\n\t\t\t\tif (item)\n\t\t\t\t{\n\t\t\t\t\tconst value = item.getCounterValue();\n\t\t\t\t\tcounters[counterId] = value > counterValue ? (value - counterValue) : 0;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdelete counters[counterId];\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t\tthis.updateCounters(counters, false);\n\t}\n\n\t#getItemsByCounterId(counterId: string)\n\t{\n\t\tconst result = [];\n\t\t[...this.items.values()]\n\t\t\t.forEach((item: Item) => {\n\t\t\t\tconst counter = Counter.initFromCounterNode(item.container.querySelector(`.${Counter.BaseClassname}`));\n\n\t\t\t\tif (counter && counter.getId().includes(counterId))\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn result;\n\t}\n\n\t#getItemsToSave()\n\t{\n\t\tconst saveSortItems = {\n\t\t\tshow: [],\n\t\t\thide: [],\n\t\t};\n\t\tconst customItems = [];\n\n\t\tlet firstItemLink = null;\n\t\t['show', 'hide']\n\t\t\t.forEach((state) => {\n\t\t\t\tlet items = saveSortItems[state];\n\t\t\t\tlet currentGroupId = null;\n\t\t\t\tconst chain = [];\n\n\t\t\t\tArray.from(\n\t\t\t\t\tthis.parentContainer\n\t\t\t\t\t\t.querySelectorAll(`.menu-item-block[data-status=\"${state}\"]`)\n\t\t\t\t).forEach((node) =>\n\t\t\t\t{\n\t\t\t\t\tif (node.dataset.role === 'group')\n\t\t\t\t\t{\n\t\t\t\t\t\tconst groupId = node.parentNode.hasAttribute('data-group-id') ?\n\t\t\t\t\t\t\tnode.parentNode.getAttribute('data-group-id') : null;\n\t\t\t\t\t\titems = saveSortItems[state];\n\t\t\t\t\t\tlet groupItem\n\t\t\t\t\t\twhile (groupItem = chain.pop())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (groupItem['group_id'] === groupId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tchain.push(groupItem);\n\t\t\t\t\t\t\t\titems = groupItem.items;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst item = {\n\t\t\t\t\t\t\tgroup_id: node.dataset.id,\n\t\t\t\t\t\t\titems: []\n\t\t\t\t\t\t};\n\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t\tchain.push(item);\n\t\t\t\t\t\titems = item.items;\n\t\t\t\t\t\tcurrentGroupId = node.dataset.id;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif ([ItemAdminCustom.code, ItemUserSelf.code, ItemUserFavorites.code]\n\t\t\t\t\t\t\t.indexOf(node.getAttribute('data-type')) >= 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst item = {\n\t\t\t\t\t\t\t\tID: node.getAttribute('data-id'),\n\t\t\t\t\t\t\t\tLINK: node.getAttribute('data-link'),\n\t\t\t\t\t\t\t\tTEXT: Text.decode(node.querySelector(\"[data-role='item-text']\").innerHTML)\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (node.getAttribute(\"data-new-page\") === \"Y\")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titem.NEW_PAGE = \"Y\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcustomItems.push(item);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (firstItemLink === null && Type.isStringFilled(node.getAttribute(\"data-link\")))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfirstItemLink = node.getAttribute(\"data-link\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (node.closest(`[data-group-id=\"${currentGroupId}\"][data-role=\"group-content\"]`))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titems.push(node.dataset.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst groupId = node.parentNode.hasAttribute('data-group-id') ?\n\t\t\t\t\t\t\t\tnode.parentNode.getAttribute('data-group-id') : null;\n\t\t\t\t\t\t\titems = saveSortItems[state];\n\t\t\t\t\t\t\tlet groupItem\n\t\t\t\t\t\t\twhile (groupItem = chain.pop())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (groupItem['group_id'] === groupId)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tchain.push(groupItem);\n\t\t\t\t\t\t\t\t\titems = groupItem.items;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titems.push(node.dataset.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t;\n\t\treturn {saveSortItems, firstItemLink, customItems};\n\t}\n\n\t#saveItemsSort(analyticsLabel)\n\t{\n\t\tconst {saveSortItems, firstItemLink} = this.#getItemsToSave();\n\t\tBackend.saveItemsSort(saveSortItems, firstItemLink, analyticsLabel || {action: 'sortItem'});\n\t}\n\n\taddItem({node, animateFromPoint})\n\t{\n\t\tif (!(node instanceof Element))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst styleValue = node.style.display;\n\t\tif (animateFromPoint)\n\t\t{\n\t\t\tnode.dataset.styleDisplay = node.style.display;\n\t\t\tnode.style.display = 'none';\n\t\t}\n\t\tif (this.items.has(node.dataset.id) && node.dataset.type === ItemUserFavorites.code)\n\t\t{\n\t\t\tconst item = this.items.get(node.dataset.id);\n\t\t\titem.storage.push(ItemUserFavorites.code);\n\t\t\titem.container.dataset.storage = item.storage.join(',');\n\t\t\tnode = item.container;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.container.appendChild(node);\n\t\t\tthis.registerItem(node);\n\t\t\tthis.#saveItemsSort();\n\t\t}\n\n\t\tif (animateFromPoint)\n\t\t{\n\t\t\tthis\n\t\t\t\t.#animateTopItemToLeft(node, animateFromPoint)\n\t\t\t\t.then(() => {\n\t\t\t\t\tnode.style.display = node.dataset.styleDisplay;\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\tupdateItem(data)\n\t{\n\t\tlet {id} = data;\n\t\tif (this.items.has(id))\n\t\t{\n\t\t\tthis.items\n\t\t\t\t.get(id)\n\t\t\t\t.update(data)\n\t\t\t;\n\t\t}\n\t}\n\n\tdeleteItem(item: Item, {animate})\n\t{\n\t\tthis.items.delete(item.getId());\n\t\tthis.#activeItem.checkAndUnset(item);\n\n\t\tif (item instanceof ItemUserFavorites || animate)\n\t\t{\n\t\t\tthis\n\t\t\t\t.#animateTopItemFromLeft(item.container)\n\t\t\t\t.then(() => {\n\t\t\t\t\titem.container.parentNode.removeChild(item.container);\n\t\t\t\t\tthis.#saveItemsSort();\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\telse if (item.container)\n\t\t{\n\t\t\titem.container.parentNode.removeChild(item.container);\n\t\t\tthis.#saveItemsSort();\n\t\t}\n\t}\n\n\tconvertItem(item: Item)\n\t{\n\t\tthis.unregisterItem(item);\n\t\tthis.registerItem(this.parentContainer.querySelector(`li.menu-item-block[data-id=\"${item.getId()}\"]`));\n\t}\n\n\tgetActiveItem(): ?Item\n\t{\n\t\treturn this.#activeItem.item;\n\t}\n\n\t#getParentItemFor(item: Item): ?ItemGroup\n\t{\n\t\tif (!(item instanceof Item))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tconst parentContainer = item.container.closest('[data-role=\"group-content\"]');\n\t\tif (parentContainer && this.items.has(parentContainer.getAttribute('data-group-id')))\n\t\t{\n\t\t\treturn this.items.get(parentContainer.getAttribute('data-group-id'));\n\t\t}\n\t\treturn null;\n\t}\n\n\t#canChangePaternity(item: Item): boolean\n\t{\n\t\tif (item instanceof ItemGroup)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tconst oldParent = this.#getParentItemFor(item);\n\t\tif (oldParent instanceof ItemGroup\n\t\t\t&& item.container.parentNode.querySelectorAll('li.menu-item-block').length <= 1\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\texport()\n\t{\n\t\treturn this.#getItemsToSave();\n\t}\n\n\t//region DropdownActions\n\t#openItemMenuPopup;\n\topenItemMenu(item: Item, target: HTMLElement, currentTarget: HTMLElement)\n\t{\n\t\tif (currentTarget)\n\t\t{\n\t\t\tDom.addClass(currentTarget, '--open');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(target, '--open');\n\t\t}\n\n\t\tif (this.#openItemMenuPopup)\n\t\t{\n\t\t\tthis.#openItemMenuPopup.close();\n\t\t}\n\t\tconst contextMenuItems = [];\n\t\t// region hide/show item\n\n\t\tif (item instanceof ItemMainPage)\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage('MENU_OPEN_SETTINGS_MAIN_PAGE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\titem.openSettings();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\telse if (item.container.getAttribute(\"data-status\") === \"show\")\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"hide_item\"),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.hideItem(item);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"show_item\"),\n\t\t\t\tonclick: (target, contextMenuItem) => {\n\t\t\t\t\tthis.showItem(item);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t//endregion\n\n\t\t//region set as main page\n\t\tif (\n\t\t\t!Options.isExtranet\n\t\t\t&& !Options.isMainPageEnabled\n\t\t\t&& !(item instanceof ItemUserSelf)\n\t\t\t&& !(item instanceof ItemGroup)\n\t\t\t&& this.container.querySelector('li.menu-item-block[data-role=\"item\"]') !== item.container\n\t\t)\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"MENU_SET_MAIN_PAGE\"),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.setItemAsAMainPage(item);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t//endregion\n\n\t\titem\n\t\t\t.getDropDownActions()\n\t\t\t.forEach((actionItem) => {\n\t\t\t\tcontextMenuItems.push(actionItem);\n\t\t\t});\n\n\t\tif (!(item instanceof ItemMainPage))\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: this.#isEditMode ? Loc.getMessage(\"MENU_EDIT_READY_FULL\") : Loc.getMessage(\"MENU_SETTINGS_MODE\"),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.#isEditMode ? this.switchToViewMode() : this.switchToEditMode();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tcontextMenuItems.forEach((item) => {\n\t\t\titem['className'] = [\"menu-popup-no-icon\", item['className'] ?? ''].join(' ');\n\t\t\tconst {onclick} = item;\n\t\t\titem['onclick'] = (event, item) => {\n\t\t\t\titem.getMenuWindow().close();\n\t\t\t\tonclick.call(event, item);\n\t\t\t};\n\t\t});\n\t\tconst targetPosition = Dom.getPosition(target);\n\t\tthis.#openItemMenuPopup = new Menu({\n\t\t\tbindElement: {\n\t\t\t\ttop: targetPosition.top - targetPosition.height,\n\t\t\t\tleft: targetPosition.right,\n\t\t\t},\n\t\t\titems: contextMenuItems,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: Dom.getPosition(target).width / 2,\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onClose'));\n\t\t\t\t\titem.container.classList.remove('menu-item-block-hover');\n\t\t\t\t\tthis.#openItemMenuPopup = null;\n\t\t\t\t\tif (currentTarget)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(currentTarget, '--open');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(target, '--open');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonShow: () => {\n\t\t\t\t\titem.container.classList.add('menu-item-block-hover');\n\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onShow'));\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t\tthis.#openItemMenuPopup.show();\n\t}\n\t//endregion\n\n\t//region Visible sliding\n\t#animateTopItemToLeft(node, animateFromPoint)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tlet {startX, startY} = animateFromPoint;\n\t\t\tconst topMenuNode = document.createElement('DIV');\n\t\t\ttopMenuNode.style = `position: absolute; z-index: 1000; top: ${startY + 25}px;`\n\n\t\t\tconst cloneNode = node.cloneNode(true);\n\t\t\tcloneNode.style.display = node.dataset.styleDisplay;\n\t\t\tdocument.body.appendChild(topMenuNode);\n\t\t\ttopMenuNode.appendChild(cloneNode);\n\n\t\t\tlet finishY = this.hiddenContainer.getBoundingClientRect().top;\n\n\t\t\t(new BX.easing({\n\t\t\t\tduration: 500,\n\t\t\t\tstart: {left: startX},\n\t\t\t\tfinish: {left: 30},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: function (state) {\n\t\t\t\t\ttopMenuNode.style.left = state.left + \"px\";\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\t(new BX.easing({\n\t\t\t\t\t\tduration: 500,\n\t\t\t\t\t\tstart: {top: startY + 25},\n\t\t\t\t\t\tfinish: {top: finishY},\n\t\t\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\t\t\tstep: function (state) {\n\t\t\t\t\t\t\ttopMenuNode.style.top = state.top + \"px\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t\tDom.remove(topMenuNode);\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t})).animate();\n\t\t\t\t}\n\t\t\t})).animate();\n\t\t});\n\t}\n\t#animateTopItemFromLeft(node)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\t(new BX.easing({\n\t\t\t\tduration: 700,\n\t\t\t\tstart: {left: node.offsetLeft, opacity: 1},\n\t\t\t\tfinish: {left: 400, opacity: 0},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: function (state) {\n\t\t\t\t\tnode.style.paddingLeft = state.left + \"px\";\n\t\t\t\t\tnode.style.opacity = state.opacity;\n\t\t\t\t},\n\t\t\t\tcomplete: function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t})).animate();\n\t\t});\n\t}\n\t//endregion\n\n\t/* region D&D */\n\t#registerDND(item)\n\t{\n\t\t//drag&drop\n\t\tjsDD.Enable();\n\t\titem.container.onbxdragstart = this.#menuItemDragStart.bind(this, item);\n\t\titem.container.onbxdrag = (x, y) => { this.#menuItemDragMove(/*item,*/ x, y); };\n\t\titem.container.onbxdraghover = (dest, x, y) => { this.#menuItemDragHover(/*item, */dest, x, y); };\n\t\titem.container.onbxdragstop = this.#menuItemDragStop.bind(this, item);\n\t\tjsDD.registerObject(item.container);\n\t}\n\n\t#menuItemDragStart(item)\n\t{\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Bitrix24.LeftMenuClass:onDragStart');\n\n\t\tif (!(item instanceof ItemGroup)\n\t\t\t&& item.container.parentNode.querySelectorAll('li.menu-item-block').length <= 1\n\t\t\t&& this.#getParentItemFor(item) !== null\n\t\t)\n\t\t{\n\t\t\titem = this.#getParentItemFor(item);\n\t\t}\n\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('onDragModeOn')\n\t\t);\n\n\t\tthis.dnd = {\n\t\t\tcontainer: this.container.parentNode,\n\t\t\titemDomBlank: Dom.create('div', {\n\t\t\t\tstyle: {\n\t\t\t\t\tdisplay: 'none',\n\t\t\t\t\t// border: '2px solid navy'\n\t\t\t\t}}),\n\t\t\titemMoveBlank: Dom.create('div', {\n\t\t\t\tstyle: {\n\t\t\t\t\theight: item.container.offsetHeight + 'px',\n\t\t\t\t\t// border: '2px solid red',\n\t\t\t\t}}\n\t\t\t),\n\t\t\tdraggableBlock: Dom.create('div', {             //div to move\n\t\t\t\tattrs: {\n\t\t\t\t\tclassName: \"menu-draggable-wrap\",\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\ttop: [(\n\t\t\t\t\t\titem.container.offsetTop - item.container.offsetHeight\n\t\t\t\t\t), 'px'].join(''),\n\t\t\t\t\t// border: '2px solid black'\n\t\t\t\t}\n\t\t\t}),\n\t\t\titem: item,\n\t\t\toldParent: this.#getParentItemFor(item),\n\t\t\tisHiddenContainerVisible: this.isHiddenContainerVisible()\n\t\t}\n\n\t\tthis.#showHiddenContainer(false);\n\n\t\tconst registerItems = () => {\n\t\t\t[...this.parentContainer\n\t\t\t\t.querySelectorAll('li.menu-item-block')]\n\t\t\t\t.forEach((node) => {\n\t\t\t\t\tif (item instanceof ItemGroup\n\t\t\t\t\t\t&& this.#getParentItemFor(\n\t\t\t\t\t\t\tthis.items.get(node.getAttribute('data-id'))\n\t\t\t\t\t\t) !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tjsDD.registerDest(node, 100);\n\t\t\t\t});\n\n\t\t\tconst firstNode = this.parentContainer\n\t\t\t\t.querySelector(\"#left-menu-empty-item\");\n\t\t\tif (item instanceof ItemUserSelf)\n\t\t\t{\n\t\t\t\tjsDD.unregisterDest(firstNode);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tjsDD.registerDest(firstNode, 100);\n\t\t\t}\n\t\t\tjsDD.registerDest(this.parentContainer\n\t\t\t\t.querySelector(\"#left-menu-hidden-empty-item\"), 100);\n\t\t\tjsDD.registerDest(this.parentContainer\n\t\t\t\t.querySelector(\"#left-menu-hidden-separator\"), 100);\n\t\t};\n\n\t\tif (item instanceof ItemGroup)\n\t\t{\n\t\t\titem\n\t\t\t\t.collapse(true)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (this.dnd)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.dnd.pos = BX.pos(this.container.parentNode);\n\t\t\t\t\t\tregisterItems();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tregisterItems();\n\t\t}\n\n\t\tconst dragElement = item.container;\n\t\tDom.addClass(this.dnd.container, \"menu-drag-mode\")\n\t\tDom.addClass(dragElement, \"menu-item-draggable\");\n\t\tdragElement\n\t\t\t.parentNode\n\t\t\t.insertBefore(this.dnd.itemDomBlank, dragElement); //remember original item place\n\t\tdragElement\n\t\t\t.parentNode\n\t\t\t.insertBefore(this.dnd.itemMoveBlank, dragElement); //empty div\n\t\tthis.dnd.draggableBlock.appendChild(item.container);\n\n\t\tthis.dnd.container.style.position = 'relative';\n\t\tthis.dnd.container.appendChild(this.dnd.draggableBlock);\n\t\tthis.dnd.pos = BX.pos(this.container.parentNode);\n\t}\n\n\t#menuItemDragMove(/*item,*/ x, y)\n\t{\n\t\tconst item = this.dnd.item;\n\t\tvar menuItemsBlockHeight = this.dnd.pos.height;\n\t\ty = Math.max(0, y - this.dnd.pos.top);\n\t\tthis.dnd.draggableBlock.style.top = [\n\t\t\tMath.min(menuItemsBlockHeight - item.container.offsetHeight, y) - 5,\n\t\t\t'px'\n\t\t].join('');\n\t}\n\n\t#menuItemDragHover(/*item, */dest, x, y)\n\t{\n\t\tconst item = this.dnd.item;\n\t\tconst dragElement = item.container;\n\n\t\tif (dest === dragElement)\n\t\t{\n\t\t\tthis.dnd.itemDomBlank\n\t\t\t\t.parentNode.insertBefore(this.dnd.itemMoveBlank, this.dnd.itemDomBlank);\n\t\t\treturn;\n\t\t}\n\n\t\tif (dest.id === \"left-menu-empty-item\" &&\n\t\t\t(\n\t\t\t\tdragElement.getAttribute(\"data-type\") === \"self\"\n\t\t\t\t|| dragElement.getAttribute(\"data-disable-first-item\") === \"Y\"\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\treturn; // self-item cannot be moved on the first place\n\t\t}\n\n\t\tif (dest.getAttribute('data-role') === 'group')\n\t\t{\n\t\t\tconst groupHolder = dest.parentNode.querySelector(`[data-group-id=\"${dest.getAttribute('data-id')}\"]`);\n\t\t\tif (dest.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t\t{\n\t\t\t\tDom.insertAfter(this.dnd.itemMoveBlank, groupHolder);\n\t\t\t}\n\t\t\telse if (item instanceof ItemGroup)\n\t\t\t{\n\t\t\t\tDom.insertBefore(this.dnd.itemMoveBlank, dest);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.prepend(this.dnd.itemMoveBlank, groupHolder.querySelector('ul'));\n\t\t\t}\n\t\t}\n\t\telse if (this.dnd.container.contains(dest))\n\t\t{\n\t\t\tlet itemPlaceHolder = dest;\n\t\t\tif (item instanceof ItemGroup &&\n\t\t\t\tdest.closest('[data-role=\"group-content\"]'))\n\t\t\t{\n\t\t\t\titemPlaceHolder = dest.closest('[data-role=\"group-content\"]');\n\t\t\t}\n\t\t\tDom.insertAfter(this.dnd.itemMoveBlank, itemPlaceHolder);\n\t\t}\n\t}\n\n\t#menuItemDragStop(/*item*/)\n\t{\n\t\tconst item = this.dnd.item;\n\t\tconst oldParent = this.dnd.oldParent;\n\n\t\tconst dragElement = item.container;\n\n\t\tDom.removeClass(this.dnd.container, \"menu-drag-mode\");\n\t\tDom.removeClass(dragElement, \"menu-item-draggable\");\n\t\tthis.dnd.container.style.position = '';\n\n\t\tlet error = null;\n\t\tlet onHiddenBlockIsEmptyEmitted = false;\n\t\tif (this.parentContainer.querySelector('.menu-item-block') === item.container)\n\t\t{\n\t\t\tif (item instanceof ItemUserSelf)\n\t\t\t{\n\t\t\t\terror = Loc.getMessage('MENU_SELF_ITEM_FIRST_ERROR');\n\t\t\t}\n\t\t\telse if (item.container.getAttribute(\"data-disable-first-item\") === \"Y\")\n\t\t\t{\n\t\t\t\terror = Loc.getMessage(\"MENU_FIRST_ITEM_ERROR\");\n\t\t\t}\n\t\t}\n\t\tif (error !== null)\n\t\t{\n\t\t\tthis.dnd.itemDomBlank.parentNode.replaceChild(dragElement, this.dnd.itemDomBlank);\n\t\t\titem.showMessage(error);\n\t\t}\n\t\telse if (!this.dnd.container.contains(this.dnd.itemMoveBlank))\n\t\t{\n\t\t\tthis.dnd.itemDomBlank.parentNode.replaceChild(dragElement, this.dnd.itemDomBlank);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttry {\n\t\t\t\tthis.dnd.itemMoveBlank.parentNode.replaceChild(dragElement, this.dnd.itemMoveBlank);\n\n\t\t\t\tif (this.hiddenContainer.contains(dragElement))\n\t\t\t\t{\n\t\t\t\t\titem.container.setAttribute(\"data-status\", \"hide\");\n\t\t\t\t\tif (this.dnd.itemDomBlank.closest('#left-menu-hidden-items-block') === null\n\t\t\t\t\t\t&& this.hiddenContainer.querySelectorAll('.menu-item-block').length === 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onHiddenBlockIsNotEmpty'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\titem.container.setAttribute(\"data-status\", \"show\");\n\t\t\t\t\tif (this.hiddenContainer.querySelectorAll('.menu-item-block').length <= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tonHiddenBlockIsEmptyEmitted = true;\n\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onHiddenBlockIsEmpty'));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (item instanceof ItemGroup)\n\t\t\t\t{\n\t\t\t\t\titem\n\t\t\t\t\t\t.checkAndCorrect()\n\t\t\t\t\t\t.expand(true);\n\t\t\t\t}\n\t\t\t\tthis.#refreshActivity(item, oldParent);\n\t\t\t\tthis.#recalculateCounters(item);\n\n\t\t\t\tconst analyticsLabel = {action: 'sortItem'};\n\t\t\t\tif (this.parentContainer.querySelector('.menu-item-block') === item.container\n\t\t\t\t\t&& !this.isExtranet)\n\t\t\t\t{\n\t\t\t\t\titem.showMessage(Loc.getMessage(\"MENU_ITEM_MAIN_PAGE\"));\n\t\t\t\t\tanalyticsLabel.action = 'mainPage';\n\t\t\t\t\tanalyticsLabel.itemId = item.getId();\n\t\t\t\t}\n\t\t\t\tthis.#saveItemsSort(analyticsLabel);\n\t\t\t}\n\t\t\tcatch(e)\n\t\t\t{\n\t\t\t\tthis.dnd.itemDomBlank.parentNode.replaceChild(dragElement, this.dnd.itemDomBlank);\n\t\t\t}\n\t\t}\n\n\t\tDom.remove(this.dnd.draggableBlock);\n\t\tDom.remove(this.dnd.itemDomBlank);\n\t\tDom.remove(this.dnd.itemMoveBlank);\n\n\t\tjsDD.enableDest(dragElement);\n\t\tthis.container.style.position = 'static';\n\t\tif (!this.dnd.isHiddenContainerVisible || onHiddenBlockIsEmptyEmitted === true)\n\t\t{\n\t\t\tthis.#hideHiddenContainer(false);\n\t\t}\n\t\tdelete this.dnd;\n\n\t\t[...this.parentContainer\n\t\t\t.querySelectorAll('li.menu-item-block')]\n\t\t\t.forEach((node) => {\n\t\t\t\tjsDD.registerDest(node);\n\t\t\t});\n\t\tconst firstNode = this.parentContainer\n\t\t\t.querySelector(\"#left-menu-empty-item\");\n\t\tjsDD.unregisterDest(firstNode);\n\t\tjsDD.unregisterDest(this.parentContainer\n\t\t\t.querySelector(\"#left-menu-hidden-empty-item\"));\n\t\tjsDD.unregisterDest(this.parentContainer\n\t\t\t.querySelector(\"#left-menu-hidden-separator\"));\n\t\tjsDD.refreshDestArea();\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('onDragModeOff')\n\t\t);\n\t}\n\t/*endregion*/\n}\n","import {Text, Tag, Loc} from 'main.core';\nimport {PopupManager, Popup} from 'main.popup';\nimport {EventEmitter} from 'main.core.events';\nimport Backend from '../backend';\nimport Options from '../options';\nimport DefaultController from './default-controller';\nimport ItemUserSelf from '../items/item-user-self';\nimport ItemUserFavorites from \"../items/item-user-favorites\";\nimport Utils from \"../utils\";\n\nexport default class ItemDirector extends DefaultController\n{\n\n\tconstructor(container, params)\n\t{\n\t\tsuper(container, params);\n\t}\n\n\tsaveCurrentPage(page: ?Object)\n\t{\n\t\treturn ItemUserFavorites\n\t\t\t.saveCurrentPage(page)\n\t\t\t.then((data) => {\n\t\t\t\tEventEmitter.emit(\n\t\t\t\t\tthis,\n\t\t\t\t\tOptions.eventName('onItemHasBeenAdded'),\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t\treturn data;\n\t\t\t})\n\t\t\t.catch(Utils.catchError);\n\t}\n\n\tsaveStandardPage(topItem)\n\t{\n\t\treturn ItemUserFavorites\n\t\t\t.saveStandardPage(topItem)\n\t\t\t.then((data) => {\n\t\t\t\tEventEmitter.emit(\n\t\t\t\t\tthis,\n\t\t\t\t\tOptions.eventName('onItemHasBeenAdded'),\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t\treturn data;\n\t\t\t})\n\t\t\t.catch(Utils.catchError);\n\t}\n\n\tdeleteCurrentPage({pageLink})\n\t{\n\t\treturn ItemUserFavorites\n\t\t\t.deleteCurrentPage({pageLink})\n\t\t\t.then((data) => {\n\n\t\t\t\tEventEmitter.emit(this,\n\t\t\t\t\tOptions.eventName('onItemHasBeenDeleted'),\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t\treturn data;\n\t\t\t})\n\t\t\t.catch(Utils.catchError);\n\t}\n\n\tdeleteStandardPage(topItem)\n\t{\n\t\treturn ItemUserFavorites\n\t\t\t.deleteStandardPage(topItem)\n\t\t\t.then((data) => {\n\t\t\t\tEventEmitter.emit(this,\n\t\t\t\t\tOptions.eventName('onItemHasBeenDeleted'),\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t\treturn data;\n\t\t\t})\n\t\t\t.catch(Utils.catchError);\n\t}\n\n\tshowAddToSelf(bindElement)\n\t{\n\t\tItemUserSelf\n\t\t\t.showAdd(bindElement)\n\t\t\t.then((data) => {\n\t\t\t\tEventEmitter.emit(this,\n\t\t\t\t\tOptions.eventName('onItemHasBeenAdded'),\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t}).catch(Utils.catchError);\n\t}\n}\n","import { sendData } from 'ui.analytics';\n\nexport class Analytics\n{\n\t#isAdmin: boolean;\n\n\tconstructor(isAdmin: boolean) {\n\t\tthis.#isAdmin = isAdmin ? AnalyticUserRole.ADMIN : AnalyticUserRole.NOT_ADMIN;\n\t}\n\n\tsendSetCustomPreset()\n\t{\n\t\tsendData({\n\t\t\ttool: AnalyticTool,\n\t\t\tcategory: AnalyticCategory.MENU,\n\t\t\tevent: AnalyticEvent.SET,\n\t\t\ttype: 'custom',\n\t\t\tc_section: AnalyticSection.MENU,\n\t\t\tp1: this.#isAdmin,\n\t\t});\n\t}\n\n\tsendSetPreset(presetId: string, isPersonal: boolean, action)\n\t{\n\t\tsendData({\n\t\t\ttype: presetId,\n\t\t\tevent: isPersonal ? AnalyticEvent.CHANGE : AnalyticEvent.SELECT,\n\t\t\ttool: AnalyticTool,\n\t\t\tcategory: isPersonal ? AnalyticCategory.MENU : AnalyticCategory.TOOL,\n\t\t\tc_section: isPersonal ? AnalyticSection.MENU : AnalyticSection.POPUP,\n\t\t\tc_element: action,\n\t\t\tp1: this.#isAdmin,\n\t\t});\n\t}\n\n\tsendClose()\n\t{\n\t\tsendData({\n\t\t\tevent: AnalyticEvent.SHOW,\n\t\t\ttool: AnalyticTool,\n\t\t\tcategory: AnalyticCategory.TOOL,\n\t\t\tc_section: AnalyticSection.POPUP,\n\t\t});\n\t}\n}\n\nconst AnalyticCategory = {\n\tTOOL: 'main_tool',\n\tMENU: 'main_menu',\n};\n\nconst AnalyticEvent = {\n\tSHOW: 'window_show',\n\tSELECT: 'select',\n\tCHANGE: 'change',\n\tSET: 'menu_set',\n};\n\nconst AnalyticUserRole = {\n\tADMIN: 'isAdmin_Y',\n\tNOT_ADMIN: 'isAdmin_N',\n};\n\nconst AnalyticSection = {\n\tPOPUP: 'menu_popup',\n\tPRESET: 'preset',\n\tQUALIFICATION: 'qualification',\n\tSETTINGS: 'settings',\n\tMENU: 'main_menu',\n};\n\nexport const AnalyticActions = {\n\tCONFIRM: 'confirm',\n\tLATER: 'later',\n\tCLOSE: 'close',\n\tSAVE: 'save',\n\tSKIP: 'skip',\n};\n\nconst AnalyticTool = 'intranet';\n","import { Loc, Text, Dom, ajax as Ajax, Tag, Event, Runtime, Type } from 'main.core';\nimport { MemoryCache, type BaseCache } from 'main.core.cache';\nimport { SidePanel } from 'main.sidepanel';\n\nexport class GroupPanel\n{\n\t#refs: BaseCache<HTMLElement> = new MemoryCache();\n\t#status: 'initial' | 'loading' | 'loaded' = 'initial';\n\t#xhr = null;\n\t#isExtranetInstalled: boolean = true;\n\n\tconstructor(options)\n\t{\n\t\tconst groupsLink = document.getElementById('menu-all-groups-link');\n\t\tEvent.bind(groupsLink, 'click', this.#handleGroupsLinkClick.bind(this));\n\n\t\tthis.#isExtranetInstalled = (\n\t\t\tType.isBoolean(options.isExtranetInstalled)\n\t\t\t\t? options.isExtranetInstalled\n\t\t\t\t: this.#isExtranetInstalled\n\t\t);\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('container', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"group-panel-content\">\n\t\t\t\t\t<div class=\"group-panel-header\">\n\t\t\t\t\t\t${this.getFilterContainer()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getItemsContainer()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetItemsContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('items-container', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"group-panel-items\" onclick=\"${this.#handleItemsClick.bind(this)}\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetFilterContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('filter-container', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"group-panel-header-filters\">${[\n\t\t\t\t\tTag.render`\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"group-panel-header-filter group-panel-header-filter-all\"\n\t\t\t\t\t\t\tdata-filter=\"all\"\n\t\t\t\t\t\t\tonclick=\"${this.#handleFilterClick.bind(this)}\"\n\t\t\t\t\t\t>${Loc.getMessage('MENU_MY_WORKGROUPS')}</span>\n\t\t\t\t\t`,\n\t\t\t\t\t(\n\t\t\t\t\t\tthis.#isExtranetInstalled\n\t\t\t\t\t\t\t? Tag.render`\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclass=\"group-panel-header-filter group-panel-header-filter-extranet\"\n\t\t\t\t\t\t\t\t\tdata-filter=\"extranet\"\n\t\t\t\t\t\t\t\t\tonclick=\"${this.#handleFilterClick.bind(this)}\"\n\t\t\t\t\t\t\t\t>${Loc.getMessage('MENU_MY_WORKGROUPS_EXTRANET')}</span>\n\t\t\t\t\t\t\t`\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t),\n\t\t\t\t\tTag.render`\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"group-panel-header-filter group-panel-header-filter-favorites\"\n\t\t\t\t\t\t\tdata-filter=\"favorites\"\n\t\t\t\t\t\t\tonclick=\"${this.#handleFilterClick.bind(this)}\"\n\t\t\t\t\t\t>${Loc.getMessage('MENU_MY_WORKGROUPS_FAVORITES')}${this.getCounterContainer()}</span>\n\t\t\t\t\t`,\n\t\t\t\t]}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCounterContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('counter-container', () => {\n\t\t\treturn Tag.render`<span class=\"group-panel-header-filter-counter\"></span>`;\n\t\t});\n\t}\n\n\t#handleGroupsLinkClick(event): void\n\t{\n\t\tSidePanel.Instance.open('my-groups', {\n\t\t\tcacheable: false,\n\t\t\tcontentCallback: () => {\n\t\t\t\treturn Runtime.loadExtension('ui.sidepanel.layout').then((exports) => {\n\t\t\t\t\tconst { Layout } = exports;\n\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\ttitle: Loc.getMessage('MENU_MY_WORKGROUPS'),\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: true,\n\t\t\t\t\t\t\tmargin: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: () => [],\n\t\t\t\t\t\tcontent: () => {\n\t\t\t\t\t\t\tif (this.#status === 'loaded')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn this.getContainer();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn this.#loadContent();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tif (this.#xhr && this.#status !== 'loaded')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#status = 'initial';\n\t\t\t\t\t\tthis.#xhr.abort();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tasync #loadContent(): Promise<HTMLElement>\n\t{\n\t\tthis.#status = 'loading';\n\n\t\tconst response = await Ajax.runAction('intranet.leftmenu.getGroups', {\n\t\t\tonrequeststart: (xhr): void => {\n\t\t\t\tthis.#xhr = xhr;\n\t\t\t},\n\t\t});\n\n\t\tconst { groups, filter } = response.data;\n\t\tfor (const group of groups)\n\t\t{\n\t\t\tconst classes = ['group-panel-item'];\n\t\t\tclasses.push(group.extranet ? 'group-panel-item-extranet' : 'group-panel-item-intranet');\n\t\t\tif (group.favorite)\n\t\t\t{\n\t\t\t\tclasses.push('group-panel-item-favorite');\n\t\t\t}\n\n\t\t\tconst dom = Tag.render`\n\t\t\t\t<a href=\"${encodeURI(group.url)}\" \n\t\t\t\t\tclass=\"${classes.join(' ')}\" \n\t\t\t\t\tdata-id=\"${group.id}\" \n\t\t\t\t\tdata-slider-ignore-autobinding=\"true\"\n\t\t\t\t>\n\t\t\t\t\t<span class=\"group-panel-item-text\" title=\"${Text.encode(group.title)}\">${Text.encode(group.title)}</span>\n\t\t\t\t\t<span class=\"group-panel-item-star\"></span>\n\t\t\t\t</a>\n\t\t\t`;\n\n\t\t\tDom.append(dom, this.getItemsContainer());\n\t\t}\n\n\t\tDom.addClass(this.getContainer(), `group-panel-content-${filter}`);\n\t\tDom.attr(this.getContainer(), { 'data-filter': filter });\n\n\t\tthis.#status = 'loaded';\n\n\t\treturn this.getContainer();\n\t}\n\n\t#handleFilterClick(event): void\n\t{\n\t\tconst filterElement = event.target;\n\n\t\tconst currentFilter = this.getContainer().dataset.filter || 'all';\n\t\tconst newFilter = filterElement.dataset.filter || 'all';\n\n\t\tif (currentFilter !== newFilter)\n\t\t{\n\t\t\tthis.getContainer().dataset.filter = newFilter;\n\t\t\tthis.saveFilter(newFilter);\n\n\t\t\tnew BX.easing({\n\t\t\t\tduration: 50,\n\t\t\t\tstart: { opacity: 1 },\n\t\t\t\tfinish: { opacity: 0 },\n\t\t\t\ttransition: BX.easing.transitions.linear,\n\n\t\t\t\tstep: (state) => {\n\t\t\t\t\tDom.style(this.getItemsContainer(), 'opacity', state.opacity / 100);\n\t\t\t\t},\n\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tDom.removeClass(this.getContainer(), `group-panel-content-${currentFilter}`);\n\t\t\t\t\tDom.addClass(this.getContainer(), `group-panel-content-${newFilter}`);\n\n\t\t\t\t\tnew BX.easing({\n\t\t\t\t\t\tduration: 50,\n\t\t\t\t\t\tstart: { opacity: 0 },\n\t\t\t\t\t\tfinish: { opacity: 1 },\n\t\t\t\t\t\ttransition: BX.easing.transitions.linear,\n\t\t\t\t\t\tstep: (state) => {\n\t\t\t\t\t\t\tDom.style(this.getItemsContainer(), 'opacity', state.opacity / 100);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t\tDom.style(this.getItemsContainer(), 'opacity', null);\n\t\t\t\t\t\t},\n\t\t\t\t\t}).animate();\n\t\t\t\t},\n\t\t\t}).animate();\n\t\t}\n\n\t\tevent.stopPropagation();\n\t}\n\n\t#handleItemsClick(event): void\n\t{\n\t\tif (!Dom.hasClass(event.target, 'group-panel-item-star'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst star = event.target;\n\t\tconst item = star.parentNode;\n\t\tconst groupId = item.dataset.id;\n\n\t\tconst action = Dom.hasClass(item, 'group-panel-item-favorite') ? 'removeFromFavorites' : 'addToFavorites';\n\t\tDom.toggleClass(item, 'group-panel-item-favorite');\n\n\t\tthis.#animateStart(star);\n\t\tthis.#animateCounter(action === 'addToFavorites');\n\n\t\tvoid Ajax.runAction(`intranet.leftmenu.${action}`, {\n\t\t\tdata: {\n\t\t\t\tgroupId,\n\t\t\t},\n\t\t});\n\n\t\tevent.preventDefault();\n\t}\n\n\t#animateStart(star): void\n\t{\n\t\tconst flyingStar = star.cloneNode();\n\t\tDom.style(flyingStar, 'margin-left', `-${star.offsetWidth}px`);\n\t\tDom.append(flyingStar, star.parentNode);\n\n\t\tnew BX.easing({\n\t\t\tduration: 200,\n\t\t\tstart: { opacity: 100, scale: 100 },\n\t\t\tfinish: { opacity: 0, scale: 300 },\n\t\t\tstep: (state) => {\n\t\t\t\tDom.style(flyingStar, 'transform', `scale(${state.scale / 100})`);\n\t\t\t\tDom.style(flyingStar, 'opacity', state.opacity / 100);\n\t\t\t},\n\t\t\tcomplete: () => {\n\t\t\t\tflyingStar.parentNode.removeChild(flyingStar);\n\t\t\t},\n\t\t}).animate();\n\t}\n\n\t#animateCounter(positive): void\n\t{\n\t\tthis.getCounterContainer().innerHTML = positive === false ? '-1' : '+1';\n\n\t\tnew BX.easing({\n\t\t\tduration: 400,\n\t\t\tstart: { opacity: 100, top: 0 },\n\t\t\tfinish: { opacity: 0, top: -20 },\n\t\t\ttransition: BX.easing.transitions.linear,\n\t\t\tstep: (state) => {\n\t\t\t\tDom.style(this.getCounterContainer(), 'top', `${state.top}px`);\n\t\t\t\tDom.style(this.getCounterContainer(), 'opacity', state.opacity / 100);\n\t\t\t},\n\t\t\tcomplete: () => {\n\t\t\t\tDom.style(this.getCounterContainer(), 'top', null);\n\t\t\t\tDom.style(this.getCounterContainer(), 'opacity', null);\n\t\t\t},\n\t\t}).animate();\n\t}\n\n\tsaveFilter(filter)\n\t{\n\t\tvoid Ajax.runAction('intranet.leftmenu.setGroupFilter', {\n\t\t\tdata: {\n\t\t\t\tfilter,\n\t\t\t},\n\t\t});\n\t}\n}\n","import { ajax, Cache, Dom, Loc, Reflection, Runtime, Type } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MenuItem, PopupManager } from 'main.popup';\nimport { AirButtonStyle, Button } from 'ui.buttons';\nimport PresetCustomController from './controllers/preset-custom-controller';\nimport PresetDefaultController from './controllers/preset-default-controller';\nimport SettingsController from './controllers/settings-controller';\nimport Options from './options';\nimport Backend from './backend';\nimport ItemsController from './controllers/items-controller';\nimport ItemDirector from './controllers/item-director';\nimport Item from './items/item';\nimport ItemSystem from './items/item-system';\nimport ItemUserFavorites from './items/item-user-favorites';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { BannerDispatcher } from 'ui.banner-dispatcher';\nimport { Analytics, AnalyticActions } from './analytics';\nimport { GroupPanel } from './group-panel';\n\nexport default class Menu\n{\n\tmenuContainer;\n\tmenuHeader;\n\tmenuBody;\n\tmainTable;\n\tupButton;\n\tmenuMoreButton;\n\n\tcache = new Cache.MemoryCache();\n\n\tscrollModeThreshold = 20;//\n\tlastScrollOffset = 0;\n\tslidingModeTimeoutId = 0;\n\n\tisMenuMouseEnterBlocked = false;\n\tisMenuMouseLeaveBlocked = [];\n\tisCollapsedMode = false;\n\n\tconstructor(params)\n\t{\n\t\tthis.menuContainer = document.getElementById(\"menu-items-block\");\n\t\tif (!this.menuContainer)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tparams = typeof params === \"object\" ? params : {};\n\n\t\tOptions.isExtranet = params.isExtranet === 'Y';\n\t\tOptions.isMainPageEnabled = params.isMainPageEnabled === 'Y';\n\t\tOptions.isAdmin = params.isAdmin;\n\t\tOptions.isCustomPresetRestricted = params.isCustomPresetAvailable !== 'Y';\n\t\tOptions.availablePresetTools = params.availablePresetTools;\n\t\tOptions.settingsPath = params.settingsPath;\n\t\tOptions.inviteDialogLink = params.inviteDialogLink;\n\t\tOptions.showMarta = params.showMarta;\n\t\tOptions.showSitemapMenuItem = params.showSitemapMenuItem;\n\t\tOptions.showLicenseButton = params.showLicenseButton;\n\t\tOptions.licenseButtonPath = params.licenseButtonPath;\n\n\t\tthis.isCollapsedMode = params.isCollapsedMode;\n\t\tthis.analytics = new Analytics(params.isAdmin);\n\n\t\tthis.initAndBindNodes();\n\t\tthis.bindEvents();\n\t\tthis.getItemsController();\n\t\tthis.#addLicenseButton();\n\n\t\tthis.groupPanel = new GroupPanel({\n\t\t\tisExtranetInstalled: params.isExtranetInstalled !== 'N',\n\t\t});\n\n\t\t// Emulate document scroll because init() can be invoked after page load scroll\n\t\t// (a hard reload with script at the bottom).\n\t\t// this.handleDocumentScroll();\n\t}\n\n\tinitAndBindNodes()\n\t{\n\t\tthis.menuContainer.addEventListener(\"dblclick\", this.handleMenuDoubleClick.bind(this));\n\t\tthis.menuContainer.addEventListener(\"mouseenter\", this.handleMenuMouseEnter.bind(this));\n\t\tthis.menuContainer.addEventListener(\"mouseleave\", this.handleMenuMouseLeave.bind(this));\n\t\tthis.menuContainer.addEventListener(\"transitionend\", this.handleSlidingTransitionEnd.bind(this));\n\n\t\tthis.menuHeader = this.menuContainer.querySelector(\".menu-items-header\");\n\t\tthis.menuBody = this.menuContainer.querySelector(\".menu-items-body\");\n\t\tthis.menuItemsBlock = this.menuContainer.querySelector(\".menu-items\");\n\n\t\t// document.addEventListener(\"scroll\", this.handleDocumentScroll.bind(this));\n\n\t\tthis.mainTable = document.querySelector(\".js-app\");\n\t\tthis.menuHeaderBurger = this.menuHeader.querySelector(\".menu-switcher\");\n\t\tthis.menuHeaderBurger.addEventListener('click', this.handleBurgerClick.bind(this));\n\t\tthis.menuHeader.querySelector(\".menu-items-header-title\")\n\t\t\t.addEventListener('click', this.handleBurgerClick.bind(this, true));\n\n\t\t// this.upButton = this.menuContainer.querySelector(\".menu-btn-arrow-up\");\n\t\t// this.upButton.addEventListener(\"click\", this.handleUpButtonClick.bind(this));\n\t\tthis.menuMoreButton = this.menuContainer.querySelector(\".menu-item-block.menu-expand\");\n\t\tthis.menuMoreButton = this.menuContainer.querySelector('[data-role=\"expand-menu-item\"]');\n\t\tthis.menuMoreButton.addEventListener(\"click\", this.handleShowHiddenClick.bind(this));\n\n\t\tconst siteMapItem = this.menuContainer.querySelector(\".menu-sitemap-btn\");\n\t\tif (siteMapItem)\n\t\t{\n\t\t\tsiteMapItem.addEventListener('click', this.handleSiteMapClick.bind(this));\n\t\t}\n\n\t\tconst settingsSaveBtn = this.menuContainer.querySelector(\".menu-settings-save-btn\");\n\t\tif (settingsSaveBtn)\n\t\t{\n\t\t\tsettingsSaveBtn.addEventListener('click', this.handleViewMode.bind(this));\n\t\t}\n\n\t\t// this.menuContainer.querySelector(\".menu-settings-btn\")?.addEventListener('click', () => {\n\t\t// \tthis.getSettingsController().show();\n\t\t// });\n\t\tthis.menuContainer.querySelector('[data-role=\"menu-settings-item\"]')?.addEventListener('click', () => {\n\t\t\tthis.getSettingsController().show();\n\t\t});\n\t}\n\n\t// region Controllers\n\tgetItemsController(): ItemsController\n\t{\n\t\treturn this.cache.remember('itemsController', () => {\n\t\t\treturn new ItemsController(\n\t\t\t\tthis.menuContainer,\n\t\t\t\t{\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tEditMode: () => {\n\t\t\t\t\t\t\tthis.toggle(true);\n\t\t\t\t\t\t\tthis.menuContainer.classList.add('menu-items-edit-mode');\n\t\t\t\t\t\t\tthis.menuContainer.classList.remove('menu-items-view-mode');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tViewMode: () => {\n\t\t\t\t\t\t\tthis.toggle(true);\n\t\t\t\t\t\t\tthis.menuContainer.classList.add('menu-items-view-mode');\n\t\t\t\t\t\t\tthis.menuContainer.classList.remove('menu-items-edit-mode');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDragModeOn: ({target}) => {\n\t\t\t\t\t\t\tthis.switchToSlidingMode(true);\n\t\t\t\t\t\t\tthis.isMenuMouseLeaveBlocked.push('drag');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDragModeOff: ({target}) => {\n\t\t\t\t\t\t\tthis.isMenuMouseLeaveBlocked.pop();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonHiddenBlockIsVisible: this.onHiddenBlockIsVisible.bind(this),\n\t\t\t\t\t\tonHiddenBlockIsHidden: this.onHiddenBlockIsHidden.bind(this),\n\t\t\t\t\t\tonHiddenBlockIsEmpty: this.onHiddenBlockIsEmpty.bind(this),\n\t\t\t\t\t\tonHiddenBlockIsNotEmpty: this.onHiddenBlockIsNotEmpty.bind(this),\n\t\t\t\t\t\tonShow: () => { this.isMenuMouseLeaveBlocked.push('items'); },\n\t\t\t\t\t\tonClose: () => { this.isMenuMouseLeaveBlocked.pop(); },\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tgetItemDirector(): ItemDirector\n\t{\n\t\treturn this.cache.remember('itemsCreator', () => {\n\t\t\treturn new ItemDirector(\n\t\t\t\tthis.menuContainer,\n\t\t\t\t{\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonItemHasBeenAdded: ({data}) => {\n\t\t\t\t\t\t\tthis.getItemsController().addItem(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tgetSettingsController(): ?SettingsController\n\t{\n\t\treturn this.cache.remember('presetController', () => {\n\t\t\tconst node = this.menuContainer.querySelector('[data-role=\"menu-settings-item\"]');\n\n\t\t\tif (!node)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn new SettingsController(\n\t\t\t\tnode,\n\t\t\t\t{\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonGettingSettingMenuItems: this.onGettingSettingMenuItems.bind(this),\n\t\t\t\t\t\tonShow: () => { this.isMenuMouseLeaveBlocked.push('settings'); },\n\t\t\t\t\t\tonClose: () => { this.isMenuMouseLeaveBlocked.pop(); },\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tgetCustomPresetController(): PresetCustomController\n\t{\n\t\treturn this.cache.remember('customPresetController', () => {\n\t\t\treturn new PresetCustomController(\n\t\t\t\tthis.menuContainer,\n\t\t\t\t{\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPresetIsSet: ({ data }) => {\n\t\t\t\t\t\t\tconst { saveSortItems, firstItemLink, customItems } = this.getItemsController().export();\n\n\t\t\t\t\t\t\tif (!data)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.analytics.sendSetCustomPreset();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn Backend.setCustomPreset(data, saveSortItems, customItems, firstItemLink)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonShow: () => { this.isMenuMouseLeaveBlocked.push('presets'); },\n\t\t\t\t\t\tonClose: () => { this.isMenuMouseLeaveBlocked.pop(); },\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tgetDefaultPresetController(): PresetDefaultController\n\t{\n\t\tlet closeEventWasProcessed = false;\n\t\tconst postponeHandler = (mode: String): Promise => {\n\t\t\tconst result = Backend.postponeSystemPreset(mode);\n\t\t\tEventEmitter.emit(this, Options.eventName('onPresetIsPostponed'));\n\n\t\t\treturn result;\n\t\t};\n\n\t\treturn this.cache.remember('defaultPresetController', () => {\n\t\t\tconst presetController = new PresetDefaultController(\n\t\t\t\tthis.menuContainer,\n\t\t\t\t{\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPresetIsSet: ({ data: { mode, presetId } }) => {\n\t\t\t\t\t\t\tthis.analytics.sendSetPreset(\n\t\t\t\t\t\t\t\tpresetId,\n\t\t\t\t\t\t\t\tmode === 'personal',\n\t\t\t\t\t\t\t\tAnalyticActions.CONFIRM,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcloseEventWasProcessed = true;\n\n\t\t\t\t\t\t\treturn Backend.setSystemPreset(mode, presetId);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonPresetIsPostponed: ({ data: { mode } }) => {\n\t\t\t\t\t\t\tthis.analytics.sendSetPreset(\n\t\t\t\t\t\t\t\tpresetController.getSelectedPreset(),\n\t\t\t\t\t\t\t\tmode === 'personal',\n\t\t\t\t\t\t\t\tAnalyticActions.LATER,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcloseEventWasProcessed = true;\n\n\t\t\t\t\t\t\treturn postponeHandler(mode);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\t\tthis.analytics.sendClose();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\tif (closeEventWasProcessed !== true)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.analytics.sendSetPreset(\n\t\t\t\t\t\t\t\t\tpresetController.getSelectedPreset(),\n\t\t\t\t\t\t\t\t\tpresetController.getMode() === 'personal',\n\t\t\t\t\t\t\t\t\tAnalyticActions.CLOSE,\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tpostponeHandler(presetController.getMode());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcloseEventWasProcessed = false;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\n\t\t\treturn presetController;\n\t\t});\n\t}\n\t// endregion\n\n\tbindEvents(): void\n\t{\n\t\t// All Counters from IM\n\t\tEventEmitter.subscribe('onImUpdateCounter', (event: BaseEvent) => {\n\t\t\tconst [counters] = event.getCompatData();\n\t\t\tthis.updateCounters(counters, false);\n\t\t});\n\n\t\t// Messenger counter\n\t\tEventEmitter.subscribe('onImUpdateCounterMessage', (event: BaseEvent) => {\n\t\t\tconst [counter] = event.getCompatData();\n\t\t\tthis.updateCounters({ 'im-message': counter }, false);\n\t\t});\n\n\t\t// Live Feed Counter\n\t\tEventEmitter.subscribe('onCounterDecrement', (event: BaseEvent) => {\n\t\t\tconst [decrement] = event.getCompatData();\n\t\t\tthis.decrementCounter(document.getElementById('menu-counter-live-feed'), decrement);\n\t\t});\n\n\t\t// All Counters\n\t\tEventEmitter.subscribe('onPullEvent-main', (event: BaseEvent) => {\n\t\t\tconst [command, params] = event.getCompatData();\n\t\t\tif (command === 'user_counter' && params[Loc.getMessage('SITE_ID')])\n\t\t\t{\n\t\t\t\tconst counters = { ...params[Loc.getMessage('SITE_ID')] };\n\t\t\t\tthis.updateCounters(counters, false);\n\t\t\t}\n\t\t});\n\n\t\t// just to hold opened menu in collapsing mode when groups are shown\n\t\tBX.addCustomEvent(\"BX.Bitrix24.GroupPanel:onOpen\", this.handleGroupPanelOpen.bind(this));\n\t\tBX.addCustomEvent(\"BX.Bitrix24.GroupPanel:onClose\", this.handleGroupPanelClose.bind(this));\n\n\t\t// region Top menu integration\n\t\tBX.addCustomEvent('BX.Main.InterfaceButtons:onFirstItemChange', (firstPageLink, firstNode) => {\n\t\t\tif (!firstPageLink || !Type.isDomNode(firstNode))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst topMenuId = firstNode.getAttribute('data-top-menu-id');\n\t\t\tconst leftMenuNode = this.menuBody.querySelector(`[data-top-menu-id=\"${topMenuId}\"]`);\n\t\t\tif (leftMenuNode)\n\t\t\t{\n\t\t\t\tleftMenuNode.setAttribute('data-link', firstPageLink);\n\t\t\t\tconst leftMenuLink = leftMenuNode.querySelector('a.menu-item-link');\n\t\t\t\tif (leftMenuLink)\n\t\t\t\t{\n\t\t\t\t\tleftMenuLink.setAttribute('href', firstPageLink);\n\t\t\t\t}\n\n\t\t\t\tif (leftMenuNode.previousElementSibling === this.menuContainer.querySelector('#left-menu-empty-item'))\n\t\t\t\t{\n\t\t\t\t\tBackend.setFirstPage(firstPageLink);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBackend.clearCache();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.showMessage(firstNode, Loc.getMessage('MENU_ITEM_MAIN_SECTION_PAGE'));\n\t\t});\n\n\t\tBX.addCustomEvent('BX.Main.InterfaceButtons:onHideLastVisibleItem', (bindElement) => {\n\t\t\tthis.showMessage(bindElement, Loc.getMessage('MENU_TOP_ITEM_LAST_HIDDEN'));\n\t\t});\n\n\t\t// when we edit top menu item\n\t\tBX.addCustomEvent('BX.Main.InterfaceButtons:onBeforeCreateEditMenu', (contextMenu, dataItem, topMenu) => {\n\t\t\tlet item = this.#getLeftMenuItemByTopMenuItem(dataItem);\n\t\t\tif (!item && dataItem && Type.isStringFilled(dataItem.URL) && !dataItem.URL.match(/javascript:/))\n\t\t\t{\n\t\t\t\tcontextMenu.addMenuItem({\n\t\t\t\t\ttext: Loc.getMessage('MENU_ADD_TO_LEFT_MENU'),\n\t\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\t\tthis.getItemDirector()\n\t\t\t\t\t\t\t.saveStandardPage(dataItem)\n\t\t\t\t\t\t;\n\t\t\t\t\t\titem.getMenuWindow().close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (item instanceof ItemUserFavorites)\n\t\t\t{\n\t\t\t\tcontextMenu.addMenuItem({\n\t\t\t\t\ttext: Loc.getMessage('MENU_DELETE_FROM_LEFT_MENU'),\n\t\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\t\tthis.getItemDirector().deleteStandardPage(dataItem);\n\t\t\t\t\t\titem.getMenuWindow().close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t// endregion\n\n\t\t// service event for UI.Toolbar\n\t\ttop.BX.addCustomEvent('UI.Toolbar:onRequestMenuItemData', ({ currentFullPath, context }) => {\n\t\t\tif (Type.isStringFilled(currentFullPath))\n\t\t\t{\n\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onSendMenuItemData', [{\n\t\t\t\t\tcurrentPageInMenu: this.menuContainer.querySelector(`.menu-item-block[data-link=\"${currentFullPath}\"]`),\n\t\t\t\t\tcontext,\n\t\t\t\t}]);\n\t\t\t}\n\t\t});\n\n\t\t// When clicked on a start Favorites like\n\t\tEventEmitter.subscribe('UI.Toolbar:onStarClick', ({compatData: [params]}) => {\n\t\t\tif (params.isActive)\n\t\t\t{\n\t\t\t\tthis.getItemDirector().deleteCurrentPage({\n\t\t\t\t\tcontext: params.context,\n\t\t\t\t\tpageLink: params.pageLink,\n\t\t\t\t}).then(({itemInfo}) => {\n\t\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onMenuItemDeleted', [itemInfo, this]);\n\t\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess', [{\n\t\t\t\t\t\tisActive: false,\n\t\t\t\t\t\tcontext: params.context,\n\t\t\t\t\t}]);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getItemDirector()\n\t\t\t\t\t.saveCurrentPage({\n\t\t\t\t\t\tpageTitle: params.pageTitle,\n\t\t\t\t\t\tpageLink: params.pageLink,\n\t\t\t\t\t}).then(({itemInfo}) => {\n\t\t\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onMenuItemAdded', [itemInfo, this]);\n\t\t\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess', [{\n\t\t\t\t\t\t\tisActive: true,\n\t\t\t\t\t\t\tcontext: params.context,\n\t\t\t\t\t\t}]);\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Main.InterfaceButtons:onBeforeResetMenu', ({compatData: [promises]}) => {\n\t\t\tpromises.push(() => {\n\t\t\t\tconst p = new BX.Promise();\n\t\t\t\tBackend\n\t\t\t\t\t.clearCache()\n\t\t\t\t\t.then(\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tp.fulfill();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(response) => {\n\t\t\t\t\t\t\tp.reject(`Error: ${response.errors[0].message}`);\n\t\t\t\t\t\t},\n\t\t\t\t\t)\n\t\t\t\t;\n\n\t\t\t\treturn p;\n\t\t\t});\n\t\t});\n\t}\n\n\tisEditMode(): boolean\n\t{\n\t\treturn this.getItemsController().isEditMode;\n\t}\n\n\tisCollapsed(): boolean\n\t{\n\t\treturn this.isCollapsedMode;\n\t}\n\n\tshowMessage(bindElement, message, position)\n\t{\n\t\tvar popup = PopupManager.create(\n\t\t\t\"left-menu-message\",\n\t\t\tbindElement,\n\t\t\t{\n\t\t\t\tcontent: '<div class=\"left-menu-message-popup\">' + message + '</div>',\n\t\t\t\tdarkMode: true,\n\t\t\t\toffsetTop: position === \"right\" ? -45 : 2,\n\t\t\t\toffsetLeft: position === \"right\" ? 215 : 0,\n\t\t\t\tangle: position === \"right\" ? {position: \"left\"} : true,\n\t\t\t\tcacheable: false,\n\t\t\t\tautoHide: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonDestroy: function () {\n\t\t\t\t\t\tpopup = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t;\n\n\t\tpopup.show();\n\n\t\tsetTimeout(function ()\n\t\t{\n\t\t\tif (popup)\n\t\t\t{\n\t\t\t\tpopup.close();\n\t\t\t\tpopup = null;\n\t\t\t}\n\t\t}, 3000);\n\t}\n\n\tshowError(bindElement)\n\t{\n\t\tthis.showMessage(bindElement, Loc.getMessage('edit_error'));\n\t}\n\n\tshowGlobalPreset()\n\t{\n\t\tconst loadBannerDispatcherExtensionPromise = Runtime.loadExtension('ui.banner-dispatcher');\n\n\t\tloadBannerDispatcherExtensionPromise.then(() => {\n\t\t\tBannerDispatcher.high.toQueue((onDone) => {\n\t\t\t\tconst presetController = this.getDefaultPresetController();\n\t\t\t\tpresetController.show('global');\n\t\t\t\tpresetController.getPopup().subscribe('onAfterClose', (event) => {\n\t\t\t\t\tonDone();\n\t\t\t\t});\n\t\t\t});\n\t\t}).catch(() => {});\n\t}\n\n\thandleShowHiddenClick()\n\t{\n\t\tthis.getItemsController().toggleHiddenContainer(true);\n\t}\n\n\tonHiddenBlockIsVisible()\n\t{\n\t\tDom.addClass(this.menuMoreButton, 'menu-favorites-more-btn-open');\n\t\tthis.menuMoreButton.querySelector(\"#menu-more-btn-text\").innerHTML = Loc.getMessage(\"more_items_hide\");\n\t}\n\n\tonHiddenBlockIsHidden()\n\t{\n\t\tDom.removeClass(this.menuMoreButton, 'menu-favorites-more-btn-open');\n\t\tthis.menuMoreButton.querySelector(\"#menu-more-btn-text\").innerHTML = Loc.getMessage(\"more_items_show\");\n\t}\n\n\tonHiddenBlockIsEmpty()\n\t{\n\t\tDom.addClass(this.menuMoreButton, 'menu-favorites-more-btn-hidden');\n\t}\n\n\tonHiddenBlockIsNotEmpty()\n\t{\n\t\tDom.removeClass(this.menuMoreButton, 'menu-favorites-more-btn-hidden');\n\t}\n\n\tsetDefaultMenu()\n\t{\n\t\tMessageBox.show({\n\t\t\tmessage: Loc.getMessage('MENU_SET_DEFAULT_CONFIRM'),\n\t\t\tonYes: (messageBox, button) => {\n\t\t\t\tbutton.setWaiting();\n\t\t\t\tBackend\n\t\t\t\t\t.setDefaultPreset()\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tbutton.setWaiting(false);\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t},\n\t\t\tbuttons: MessageBoxButtons.YES_CANCEL\n\t\t});\n\t}\n\n\tclearCompositeCache()\n\t{\n\t\tajax.runAction('intranet.leftmenu.clearCache', {data: {}});\n\t}\n\n\t#getLeftMenuItemByTopMenuItem({DATA_ID, NODE}): ?Item\n\t{\n\t\tlet item = this.getItemsController().items.get(DATA_ID);\n\t\tif (!item)\n\t\t{\n\t\t\tconst topMenuId = NODE.getAttribute('data-top-menu-id');\n\t\t\tif (NODE === NODE.parentNode.querySelector('[data-top-menu-id]'))\n\t\t\t{\n\t\t\t\tconst leftMenuNode = this.menuItemsBlock.querySelector(`[data-top-menu-id=\"${topMenuId}\"]`);\n\t\t\t\tif (leftMenuNode)\n\t\t\t\t{\n\t\t\t\t\titem = this.getItemsController().items.get(leftMenuNode.getAttribute('data-id'));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn item ?? null;\n\t}\n\t// region Events servicing functions\n\tonGettingSettingMenuItems()\n\t{\n\t\tconst topPoint = ItemUserFavorites.getActiveTopMenuItem();\n\t\tlet menuItemWithAddingToFavorites = null;\n\t\tif (topPoint)\n\t\t{\n\t\t\tconst node = this.menuContainer.querySelector(`.menu-item-block[data-link=\"${topPoint['URL']}\"]`);\n\t\t\tif (!node)\n\t\t\t{\n\t\t\t\tmenuItemWithAddingToFavorites = {\n\t\t\t\t\ttext: Loc.getMessage(\"MENU_ADD_TO_LEFT_MENU\"),\n\t\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\t\tthis.getItemDirector()\n\t\t\t\t\t\t\t.saveStandardPage(topPoint)\n\t\t\t\t\t\t;\n\t\t\t\t\t\titem.getMenuWindow().destroy();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\telse if (node.getAttribute('data-type') === ItemUserFavorites.code)\n\t\t\t{\n\t\t\t\tmenuItemWithAddingToFavorites = {\n\t\t\t\t\ttext: Loc.getMessage(\"MENU_DELETE_FROM_LEFT_MENU\"),\n\t\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\t\tthis.getItemDirector()\n\t\t\t\t\t\t\t.deleteStandardPage(topPoint)\n\t\t\t\t\t\t;\n\t\t\t\t\t\titem.getMenuWindow().destroy();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmenuItemWithAddingToFavorites = {\n\t\t\t\t\ttext: Loc.getMessage('MENU_DELETE_PAGE_FROM_LEFT_MENU'),\n\t\t\t\t\tclassName: 'menu-popup-disable-text',\n\t\t\t\t\tonclick: () => { }\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tconst leftMenuSettingItems = [\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('SORT_ITEMS'),\n\t\t\t\tonclick: () => { this.getItemsController().switchToEditMode();}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: this.isCollapsed() ? Loc.getMessage('MENU_EXPAND') : Loc.getMessage('MENU_COLLAPSE'),\n\t\t\t\tonclick: (event, item: MenuItem) => {\n\t\t\t\t\tthis.toggle();\n\t\t\t\t\titem.getMenuWindow().destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t\tmenuItemWithAddingToFavorites,\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('MENU_ADD_SELF_PAGE'),\n\t\t\t\tonclick: (event, item: MenuItem) => {\n\t\t\t\t\tthis\n\t\t\t\t\t\t.getItemDirector()\n\t\t\t\t\t\t.showAddToSelf(\n\t\t\t\t\t\t\tthis.getSettingsController().getContainer()\n\t\t\t\t\t\t)\n\t\t\t\t\t;\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\t//custom preset\n\t\tif (Options.isAdmin)\n\t\t{\n\t\t\tlet itemText = Loc.getMessage('MENU_SAVE_CUSTOM_PRESET');\n\n\t\t\tif (Options.isCustomPresetRestricted)\n\t\t\t{\n\t\t\t\titemText+= \"<span class='menu-lock-icon'></span>\";\n\t\t\t}\n\n\t\t\tleftMenuSettingItems.push({\n\t\t\t\thtml: itemText,\n\t\t\t\tclassName: (Options.isCustomPresetRestricted ? ' menu-popup-disable-text' : ''),\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\tif (Options.isCustomPresetRestricted)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.InfoHelper.show('limit_office_menu_to_all');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getCustomPresetController().show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (!Options.isExtranet)\n\t\t{\n\t\t\tleftMenuSettingItems.push({\n\t\t\t\ttext: Loc.getMessage('MENU_SET_DEFAULT'),\n\t\t\t\tonclick: this.setDefaultMenu.bind(this)\n\t\t\t})\n\t\t}\n\n\t\tconst Messenger = Reflection.getClass('BX.Messenger.v2.Lib.Messenger');\n\n\t\tconst menuItems = [\n\t\t\t!Options.isAdmin ? null : {\n\t\t\t\ttext: Loc.getMessage('LEFT_MENU_SETTINGS_ITEM_B24_SETTINGS'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tBX.SidePanel.Instance.open(`${Options.settingsPath}?analyticContext=left_menu`, {\n\t\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\t\twidth: 1034,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t\tMessenger ? {\n\t\t\t\ttext: Loc.getMessage('LEFT_MENU_SETTINGS_ITEM_MESSENGER_SETTINGS'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tMessenger.openSettings();\n\t\t\t\t},\n\t\t\t} : null,\n\t\t\tOptions.isExtranet ? null : {\n\t\t\t\ttext: Loc.getMessage('MENU_SET_DEFAULT2'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.getDefaultPresetController().show('personal');\n\t\t\t\t},\n\t\t\t},\n\t\t\t!Options.inviteDialogLink ? null : {\n\t\t\t\ttext: Loc.getMessage('MENU_INVITE_USERS'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tBX.SidePanel.Instance.open(Options.inviteDialogLink, {cacheable: false, allowChangeHistory: false, width: 1100});\n\t\t\t\t},\n\t\t\t},\n\t\t\t!Options.isAdmin && Options.isExtranet ? null : {\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('LEFT_MENU_SETTINGS_ITEM_MENU_SETTINGS'),\n\t\t\t\titems: leftMenuSettingItems,\n\t\t\t},\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\t!Options.showSitemapMenuItem ? null : {\n\t\t\t\ttext: Loc.getMessage('MENU_SITE_MAP'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.handleSiteMapClick();\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('MENU_HELP'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.handleHelperClick();\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\treturn menuItems.filter((value) => {return value !== null;})\n\t}\n\n\t// endregion\n\n\thandleSiteMapClick()\n\t{\n\t\tthis.switchToSlidingMode(false);\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\t(Loc.getMessage('SITE_DIR') || '/') + 'sitemap/',\n\t\t\t{\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\tcustomLeftBoundary: 0\n\t\t\t}\n\t\t);\n\t}\n\n\thandleHelperClick()\n\t{\n\t\tthis.switchToSlidingMode(false);\n\t\tBX.Helper.show();\n\t}\n\n\t// region Sliding functions\n\tblockSliding()\n\t{\n\t\tthis.stopSliding()\n\t\tthis.isMenuMouseEnterBlocked = true;\n\t}\n\n\treleaseSliding()\n\t{\n\t\tthis.isMenuMouseEnterBlocked = false;\n\t}\n\n\tstopSliding()\n\t{\n\t\tclearTimeout(this.slidingModeTimeoutId);\n\t\tthis.slidingModeTimeoutId = 0;\n\t}\n\n\tstartSliding()\n\t{\n\t\tthis.stopSliding();\n\t\tif (this.isMenuMouseEnterBlocked === true)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.slidingModeTimeoutId = setTimeout(function() {\n\t\t\tthis.slidingModeTimeoutId = 0;\n\t\t\tthis.switchToSlidingMode(true);\n\t\t}.bind(this), 400);\n\t}\n\n\thandleBurgerClick(open)\n\t{\n\t\tthis.getItemsController().switchToViewMode();\n\n\t\tthis.menuHeaderBurger.classList.add(\"menu-switcher-hover\");\n\n\t\tthis.toggle(open, function() {\n\n\t\t\tthis.blockSliding();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tthis.menuHeaderBurger.classList.remove(\"menu-switcher-hover\");\n\n\t\t\t\tthis.releaseSliding();\n\n\t\t\t}.bind(this), 100);\n\n\t\t}.bind(this));\n\t}\n\n\thandleMenuMouseEnter(event)\n\t{\n\t\tif (!this.isCollapsed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.startSliding();\n\t}\n\n\thandleMenuMouseLeave(event)\n\t{\n\t\tthis.stopSliding();\n\t\tif (this.isMenuMouseLeaveBlocked.length <= 0)\n\t\t{\n\t\t\tthis.switchToSlidingMode(false);\n\t\t}\n\t}\n\n\thandleMenuDoubleClick(event)\n\t{\n\t\tif (event.target === this.menuBody)\n\t\t{\n\t\t\tthis.toggle();\n\t\t}\n\t}\n\n\thandleUpButtonClick()\n\t{\n\t\tthis.blockSliding();\n\n\t\tif (this.isUpButtonReversed())\n\t\t{\n\t\t\twindow.scrollTo(0, this.lastScrollOffset);\n\t\t\tthis.lastScrollOffset = 0;\n\t\t\tthis.unreverseUpButton();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.lastScrollOffset = window.pageYOffset;\n\t\t\twindow.scrollTo(0, 0);\n\t\t\tthis.reverseUpButton();\n\t\t}\n\n\t\tsetTimeout(this.releaseSliding.bind(this), 100);\n\t}\n\n\thandleUpButtonMouseLeave()\n\t{\n\t\tthis.releaseSliding();\n\t}\n\n\thandleDocumentScroll()\n\t{\n\t\tif (window.pageYOffset > document.documentElement.clientHeight)\n\t\t{\n\t\t\tthis.showUpButton();\n\n\t\t\tif (this.isUpButtonReversed())\n\t\t\t{\n\t\t\t\tthis.unreverseUpButton();\n\t\t\t\tthis.lastScrollOffset = 0;\n\t\t\t}\n\t\t}\n\t\telse if (!this.isUpButtonReversed())\n\t\t{\n\t\t\tthis.hideUpButton();\n\t\t}\n\n\t\tif (window.pageXOffset > 0)\n\t\t{\n\t\t\tthis.menuContainer.style.left = -window.pageXOffset + \"px\";\n\t\t\tthis.upButton.style.left = -window.pageXOffset + (this.isCollapsed() ? 0 : 172) + \"px\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.menuContainer.style.removeProperty(\"left\");\n\t\t\tthis.upButton.style.removeProperty(\"left\");\n\t\t}\n\t}\n\n\tswitchToSlidingMode(enable, immediately)\n\t{\n\t\tif (enable === false)\n\t\t{\n\t\t\tthis.stopSliding();\n\n\t\t\tif (BX.hasClass(this.mainTable, \"menu-sliding-mode\"))\n\t\t\t{\n\t\t\t\tif (immediately !== true)\n\t\t\t\t{\n\t\t\t\t\tBX.addClass(this.mainTable, \"menu-sliding-closing-mode\");\n\n\t\t\t\t\tif (Options.showLicenseButton)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#getLicenseButton().setCollapsed(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tBX.removeClass(this.mainTable, \"menu-sliding-mode menu-sliding-opening-mode\");\n\t\t\t\tDom.removeClass(this.menuContainer, '--ui-context-edge-dark');\n\t\t\t}\n\t\t}\n\t\telse if (this.isCollapsedMode && !BX.hasClass(this.mainTable, \"menu-sliding-mode\"))\n\t\t{\n\t\t\tBX.removeClass(this.mainTable, \"menu-sliding-closing-mode\");\n\t\t\tDom.removeClass(this.menuContainer, '--ui-context-edge-dark');\n\n\t\t\tif (immediately !== true)\n\t\t\t{\n\t\t\t\tBX.addClass(this.mainTable, \"menu-sliding-opening-mode\");\n\t\t\t\tif (Options.showLicenseButton)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.#getLicenseButton().setCollapsed(false);\n\t\t\t\t\t}, 50);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBX.addClass(this.mainTable, \"menu-sliding-mode\");\n\t\t\tDom.addClass(this.menuContainer, '--ui-context-edge-dark');\n\t\t}\n\t}\n\n\thandleSlidingTransitionEnd(event)\n\t{\n\t\tif (event.target === this.menuContainer)\n\t\t{\n\t\t\tBX.removeClass(this.mainTable, \"menu-sliding-opening-mode menu-sliding-closing-mode\");\n\t\t}\n\t}\n\n\tswitchToScrollMode(enable)\n\t{\n\t\tif (enable === false)\n\t\t{\n\t\t\tDom.removeClass(this.mainTable, 'menu-scroll-mode');\n\t\t}\n\t\telse if (!Dom.hasClass(this.mainTable, 'menu-scroll-mode'))\n\t\t{\n\t\t\tDom.addClass(this.mainTable, 'menu-scroll-mode');\n\t\t}\n\t}\n\n\ttoggle(flag, fn)\n\t{\n\t\tlet leftColumn = document.querySelector(\".js-app\");\n\t\tif (!leftColumn)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst isOpen = !this.mainTable.classList.contains('menu-collapsed-mode');\n\n\t\tif (flag === isOpen || this.mainTable.classList.contains('menu-animation-mode'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuToggle\", [flag, this]);\n\n\t\tthis.blockSliding();\n\t\tthis.switchToSlidingMode(false, true);\n\n\t\t// leftColumn.style.overflow = \"hidden\";\n\t\tthis.mainTable.classList.add(\"menu-animation-mode\", (isOpen ? \"menu-animation-closing-mode\" : \"menu-animation-opening-mode\"));\n\n\t\tvar menuLinks = [].slice.call(leftColumn.querySelectorAll('.menu-item-link'));\n\t\tvar menuMoreBtn = leftColumn.querySelector('.menu-collapsed-more-btn');\n\t\tvar menuMoreBtnDefault = leftColumn.querySelector('.menu-default-more-btn');\n\n\t\tvar menuSitemapIcon = leftColumn.querySelector('.menu-sitemap-icon-box');\n\t\tvar menuSitemapText = leftColumn.querySelector('.menu-sitemap-btn-text');\n\n\t\tvar menuEmployeesText = leftColumn.querySelector('.menu-invite-employees-text');\n\t\tvar menuEmployeesIcon = leftColumn.querySelector('.menu-invite-icon-box');\n\n\t\tconst settingsIconBox = this.menuContainer.querySelector(\".menu-settings-icon-box\");\n\t\tconst settingsBtnText = this.menuContainer.querySelector(\".menu-settings-btn-text\");\n\n\t\tconst helpIconBox = this.menuContainer.querySelector(\".menu-help-icon-box\");\n\t\tconst helpBtnText = this.menuContainer.querySelector(\".menu-help-btn-text\");\n\n\t\tvar menuTextDivider = leftColumn.querySelector('.menu-item-separator');\n\t\tvar menuMoreCounter = leftColumn.querySelector('.menu-item-index-more');\n\n\t\tvar pageHeader = this.mainTable.querySelector(\".air-header\");\n\t\tvar imBar = document.getElementById(\"bx-im-bar\");\n\t\tvar imBarWidth = imBar ? imBar.offsetWidth : 0;\n\n\t\tconst expandedMenuWidth = parseInt(getComputedStyle(this.menuContainer).getPropertyValue('--menu-width-expanded'), 10);\n\t\tconst collapsedMenuWidth = parseInt(getComputedStyle(this.menuContainer).getPropertyValue('--menu-width-collapsed'), 10);\n\n\t\t(new BX.easing({\n\t\t\tduration: 300,\n\t\t\tstart: {\n\t\t\t\tsidebarWidth: isOpen ? expandedMenuWidth : collapsedMenuWidth, /* these values are duplicated in style.css as well */\n\t\t\t\t// opacity: isOpen ? 100 : 0,\n\t\t\t\t// opacityRevert: isOpen ? 0 : 100\n\t\t\t},\n\t\t\tfinish: {\n\t\t\t\tsidebarWidth: isOpen ? collapsedMenuWidth : expandedMenuWidth,\n\t\t\t\t// opacity: isOpen ? 0 : 100,\n\t\t\t\t// opacityRevert: isOpen ? 100 : 0\n\t\t\t},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: function (state)\n\t\t\t{\n\t\t\t\t// leftColumn.style.width = state.sidebarWidth + \"px\";\n\t\t\t\tthis.menuContainer.style.width = state.sidebarWidth + \"px\";\n\t\t\t\tthis.menuHeaderBurger.style.width = state.burgerMenuWidth + \"px\";\n\t\t\t\t// this.headerBurger.style.width = state.burgerMenuWidth + \"px\";\n\n\t\t\t\t//Change this formula in template_style.css as well\n\t\t\t\tif (pageHeader)\n\t\t\t\t{\n\t\t\t\t\tpageHeader.style.maxWidth = \"calc(100vw - \" + state.sidebarWidth + \"px - \" + imBarWidth + \"px)\";\n\t\t\t\t}\n\n\t\t\t\tif (Options.showLicenseButton && state.sidebarWidth > 160)\n\t\t\t\t{\n\t\t\t\t\tthis.#getLicenseButton().setCollapsed(isOpen);\n\t\t\t\t}\n\n\t\t\t\tif (isOpen)\n\t\t\t\t{\n\t\t\t\t\t//Closing Mode\n\t\t\t\t\tif (menuSitemapIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuSitemapIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuSitemapText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuSitemapText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuEmployeesIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuEmployeesText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (settingsIconBox)\n\t\t\t\t\t{\n\t\t\t\t\t\tsettingsIconBox.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tsettingsIconBox.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (settingsBtnText)\n\t\t\t\t\t{\n\t\t\t\t\t\tsettingsBtnText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tsettingsBtnText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (helpIconBox)\n\t\t\t\t\t{\n\t\t\t\t\t\thelpIconBox.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\thelpIconBox.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (helpBtnText)\n\t\t\t\t\t{\n\t\t\t\t\t\thelpBtnText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\thelpBtnText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuMoreBtn)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuMoreBtn.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuMoreBtn.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuMoreBtnDefault)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuMoreBtnDefault.style.transform = \"translateX(\" + state.translateMoreBtn + \"px)\";\n\t\t\t\t\t\tmenuMoreBtnDefault.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuMoreCounter)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuMoreCounter.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuMoreCounter.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tmenuLinks.forEach(function(item) {\n\t\t\t\t\t\tvar menuIcon = item.querySelector(\".menu-item-icon-box\");\n\t\t\t\t\t\tvar menuLinkText = item.querySelector(\".menu-item-link-text\");\n\t\t\t\t\t\tvar menuCounter = item.querySelector(\".menu-item-index\");\n\t\t\t\t\t\tvar menuArrow = item.querySelector('.menu-item-link-arrow');\n\n\t\t\t\t\t\tmenuLinkText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuLinkText.style.opacity = state.opacity / 100;\n\n\t\t\t\t\t\tmenuIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuIcon.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\t\tif (menuArrow)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenuArrow.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\t\tmenuArrow.style.opacity = state.opacity / 100;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (menuCounter)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenuCounter.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\t\tmenuCounter.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t//Opening Mode\n\t\t\t\t\tmenuTextDivider.style.opacity = 0;\n\n\t\t\t\t\tif (menuSitemapIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuSitemapIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuSitemapText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuSitemapText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuEmployeesIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuEmployeesText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (settingsIconBox)\n\t\t\t\t\t{\n\t\t\t\t\t\tsettingsIconBox.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tsettingsIconBox.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (settingsBtnText)\n\t\t\t\t\t{\n\t\t\t\t\t\tsettingsBtnText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tsettingsBtnText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (helpIconBox)\n\t\t\t\t\t{\n\t\t\t\t\t\thelpIconBox.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\thelpIconBox.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (helpBtnText)\n\t\t\t\t\t{\n\t\t\t\t\t\thelpBtnText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\thelpBtnText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuMoreBtn)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuMoreBtn.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuMoreBtn.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuMoreBtnDefault)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuMoreBtnDefault.style.transform = \"translateX(\" + state.translateMoreBtn + \"px)\";\n\t\t\t\t\t\tmenuMoreBtnDefault.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuMoreCounter)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuMoreCounter.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t}\n\n\t\t\t\t\tmenuLinks.forEach(function(item) {\n\t\t\t\t\t\tvar menuIcon = item.querySelector(\".menu-item-icon-box\");\n\t\t\t\t\t\tvar menuLinkText = item.querySelector(\".menu-item-link-text\");\n\t\t\t\t\t\tvar menuCounter = item.querySelector(\".menu-item-index\");\n\t\t\t\t\t\tvar menuArrow = item.querySelector('.menu-item-link-arrow');\n\n\t\t\t\t\t\tmenuLinkText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuLinkText.style.opacity = state.opacity / 100;\n\t\t\t\t\t\tmenuLinkText.style.display = \"inline-block\";\n\n\t\t\t\t\t\tmenuIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuIcon.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\t\tif (menuArrow)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenuArrow.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\t\t// menuArrow.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (menuCounter)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenuCounter.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\t\tevent.initEvent(\"resize\", true, true);\n\t\t\t\twindow.dispatchEvent(event);\n\n\t\t\t}.bind(this),\n\t\t\tcomplete: function ()\n\t\t\t{\n\t\t\t\tif (isOpen)\n\t\t\t\t{\n\t\t\t\t\tthis.isCollapsedMode = true;\n\t\t\t\t\tBX.addClass(this.mainTable, \"menu-collapsed-mode\");\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.isCollapsedMode = false;\n\t\t\t\t\tBX.removeClass(this.mainTable, \"menu-collapsed-mode\");\n\t\t\t\t}\n\n\t\t\t\tBX.removeClass(\n\t\t\t\t\tthis.mainTable,\n\t\t\t\t\t\"menu-animation-mode menu-animation-opening-mode menu-animation-closing-mode\"\n\t\t\t\t);\n\n\t\t\t\tvar containers = [\n\t\t\t\t\tleftColumn,\n\t\t\t\t\tmenuTextDivider,\n\t\t\t\t\tthis.menuHeaderBurger,\n\t\t\t\t\tthis.headerBurger,\n\t\t\t\t\tsettingsIconBox,\n\t\t\t\t\tsettingsBtnText,\n\t\t\t\t\thelpIconBox,\n\t\t\t\t\thelpBtnText,\n\t\t\t\t\tmenuMoreBtnDefault,\n\t\t\t\t\tmenuMoreBtn,\n\t\t\t\t\tmenuSitemapIcon,\n\t\t\t\t\tmenuSitemapText,\n\t\t\t\t\tmenuEmployeesIcon,\n\t\t\t\t\tmenuEmployeesText,\n\t\t\t\t\tmenuMoreCounter,\n\t\t\t\t\tthis.menuContainer,\n\t\t\t\t\tpageHeader,\n\t\t\t\t];\n\n\t\t\t\tcontainers.forEach(function(container) {\n\t\t\t\t\tif (container)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontainer.style.cssText = \"\";\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmenuLinks.forEach(function(item) {\n\t\t\t\t\tvar menuIcon = item.querySelector(\".menu-item-icon-box\");\n\t\t\t\t\tvar menuLinkText = item.querySelector(\".menu-item-link-text\");\n\t\t\t\t\tvar menuCounter = item.querySelector(\".menu-item-index\");\n\t\t\t\t\tvar menuArrow = item.querySelector('.menu-item-link-arrow');\n\n\t\t\t\t\titem.style.cssText = \"\";\n\t\t\t\t\tmenuLinkText.style.cssText = \"\";\n\t\t\t\t\tmenuIcon.style.cssText = \"\";\n\n\t\t\t\t\tif (menuArrow)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuArrow.style.cssText = \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuCounter)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuCounter.style.cssText = \"\";\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.releaseSliding();\n\n\t\t\t\tif (BX.type.isFunction(fn))\n\t\t\t\t{\n\t\t\t\t\tfn();\n\t\t\t\t}\n\n\t\t\t\tBackend.toggleMenu(isOpen);\n\n\t\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\t\tevent.initEvent(\"resize\", true, true);\n\t\t\t\twindow.dispatchEvent(event);\n\n\t\t\t}.bind(this)\n\t\t})).animate();\n\t}\n\t//endregion\n\n\thandleViewMode()\n\t{\n\t\tthis.getItemsController().switchToViewMode();\n\t}\n\n\thandleGroupPanelOpen()\n\t{\n\t\tthis.isMenuMouseLeaveBlocked.push('group');\n\t}\n\n\thandleGroupPanelClose()\n\t{\n\t\tthis.isMenuMouseLeaveBlocked.pop();\n\t}\n\n\tshowUpButton()\n\t{\n\t\tthis.menuContainer.classList.add(\"menu-up-button-active\");\n\t}\n\n\thideUpButton()\n\t{\n\t\tthis.menuContainer.classList.remove(\"menu-up-button-active\");\n\t}\n\n\treverseUpButton()\n\t{\n\t\tthis.menuContainer.classList.add(\"menu-up-button-reverse\");\n\t}\n\n\tunreverseUpButton()\n\t{\n\t\tthis.menuContainer.classList.remove(\"menu-up-button-reverse\");\n\t}\n\n\tisUpButtonReversed()\n\t{\n\t\treturn this.menuContainer.classList.contains(\"menu-up-button-reverse\");\n\t}\n\n\tisDefaultTheme()\n\t{\n\t\treturn document.body.classList.contains(\"bitrix24-default-theme\");\n\t}\n\n\tgetTopPadding()\n\t{\n\t\treturn this.isDefaultTheme() ? 0 : 9;\n\t}\n\n\t// region Public functions\n\tinitPagetitleStar(): boolean\n\t{\n\t\treturn ItemUserFavorites.isCurrentPageStandard(\n\t\t\tItemUserFavorites.getActiveTopMenuItem()\n\t\t);\n\t}\n\n\tgetStructureForHelper()\n\t{\n\t\tconst items = {menu: {}};\n\t\t[\"show\", \"hide\"].forEach((state) => {\n\t\t\tArray.from(this.menuContainer\n\t\t\t\t.querySelectorAll(`[data-status=\"${state}\"][data-type=\"${ItemSystem.code}\"]`)\n\t\t\t)\n\t\t\t.forEach((node) => {\n\t\t\t\titems[state] = items[state] || [];\n\t\t\t\titems[state].push(node.getAttribute(\"data-id\"))\n\t\t\t});\n\t\t});\n\t\treturn items;\n\t}\n\n\tshowItemWarning({itemId, title, events})\n\t{\n\t\tif (this.getItemsController().items.has(itemId))\n\t\t{\n\t\t\tthis.getItemsController().items.get(itemId).showWarning(title, events);\n\t\t}\n\t}\n\n\tremoveItemWarning(itemId)\n\t{\n\t\tif (this.getItemsController().items.has(itemId))\n\t\t{\n\t\t\tthis.getItemsController().items.get(itemId).removeWarning();\n\t\t}\n\t}\n\n\t#specialLiveFeedDecrement = 0;\n\tdecrementCounter(node, iDecrement)\n\t{\n\t\tif (!node || node.id !== 'menu-counter-live-feed')\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#specialLiveFeedDecrement += parseInt(iDecrement);\n\t\tthis.getItemsController().decrementCounter({\n\t\t\t'live-feed' : parseInt(iDecrement)\n\t\t});\n\t}\n\n\tupdateCounters(counters, send)\n\t{\n\t\tif (!counters)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (counters['**'] !== undefined)\n\t\t{\n\t\t\tcounters['live-feed'] = counters['**'];\n\t\t\tdelete counters['**'];\n\t\t}\n\n\t\tif (counters['live-feed'])\n\t\t{\n\t\t\tif (counters['live-feed'] <= 0)\n\t\t\t{\n\t\t\t\tthis.#specialLiveFeedDecrement = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcounters['live-feed'] -= this.#specialLiveFeedDecrement;\n\t\t\t}\n\t\t}\n\n\t\tthis.getItemsController().updateCounters(counters, send);\n\t}\n\t//endregion\n\n\t#addLicenseButton(): void\n\t{\n\t\tif (Options.showLicenseButton)\n\t\t{\n\t\t\tconst licenseButtonWrapper = this.menuContainer.querySelector('.menu-license-all-wrapper');\n\n\t\t\tif (licenseButtonWrapper)\n\t\t\t{\n\t\t\t\tthis.#getLicenseButton().renderTo(licenseButtonWrapper);\n\t\t\t}\n\t\t}\n\t}\n\n\t#getLicenseButton(): Button\n\t{\n\t\tif (this.licenseButton)\n\t\t{\n\t\t\treturn this.licenseButton;\n\t\t}\n\n\t\tthis.licenseButton = this.#createLicenseButton();\n\t\tthis.licenseButton.setCollapsed(this.isCollapsed());\n\n\t\treturn this.licenseButton;\n\t}\n\n\t#createLicenseButton(): Button\n\t{\n\t\treturn new Button({\n\t\t\tsize: Button.Size.SMALL,\n\t\t\ttext: Loc.getMessage('MENU_LICENSE_ALL'),\n\t\t\tuseAirDesign: true,\n\t\t\tstyle: AirButtonStyle.FILLED_SUCCESS,\n\t\t\tnoCaps: true,\n\t\t\twide: true,\n\t\t\ticon: 'o-rocket',\n\t\t\tclassName: 'menu-license-all-button',\n\t\t\tonclick: () => {\n\t\t\t\tBX.SidePanel.Instance.open(Options.licenseButtonPath, { width: 1250, cacheable: false });\n\t\t\t},\n\t\t});\n\t}\n}\n"],"names":["Options","eventName","name","Type","isStringFilled","join","version","eventNameSpace","isExtranet","isAdmin","isCustomPresetRestricted","settingsPath","isMainPageEnabled","availablePresetTools","inviteDialogLink","showMarta","showSitemapMenuItem","DefaultController","constructor","container","events","Array","from","Object","keys","forEach","key","EventEmitter","subscribe","getContainer","createPopup","getPopup","show","arguments","emit","hide","close","PresetCustomController","isReady","form","Tag","render","Loc","getMessage","PopupManager","create","overlay","contentColor","contentNoPaddings","lightShadow","draggable","restrict","closeByEsc","titleBar","offsetTop","offsetLeft","cacheable","closeIcon","content","buttons","SaveButton","onclick","button","setWaiting","elements","userScope","value","promise","then","catch","console","log","CancelButton","Utils","getCurPage","document","location","pathname","search","getCurUri","Uri","href","catchError","response","Runtime","loadExtension","notificationCenter","Reflection","getClass","notify","errors","message","position","category","autoHideDelay","refineUrl","originUrl","url","String","trim","test","link","createElement","host","hash","PresetDefaultController","mode","querySelector","cloneNode","toString","onFirstShow","querySelectorAll","node","addEventListener","otherNode","classList","CreateButton","text","isWaiting","currentPreset","getSelectedPreset","showUnavailableToolPopup","presetId","data","hasOwnProperty","reload","getMode","forms","checked","MessageBox","MessageBoxButtons","OK","SettingsController","menuId","menu","Menu","bindElement","targetContainer","items","getItems","angle","getPopupWindow","notHandledMenuItems","isArray","map","item","isPlainObject","html","className","delimiter","undefined","event","isArrayFilled","getMenuWindow","getParentMenuItem","Backend","toggleMenu","collapse","siteDir","context","window","startsWith","ajax","runAction","analyticsLabel","leftmenu","action","saveSelfItemMenu","itemData","id","deleteSelfITem","menuItemId","addFavoritesItemMenu","deleteFavoritesItemMenu","updateFavoritesItemMenu","itemText","itemId","addAdminSharedItemMenu","itemInfo","deleteAdminSharedItemMenu","menu_item_id","saveItemsSort","menuItems","firstItemLink","setFirstPage","firstPageLink","firstPageUrl","setDefaultPreset","setCustomPreset","forNewUsersOnly","itemsSort","customItems","userApply","deleteCustomItem","setSystemPreset","preset","analyticsFirst","postponeSystemPreset","clearCache","expandGroup","collapseGroup","Item","parentContainer","links","isDraggable","storage","init","onDeleteAsFavorites","bind","setTimeout","GLOBAL_TARGET","incrementMaxListeners","destroy","showError","showMessage","getId","dataset","getCode","code","getName","textContent","canDelete","delete","hasAttribute","getAttribute","push","split","makeTextIcons","update","openInNewPage","setAttribute","Text","encode","linkNode","isString","innerHTML","unsubscribe","decrementMaxListeners","getSimilarToUrl","currentUri","result","index","areUrlsEqual","priority","contains","icon","getShortName","getCounterValue","counter","Counter","initFromCounterNode","BaseClassname","getRealValue","updateCounter","counterValue","oldValue","parseInt","Dom","addClass","removeClass","newValue","markAsActive","error","showWarning","title","removeWarning","Event","add","appendChild","remove","parentNode","removeChild","showMessagePopup","darkMode","onClose","autoHide","TypeError","getDropDownActions","getEditFields","animate","filter","v","detect","createNode","counterId","topMenuId","size","Size","SMALL","style","Style","FILLED_ALERT","useAirDesign","backendSaveItem","showUpdate","Promise","resolve","reject","showForm","checkForm","length","focus","popup","isEditMode","indexOf","itemInfoToSave","checkedUri","checkedUrlBrief","getPath","replace","currentUrlBrief","getHost","shortName","words","substring","firstWord","secondWord","i","toUpperCase","ItemUserFavorites","BX","onCustomEvent","isActive","contextMenuItems","itemLinkNode","type","ItemAdminShared","getActiveTopMenuItem","Main","interfaceButtonsManager","firstTopMenuInstance","values","getObjects","shift","topMenuItem","getActive","path","ID","NODE","URL","TEXT","DATA_ID","COUNTER_ID","COUNTER","SUB_LINK","isCurrentPageStandard","topMenuPoint","currentFullPath","saveCurrentPage","pageTitle","pageLink","startX","startY","menuNodeCoord","getBoundingClientRect","left","top","isStandardItem","subLink","getElementById","innerText","titleCoord","animateFromPoint","deleteCurrentPage","topPoint","animateToPoint","saveStandardPage","pos","deleteStandardPage","ItemUserSelf","confirm","messageBox","showAdd","resolve1","reject2","deletePerm","codeToConvert","ItemAdminCustom","actions","ItemMainPage","openSettings","SidePanel","Instance","open","ItemSystem","ItemGroup","toggleAndSave","groupContainer","display","preventDefault","stopPropagation","expand","checkAndCorrect","insertAfter","hideGroupContainer","stop","overflow","slideParams","height","offsetHeight","easing","duration","start","opacity","finish","transition","makeEaseOut","transitions","quart","step","state","complete","checkAttribute","contentHeight","updateCounterNodeValue","markAsInactive","removeAttribute","ItemGroupSystem","itemMappings","getItem","itemClassName","itemClass","ItemActive","checkAndSet","theMostOfTheLinks","linkUri","changeActiveItem","uri","actualParams","getQueryParams","theMostOfTheLinkServiceData","params","matches","comparedLinkParams","unhighlight","highlight","checkAndUnset","parent","closest","ItemsController","Map","hiddenContainer","registerItem","toggleHiddenContainer","getActiveItem","set","parentItem","deleteItem","convertItem","openItemMenu","target","currentTarget","unregisterItem","has","unsubscribeAll","replaceChild","switchToEditMode","switchToViewMode","isHiddenContainerVisible","setItemAsAMainPage","startTop","dragElement","attrs","insertBeforeElement","nextElementSibling","insertBefore","nextSibling","showItem","oldParent","hideItem","emitEvent","updateCounters","counters","send","countersDynamic","entries","localStorage","hiddenCounterNode","Math","max","Number","BXIM","res","counterNode","visibleValue","DesktopApi","isDesktop","setBrowserIconBadge","itemGroup","decrementCounter","addItem","Element","styleValue","styleDisplay","get","updateItem","export","contextMenuItem","actionItem","call","targetPosition","getPosition","right","width","onShow","scrollHeight","opening","hiddenBlock","maxHeight","linear","hiddenCounterValue","hiddenMenuItemCounter","newParent","includes","saveSortItems","currentGroupId","chain","role","groupId","groupItem","pop","group_id","LINK","decode","NEW_PAGE","topMenuNode","body","finishY","paddingLeft","jsDD","Enable","onbxdragstart","onbxdrag","x","y","onbxdraghover","dest","onbxdragstop","registerObject","dnd","itemDomBlank","itemMoveBlank","draggableBlock","registerItems","registerDest","firstNode","unregisterDest","menuItemsBlockHeight","min","groupHolder","prepend","itemPlaceHolder","onHiddenBlockIsEmptyEmitted","e","enableDest","refreshDestArea","ItemDirector","page","topItem","showAddToSelf","Analytics","AnalyticUserRole","ADMIN","NOT_ADMIN","sendSetCustomPreset","sendData","tool","AnalyticTool","AnalyticCategory","MENU","AnalyticEvent","SET","c_section","AnalyticSection","p1","sendSetPreset","isPersonal","CHANGE","SELECT","TOOL","POPUP","c_element","sendClose","SHOW","PRESET","QUALIFICATION","SETTINGS","AnalyticActions","CONFIRM","LATER","CLOSE","SAVE","SKIP","GroupPanel","options","MemoryCache","groupsLink","isBoolean","isExtranetInstalled","remember","getFilterContainer","getItemsContainer","getCounterContainer","saveFilter","Ajax","contentCallback","exports","Layout","createContent","design","section","margin","abort","onrequeststart","xhr","groups","group","classes","extranet","favorite","dom","encodeURI","append","attr","filterElement","currentFilter","newFilter","hasClass","star","toggleClass","flyingStar","offsetWidth","scale","positive","cache","Cache","scrollModeThreshold","lastScrollOffset","slidingModeTimeoutId","isMenuMouseEnterBlocked","isMenuMouseLeaveBlocked","isCollapsedMode","menuContainer","isCustomPresetAvailable","showLicenseButton","licenseButtonPath","analytics","initAndBindNodes","bindEvents","getItemsController","groupPanel","handleMenuDoubleClick","handleMenuMouseEnter","handleMenuMouseLeave","handleSlidingTransitionEnd","menuHeader","menuBody","menuItemsBlock","mainTable","menuHeaderBurger","handleBurgerClick","menuMoreButton","handleShowHiddenClick","siteMapItem","handleSiteMapClick","settingsSaveBtn","handleViewMode","getSettingsController","EditMode","toggle","ViewMode","onDragModeOn","switchToSlidingMode","onDragModeOff","onHiddenBlockIsVisible","onHiddenBlockIsHidden","onHiddenBlockIsEmpty","onHiddenBlockIsNotEmpty","getItemDirector","onItemHasBeenAdded","onGettingSettingMenuItems","getCustomPresetController","onPresetIsSet","getDefaultPresetController","closeEventWasProcessed","postponeHandler","presetController","onPresetIsPostponed","getCompatData","decrement","command","addCustomEvent","handleGroupPanelOpen","handleGroupPanelClose","isDomNode","leftMenuNode","leftMenuLink","previousElementSibling","contextMenu","dataItem","topMenu","match","addMenuItem","currentPageInMenu","compatData","promises","p","fulfill","isCollapsed","onDestroy","showGlobalPreset","loadBannerDispatcherExtensionPromise","BannerDispatcher","high","toQueue","onDone","setDefaultMenu","onYes","YES_CANCEL","clearCompositeCache","menuItemWithAddingToFavorites","leftMenuSettingItems","UI","InfoHelper","Messenger","allowChangeHistory","handleHelperClick","customLeftBoundary","Helper","blockSliding","stopSliding","releaseSliding","clearTimeout","startSliding","handleUpButtonClick","isUpButtonReversed","scrollTo","unreverseUpButton","pageYOffset","reverseUpButton","handleUpButtonMouseLeave","handleDocumentScroll","documentElement","clientHeight","showUpButton","hideUpButton","pageXOffset","upButton","removeProperty","enable","immediately","setCollapsed","switchToScrollMode","flag","fn","leftColumn","isOpen","menuLinks","slice","menuMoreBtn","menuMoreBtnDefault","menuSitemapIcon","menuSitemapText","menuEmployeesText","menuEmployeesIcon","settingsIconBox","settingsBtnText","helpIconBox","helpBtnText","menuTextDivider","menuMoreCounter","pageHeader","imBar","imBarWidth","expandedMenuWidth","getComputedStyle","getPropertyValue","collapsedMenuWidth","sidebarWidth","burgerMenuWidth","maxWidth","transform","translateIcon","opacityRevert","translateText","translateMoreBtn","menuIcon","menuLinkText","menuCounter","menuArrow","createEvent","initEvent","dispatchEvent","containers","headerBurger","cssText","isFunction","isDefaultTheme","getTopPadding","initPagetitleStar","getStructureForHelper","showItemWarning","removeItemWarning","iDecrement","licenseButtonWrapper","renderTo","licenseButton","Button","AirButtonStyle","FILLED_SUCCESS","noCaps","wide"],"mappings":"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"}