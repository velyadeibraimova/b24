{"version":3,"file":"bitrix24.bundle.js","sources":["../src/js/partner-form/show-partner-connect-form.js","../src/js/partner-form/show-partner-order-form.js","../src/js/partner-form/show-helper.js","../src/js/partner-form/partner-form.js","../src/js/chat-menu.js","../src/js/helpers.js","../src/js/composite.js","../src/js/right-bar.js","../src/js/header/header.js","../src/js/footer.js","../src/js/go-top-button.js","../src/js/collaboration-menu.js","../src/js/site-template.js","../src/js/header/search-title.js","../src/js/header/avatar-button.js","../src/js/header/license-button.js","../src/js/header/invitation-button.js","../src/js/language-switcher.js","../src/index.js"],"sourcesContent":["import { Loc, Runtime } from 'main.core';\nimport { type Popup as PopupInstance, type PopupOptions } from 'main.popup';\n\nexport type ShowPartnerFormParams = {\n\tpartnerId: string;\n\tpartnerName: string;\n\tpartnerUrl: string;\n\tmessages: { [string]: string }\n};\n\nexport async function showPartnerConnectForm(params: ShowPartnerFormParams)\n{\n\tLoc.setMessage(params.messages);\n\tawait showPartnerFormPopup({\n\t\t...params,\n\t\ttitleBar: Loc.getMessage('BX24_PARTNER_TITLE'),\n\t\tsendButtonText: Loc.getMessage('BX24_BUTTON_SEND'),\n\t});\n}\n\ntype ShowPartnerFormPopupOptions = {\n\ttitleBar: string;\n\tsendButtonText: string;\n\tpartnerId: string;\n\tpartnerName: string;\n\tpartnerUrl: string;\n\tarParams: Object;\n}\nasync function showPartnerFormPopup(options: ShowPartnerFormPopupOptions): Popup\n{\n\tconst titleBar = options.titleBar;\n\tconst sendButtonText = options.sendButtonText;\n\tconst partnerName = options.partnerName;\n\tconst partnerUrl = options.partnerUrl;\n\n\tconst [{ Popup }, { Button, ButtonColor }] = await Promise.all([\n\t\tRuntime.loadExtension('main.popup'),\n\t\tRuntime.loadExtension('ui.buttons'),\n\t]);\n\n\tconst popupOptions: PopupOptions = {\n\t\tclassName: 'bitrix24-partner__popup',\n\t\tautoHide: false,\n\t\tcacheable: false,\n\t\tzIndex: 0,\n\t\toffsetLeft: 0,\n\t\toffsetTop: 0,\n\t\twidth: 540,\n\t\theight: 350,\n\t\toverlay: true,\n\t\tdraggable: { restrict: true },\n\t\tcloseByEsc: true,\n\t\ttitleBar,\n\t\tcloseIcon: true,\n\t\tcontent: `\n\t\t\t<div class=\"bitrix24-partner__popup-content\">\n\t\t\t\t<div class=\"bitrix24-partner__popup-content_title\">${Loc.getMessage('PARTNER_TITLE_FOR_NAME')}</div>\n\t\t\t\t<div class=\"bitrix24-partner__popup-content_main\">\n\t\t\t\t\t<div class=\"bitrix24-partner__popup-content_name\">${partnerName}</div>\n\t\t\t\t\t<a class=\"bitrix24-partner__popup-content_link\" href=\"${encodeURI(partnerUrl)}\" target=\"_blank\">${Loc.getMessage('PARTNER_LINK_NAME_MORE')}</a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bitrix24-partner__popup-content_desc\">${Loc.getMessage('PARTNER_POPUP_DESCRIPTION_BOTTOM')}</div>\n\t\t\t</div>\n\t\t`,\n\t\tbuttons: [\n\t\t\tnew Button({\n\t\t\t\tcolor: ButtonColor.SUCCESS,\n\t\t\t\ttext: sendButtonText,\n\t\t\t\tonclick: async (button: Button) => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tbutton.setClocking(true);\n\t\t\t\t\t}, 200);\n\t\t\t\t\tawait showIntegratorApplicationForm();\n\t\t\t\t\tbutton.setClocking(false);\n\t\t\t\t},\n\t\t\t}),\n\t\t],\n\t};\n\n\tconst popup: PopupInstance = new Popup(popupOptions);\n\n\tpopup.show();\n}\n\nasync function showIntegratorApplicationForm(): void\n{\n\tconst { Form } = await Runtime.loadExtension('ui.feedback.form');\n\n\tForm.open({\n\t\tid: `intranet-license-partner-form-${parseInt(Math.random() * 1000, 10)}`,\n\t\tportalUri: 'https://bitrix24.team',\n\t\tforms: [\n\t\t\t{ zones: ['de'], id: 883, lang: 'de', sec: 'a12ty8' },\n\t\t\t{ zones: ['com', 'in', 'eu', 'uk'], id: 735, lang: 'en', sec: 'vlhmlv' },\n\t\t\t{ zones: ['es', 'co', 'mx'], id: 900, lang: 'es', sec: 'w3qmwq' },\n\t\t\t{ zones: ['com.br'], id: 901, lang: 'pt', sec: 'prnm4x' },\n\t\t\t{ zones: ['cn/tc'], id: 902, lang: 'cn-tc', sec: 'z8isyg' },\n\t\t\t{ zones: ['cn'], id: 903, lang: 'cn-sc', sec: 'hsxnam' },\n\t\t\t{ zones: ['pl'], id: 904, lang: 'pl', sec: '2ph9ph' },\n\t\t\t{ zones: ['it'], id: 905, lang: 'it', sec: '2r3owa' },\n\t\t\t{ zones: ['fr'], id: 906, lang: 'fr', sec: 'jt2fii' },\n\t\t\t{ zones: ['com.tr'], id: 907, lang: 'tr', sec: 'ovevp8' },\n\t\t\t{ zones: ['id'], id: 908, lang: 'id', sec: '7kq7v2' },\n\t\t\t{ zones: ['com/my'], id: 909, lang: 'ms', sec: 'kmncmj' },\n\t\t\t{ zones: ['com/th'], id: 910, lang: 'th', sec: 'sknbp9' },\n\t\t\t{ zones: ['vn'], id: 911, lang: 'vn', sec: 'a573fy' },\n\t\t\t{ zones: ['jp'], id: 912, lang: 'jp', sec: '3purdq' },\n\t\t\t{ zones: ['ru'], id: 2122, lang: 'ru', sec: '8vralr' },\n\t\t\t{ zones: ['kz'], id: 2128, lang: 'ru', sec: '054phh' },\n\t\t\t{ zones: ['by'], id: 2129, lang: 'ru', sec: 'srs85j' },\n\t\t],\n\t\tdefaultForm: { id: 735, lang: 'en', sec: 'vlhmlv' },\n\t});\n}\n","import { type PopupOptions, type Popup as PopupInstance } from 'main.popup';\nimport { Type, Runtime } from 'main.core';\n\nexport type ShowPartnerOrderFormParams = {\n\tid: string | number;\n\tsec: string | number;\n};\n\nexport async function showPartnerOrderForm(params: ShowPartnerOrderFormParams)\n{\n\tif (Type.isObject(params) === false)\n\t{\n\t\treturn;\n\t}\n\n\tconst { Popup } = await Runtime.loadExtension('main.popup');\n\n\tconst popupOptions: PopupOptions = {\n\t\tid: 'B24PartnerOrderForm',\n\t\tautoHide: true,\n\t\tnoAllPaddings: true,\n\t\tzIndex: 0,\n\t\toffsetLeft: 0,\n\t\toffsetTop: 0,\n\t\toverlay: true,\n\t\tborderRadius: '10px',\n\t\tcontentBorderRadius: '10px',\n\t\tdisableScroll: true,\n\t\theight: Math.min(window.innerHeight - 60, 758),\n\t\twidth: 560,\n\t\tdraggable: { restrict: true },\n\t\tcloseByEsc: true,\n\t\tcontentColor: 'white',\n\t\tcontentNoPaddings: true,\n\t\tcacheable: false,\n\t\tcontent: `\n\t\t\t<script data-b24-form=\"inline/${params.id}/${params.sec}\" data-skip-moving=\"true\">\n\t\t\t\t(function(w, d,u) {\n\t\t\t\t\tvar s = d.createElement(\"script\");\n\t\t\t\t\ts.async=true;\n\t\t\t\t\ts.src=u + \"?\" + (Date.now()/180000|0);\n\t\t\t\t\tvar h = d.getElementsByTagName(\"script\")[0];\n\t\t\t\t\th.parentNode.insertBefore(s,h);\n\t\t\t\t})(window,document,\"https://bitrix24.team/upload/crm/form/loader_${params.id}_${params.sec}.js\")\n\t\t\t</script>\n\t\t`,\n\t\tevents: {\n\t\t\tonPopupFirstShow()\n\t\t\t{\n\t\t\t\t(function(w, d, u) {\n\t\t\t\t\tvar s = d.createElement('script');\n\t\t\t\t\ts.async = true;\n\t\t\t\t\ts.src = u + '?' + (Date.now() / 180_000 | 0);\n\t\t\t\t\tvar h = d.getElementsByTagName('script')[0];\n\t\t\t\t\th.parentNode.insertBefore(s, h);\n\t\t\t\t})(window, document, `https://bitrix24.team/upload/crm/form/loader_${params.id}_${params.sec}.js`);\n\t\t\t},\n\t\t},\n\t};\n\n\tconst popup: PopupInstance = new Popup(popupOptions);\n\n\tpopup.show();\n}\n","import { Runtime, Reflection } from 'main.core';\n\nexport const showHelper = async (): Promise<void> => {\n\tawait Runtime.loadExtension('helper');\n\tconst Helper = Reflection.getClass('BX.Helper');\n\n\tHelper.show('redirect=detail&code=20267044');\n};\n","import { showPartnerConnectForm, type ShowPartnerFormParams } from './show-partner-connect-form';\nimport { showPartnerOrderForm, type ShowPartnerOrderFormParams } from './show-partner-order-form';\nimport { showHelper } from './show-helper';\n\nexport class PartnerForm\n{\n\tstatic async showConnectForm(params: ShowPartnerFormParams): void\n\t{\n\t\treturn showPartnerConnectForm(params);\n\t}\n\n\tstatic showIntegrationOrderForm(params: ShowPartnerOrderFormParams): void\n\t{\n\t\treturn showPartnerOrderForm(params);\n\t}\n\n\tstatic async showHelper(): void\n\t{\n\t\treturn showHelper();\n\t}\n}\n","import { Reflection } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport class ChatMenu\n{\n\tconstructor()\n\t{\n\t\tEventEmitter.subscribe('IM.Layout:onLayoutChange', this.#handleImLayoutChange.bind(this));\n\t\tEventEmitter.subscribe('IM.Counters:onUpdate', this.#handleCounterUpdate.bind(this));\n\t\tEventEmitter.subscribe('BX.Intranet.Bitrix24.ChatMenu:onSelect', this.#handleChatMenuSelect.bind(this));\n\t}\n\n\tgetMenu(): typeof(BX.Main.interfaceButtons) | null\n\t{\n\t\t/**\n\t\t *\n\t\t * @type {BX.Main.interfaceButtonsManager}\n\t\t */\n\t\tconst menuManager = Reflection.getClass('BX.Main.interfaceButtonsManager');\n\t\tif (menuManager)\n\t\t{\n\t\t\treturn menuManager.getById('chat-menu');\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#handleChatMenuSelect(event: BaseEvent): void\n\t{\n\t\tconst data = event.getData();\n\t\tconst { id, entityId } = data;\n\t\tlet target = data.event?.target;\n\t\tif (target)\n\t\t{\n\t\t\ttarget = target.closest('.main-buttons-item-link, .menu-popup-item');\n\t\t}\n\n\t\tconst Public = Reflection.getClass('BX.Messenger.Public');\n\t\tPublic?.openNavigationItem({ id, entityId, target });\n\t}\n\n\t#handleImLayoutChange(event: BaseEvent): void\n\t{\n\t\tconst data = event.getData();\n\t\tconst menu = this.getMenu();\n\n\t\tlet fromItemId = data.from.name.toLowerCase();\n\t\tif (fromItemId === 'market' && data.from.entityId)\n\t\t{\n\t\t\tfromItemId = `${fromItemId}_${data.from.entityId}`;\n\t\t}\n\n\t\tlet toItemId = data.to.name.toLowerCase();\n\t\tif (toItemId === 'market' && data.to.entityId)\n\t\t{\n\t\t\ttoItemId = `${toItemId}_${data.to.entityId}`;\n\t\t}\n\n\t\tmenu?.unsetActive(fromItemId);\n\t\tmenu?.setActive(toItemId);\n\t\tmenu?.closeMoreMenu();\n\t}\n\n\t#handleCounterUpdate(event: BaseEvent): void\n\t{\n\t\tconst counters: Object<string, number> = event.getData();\n\t\tconst menu = this.getMenu();\n\t\tfor (const [counterId, counterValue] of Object.entries(counters))\n\t\t{\n\t\t\tmenu?.updateCounter(counterId, counterValue);\n\t\t}\n\t}\n}\n","import { Type } from 'main.core';\n\nexport function getBackUrl(): string\n{\n\tconst backUrl = window.location.pathname;\n\tconst query = getQueryString(['logout', 'login', 'back_url_pub', 'user_lang']);\n\n\treturn backUrl + (query.length > 0 ? `?${query}` : '');\n}\n\nfunction getQueryString(ignoredParams): string\n{\n\tconst query = window.location.search.slice(1);\n\n\tif (!Type.isStringFilled(query))\n\t{\n\t\treturn '';\n\t}\n\n\tconst vars = query.split('&');\n\tconst checkedIgnoredParams = Type.isArray(ignoredParams) ? ignoredParams : [];\n\n\tlet result = '';\n\tfor (const variable of vars)\n\t{\n\t\tconst pair = variable.split('=');\n\t\tconst equal = variable.indexOf('=');\n\t\tconst key = pair[0];\n\t\tconst value = Type.isStringFilled(pair[1]) ? pair[1] : false;\n\t\tif (!checkedIgnoredParams.includes(key))\n\t\t{\n\t\t\tif (result !== '')\n\t\t\t{\n\t\t\t\tresult += '&';\n\t\t\t}\n\t\t\tresult += key + (equal === -1 ? '' : '=') + (value === false ? '' : value);\n\t\t}\n\t}\n\n\treturn result;\n}\n","import { Type, Tag, Dom, ajax as Ajax } from 'main.core';\nimport { EventEmitter, type BaseEvent } from 'main.core.events';\nimport { MemoryCache, type BaseCache } from 'main.core.cache';\nimport { PULL } from 'pull.client';\nimport { getBackUrl } from './helpers';\n\nexport class Composite\n{\n\t#refs: BaseCache<HTMLElement> = new MemoryCache();\n\n\tconstructor()\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.#bindEvents();\n\t\t}\n\t}\n\n\tisEnabled(): boolean\n\t{\n\t\treturn !Type.isUndefined(window.frameRequestStart);\n\t}\n\n\tisReady(): boolean\n\t{\n\t\treturn window.BX?.frameCache?.frameDataInserted === true || !Type.isUndefined(window.frameRequestFail);\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tconst page = window.location.pathname;\n\t\tif (page === '/stream/' || page === '/stream/index.php' || page === '/index.php')\n\t\t{\n\t\t\tthis.#showLoader('stream');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.#showLoader();\n\t\t\t}, 500);\n\t\t}\n\t}\n\n\t#showLoader(page: string = null): void\n\t{\n\t\tif (this.isReady())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst skeleton = this.#getPageSkeleton(page);\n\t\tconst container = this.getStubContainer();\n\t\tconst stub = skeleton ?? this.getLoaderContainer();\n\t\tif (!container || stub.parentNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.append(stub, container);\n\t}\n\n\t#getPageSkeleton(page: string): HTMLElement | null\n\t{\n\t\tconst map = {\n\t\t\tstream: () => this.getLiveFeedSkeleton(),\n\t\t};\n\n\t\tif (map[page])\n\t\t{\n\t\t\treturn map[page]();\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetStubContainer(): HTMLElement | null\n\t{\n\t\treturn document.querySelector('#page-area');\n\t}\n\n\tgetLoaderContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('loader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"composite-skeleton-container\">\n\t\t\t\t\t<div class=\"composite-loader-container\">\n\t\t\t\t\t\t<svg class=\"composite-loader-circular\" viewBox=\"25 25 50 50\">\n\t\t\t\t\t\t\t<circle class=\"composite-loader-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#bindEvents(): void\n\t{\n\t\tEventEmitter.subscribe('onFrameDataRequestFail', () => {\n\t\t\tconsole.error('Composite ajax request failed');\n\t\t\ttop.location = `/auth/?backurl=${encodeURIComponent(getBackUrl())}`;\n\t\t});\n\n\t\tEventEmitter.subscribe('onAjaxFailure', (event: BaseEvent) => {\n\t\t\tconst [reason, status] = event.getCompatData();\n\t\t\tconst redirectUrl = `/auth/?backurl=${getBackUrl()}`;\n\t\t\tif (this.isEnabled() && (reason === 'auth' || (reason === 'status' && status === 401)))\n\t\t\t{\n\t\t\t\tconsole.error('Auth ajax request failed', reason, status);\n\t\t\t\ttop.location = redirectUrl;\n\t\t\t}\n\t\t});\n\n\t\tif (PULL)\n\t\t{\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'main',\n\t\t\t\tcommand: 'composite-cache-up',\n\t\t\t\tcallback: () => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tconst value = BX.localStorage.get('ajax-composite-cache-up-lock');\n\t\t\t\t\t\tif (!value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.localStorage.set('ajax-composite-cache-up-lock', 'EXECUTE', 2);\n\t\t\t\t\t\t\tAjax({\n\t\t\t\t\t\t\t\turl: '/blank.php',\n\t\t\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\t\t\tprocessData: false,\n\t\t\t\t\t\t\t\tskipBxHeader: true,\n\t\t\t\t\t\t\t\temulateOnload: false,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}, Math.floor(Math.random() * 500));\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tgetLiveFeedSkeleton(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('feed-skeleton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"page top-menu-mode start-page no-background no-all-paddings no-page-header\">\n\t\t\t\t\t<div class=\"page__workarea\">\n\t\t\t\t\t\t<div class=\"page__sidebar\">${this.getLiveFeedSidebar()}</div>\n\t\t\t\t\t\t<main class=\"page__workarea-content\">${this.getLiveFeedWorkArea()}</main>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLiveFeedSidebar(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('feed-sidebar', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__sidebar skeleton__intranet-ustat\">\n\t\t\t\t\t<div class=\"skeleton__graph-circle\"></div>\n\t\t\t\t\t<div class=\"skeleton__graph-right\">\n\t\t\t\t\t\t<div class=\"skeleton__graph-right_top\">\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle --first\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__graph-right_bottom\">\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_bottom-line\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_bottom-line\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__sidebar\">\n\t\t\t\t\t<div class=\"skeleton__sidebar-header\">\n\t\t\t\t\t\t<div class=\"skeleton__sidebar-header_line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__sidebar-header_circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__tasks-row\">\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_short-line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__tasks-row\">\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_short-line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__tasks-row\">\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_short-line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__tasks-row\">\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_short-line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__sidebar\">\n\t\t\t\t\t<div class=\"skeleton__sidebar-header\">\n\t\t\t\t\t\t<div class=\"skeleton__sidebar-header_line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__sidebar\">\n\t\t\t\t\t<div class=\"skeleton__sidebar-header\">\n\t\t\t\t\t\t<div class=\"skeleton__sidebar-header_line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLiveFeedWorkArea(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('feed-work-area', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__feed-wrap\">\n\t\t\t\t\t<div class=\"skeleton__feed-wrap_header\">\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-link --long\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-link --one\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-link --two\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-link --one\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-link --two\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-content\">\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-text\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__title-block\">\n\t\t\t\t\t<div class=\"skeleton__title-block_text\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__feed-item\">\n\t\t\t\t\t<div class=\"skeleton__feed-item_user-icon\"></div>\n\t\t\t\t\t<div class=\"skeleton__feed-item_content\">\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_main\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_date\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --short\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --one\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --two\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --three\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --four\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_like\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-name\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-block\">\n\t\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-text\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__feed-item\">\n\t\t\t\t\t<div class=\"skeleton__feed-item_user-icon\"></div>\n\t\t\t\t\t<div class=\"skeleton__feed-item_content\">\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_main\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_date\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --short\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --one\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --two\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --three\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --four\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_like\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-name\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-block\">\n\t\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-text\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__feed-item\">\n\t\t\t\t\t<div class=\"skeleton__feed-item_user-icon\"></div>\n\t\t\t\t\t<div class=\"skeleton__feed-item_content\">\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_main\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_date\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --short\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --one\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --two\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --three\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --four\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_like\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-name\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-block\">\n\t\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-text\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { Event, Dom } from 'main.core';\nimport type { GoTopButton } from './go-top-button';\n\nexport type RightBarOptions = {\n\tgoTopButton: GoTopButton;\n};\n\nexport class RightBar\n{\n\t#isTransparentMode: boolean = false;\n\t#isScrollMode: boolean = false;\n\t#scrollModeThreshold: number = window.innerHeight;\n\t#goTopButton: GoTopButton;\n\n\tconstructor(options: RightBarOptions)\n\t{\n\t\tconst redraw = this.redraw.bind(this);\n\t\tEvent.bind(window, 'scroll', redraw, { passive: true });\n\t\tEvent.bind(window, 'resize', redraw);\n\t\tthis.#scrollModeThreshold = window.innerHeight;\n\t\tthis.#goTopButton = options.goTopButton;\n\n\t\tthis.#goTopButton.subscribe('show', () => {\n\t\t\tDom.addClass(this.getContainer(), '--show-scroll-btn');\n\t\t});\n\n\t\tthis.#goTopButton.subscribe('hide', () => {\n\t\t\tDom.removeClass(this.getContainer(), '--show-scroll-btn');\n\t\t});\n\n\t\tEvent.ready(() => {\n\t\t\tthis.redraw();\n\t\t});\n\t}\n\n\tredraw(): void\n\t{\n\t\tconst rightBar = this.getContainer();\n\n\t\tthis.#scrollModeThreshold = window.innerHeight;\n\n\t\tif (window.pageYOffset > this.#scrollModeThreshold)\n\t\t{\n\t\t\tif (!this.#isScrollMode)\n\t\t\t{\n\t\t\t\tDom.addClass(rightBar, '--scroll-mode');\n\t\t\t\tthis.#isScrollMode = true;\n\t\t\t}\n\t\t}\n\t\telse if (this.#isScrollMode)\n\t\t{\n\t\t\tDom.removeClass(rightBar, '--scroll-mode');\n\t\t\tthis.#isScrollMode = false;\n\t\t}\n\n\t\tif (!rightBar || rightBar.dataset.lockRedraw === 'true')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst scrollWidth = document.documentElement.scrollWidth - document.documentElement.clientWidth;\n\t\tif (scrollWidth > 0)\n\t\t{\n\t\t\tif (!this.#isTransparentMode)\n\t\t\t{\n\t\t\t\tDom.addClass(rightBar, '--transparent');\n\t\t\t\tthis.#isTransparentMode = true;\n\t\t\t}\n\t\t}\n\t\telse if (this.#isTransparentMode)\n\t\t{\n\t\t\tDom.removeClass(rightBar, '--transparent');\n\t\t\tthis.#isTransparentMode = false;\n\t\t}\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn document.getElementById('right-bar');\n\t}\n}\n","export class Header\n{\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn document.getElementById('header');\n\t}\n}\n","import { Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport class Footer\n{\n\tconstructor()\n\t{\n\t\tEventEmitter.subscribe('Kanban.Grid:onFixedModeStart', () => {\n\t\t\tthis.hide();\n\t\t});\n\t}\n\n\tshow(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'hidden');\n\t}\n\n\thide(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'hidden');\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn document.getElementById('air-footer');\n\t}\n}\n","import { Dom, Event } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { ButtonIcon, ButtonManager } from 'ui.buttons';\n\nexport class GoTopButton extends EventEmitter\n{\n\t#lastScrollOffset = 0;\n\t#isReversed = false;\n\t#button: Button;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.setEventNamespace('GoTopButton');\n\t\tthis.#bindEvents();\n\t}\n\n\tisShown(): boolean\n\t{\n\t\treturn Dom.hasClass(this.#getButtonWrapper(), '--show');\n\t}\n\n\t#show(): void\n\t{\n\t\tthis.emit('show');\n\t\tDom.addClass(this.#getButtonWrapper(), '--show');\n\t}\n\n\t#hide(): void\n\t{\n\t\tthis.emit('hide');\n\t\tDom.removeClass(this.#getButtonWrapper(), '--show');\n\t}\n\n\t#getButtonWrapper(): HTMLElement\n\t{\n\t\treturn document.getElementById('goTopButtonWrapper');\n\t}\n\n\t#bindEvents(): void\n\t{\n\t\tEvent.ready(() => {\n\t\t\tthis.#handleScroll();\n\n\t\t\tEvent.bind(window, 'scroll', () => {\n\t\t\t\tthis.#handleScroll();\n\t\t\t});\n\n\t\t\tEvent.bind(this.#getButtonWrapper(), 'click', () => {\n\t\t\t\tthis.#handleButtonClick();\n\t\t\t});\n\t\t});\n\t}\n\n\t#handleScroll(): boolean\n\t{\n\t\tif (window.pageYOffset > document.documentElement.clientHeight)\n\t\t{\n\t\t\tthis.#show();\n\n\t\t\tif (this.#isReversed)\n\t\t\t{\n\t\t\t\tthis.#setReversed(false);\n\t\t\t\tthis.#lastScrollOffset = 0;\n\t\t\t}\n\t\t}\n\t\telse if (this.#isReversed === false)\n\t\t{\n\t\t\tthis.#hide();\n\t\t}\n\t}\n\n\t#handleButtonClick(): void\n\t{\n\t\tif (this.#isReversed)\n\t\t{\n\t\t\tthis.#setReversed(false);\n\n\t\t\twindow.scrollTo({\n\t\t\t\ttop: this.#lastScrollOffset,\n\t\t\t\tbehavior: 'instant',\n\t\t\t});\n\n\t\t\tthis.#lastScrollOffset = 0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#setReversed(true);\n\t\t\tthis.#lastScrollOffset = window.pageYOffset;\n\n\t\t\twindow.scrollTo({\n\t\t\t\ttop: 0,\n\t\t\t\tbehavior: 'instant',\n\t\t\t});\n\t\t}\n\t}\n\n\t#setReversed(flag: boolean = true): void\n\t{\n\t\tthis.#isReversed = flag;\n\n\t\tif (this.#isReversed)\n\t\t{\n\t\t\tthis.#getButton().setIcon(ButtonIcon.ANGLE_DOWN);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#getButton().setIcon(ButtonIcon.ANGLE_UP);\n\t\t}\n\t}\n\n\t#getButton(): Button\n\t{\n\t\treturn this.#button || ButtonManager.createFromNode(document.getElementById('goTopButton'));\n\t}\n}\n","import { Reflection } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport class CollaborationMenu\n{\n\tconstructor()\n\t{\n\t\tEventEmitter.subscribe('onImUpdateCounterMessage', this.#handleCounterUpdate.bind(this));\n\t\tEventEmitter.subscribe('onCounterDecrement', this.#handleLiveFeedCounterDecrement.bind(this));\n\t}\n\n\tgetMenu(): typeof(BX.Main.interfaceButtons) | null\n\t{\n\t\t/**\n\t\t *\n\t\t * @type {BX.Main.interfaceButtonsManager}\n\t\t */\n\t\tconst menuManager = Reflection.getClass('BX.Main.interfaceButtonsManager');\n\t\tif (menuManager)\n\t\t{\n\t\t\treturn menuManager.getById('top_menu_id_collaboration');\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#handleCounterUpdate(event: BaseEvent): void\n\t{\n\t\tconst menu = this.getMenu();\n\t\tconst [counter] = event.getCompatData();\n\t\tmenu?.updateCounter('im-message', counter);\n\t}\n\n\t#handleLiveFeedCounterDecrement(event: BaseEvent): void\n\t{\n\t\tconst [decrement] = event.getCompatData();\n\t\tconst menu = this.getMenu();\n\t\tif (menu)\n\t\t{\n\t\t\tconst item = menu.getItemById('menu_live_feed');\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tconst itemData = menu.getItemData(item);\n\t\t\t\tconst { COUNTER, COUNTER_ID } = itemData;\n\n\t\t\t\tmenu?.updateCounter(COUNTER_ID, Math.max(0, COUNTER - decrement));\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Type, Reflection, Runtime, Dom, Browser } from 'main.core';\nimport { EventEmitter, type BaseEvent } from 'main.core.events';\nimport { SidePanel } from 'main.sidepanel';\nimport { ChatMenu } from './chat-menu';\nimport { Composite } from './composite';\nimport { RightBar } from './right-bar';\nimport { Header } from './header/header';\nimport { Footer } from './footer';\nimport { GoTopButton } from './go-top-button';\nimport { CollaborationMenu } from './collaboration-menu';\n\nconst DEFAULT_SLIDER_BLUR = 'blur(6px)';\nconst IM_SLIDER_BLUR = 'blur(10px)';\n\nexport class SiteTemplate\n{\n\t#rightBar: RightBar = null;\n\t#header: Header = null;\n\t#footer: Footer = null;\n\t#composite: Composite = null;\n\t#chatMenu: ChatMenu = null;\n\t#goTopButton: GoTopButton = null;\n\t#collaborationMenu: CollaborationMenu = null;\n\n\tconstructor()\n\t{\n\t\tthis.#preventFromIframe();\n\n\t\tthis.#makeSliderBlurry();\n\t\tthis.#patchPopupMenu();\n\t\tthis.#patchRestAPI();\n\t\tthis.#patchJSClock();\n\n\t\tthis.#goTopButton = new GoTopButton();\n\t\tthis.#rightBar = new RightBar({\n\t\t\tgoTopButton: this.#goTopButton,\n\t\t});\n\t\tthis.#header = new Header();\n\t\tthis.#footer = new Footer();\n\t\tthis.#composite = new Composite();\n\t\tthis.#chatMenu = new ChatMenu();\n\t\tthis.#collaborationMenu = new CollaborationMenu();\n\n\t\tthis.#applyUserAgentRules();\n\t}\n\n\tgetRightBar(): RightBar\n\t{\n\t\treturn this.#rightBar;\n\t}\n\n\tgetHeader(): Header\n\t{\n\t\treturn this.#header;\n\t}\n\n\tgetFooter(): Footer\n\t{\n\t\treturn this.#footer;\n\t}\n\n\tgetComposite(): Composite\n\t{\n\t\treturn this.#composite;\n\t}\n\n\tgetChatMenu(): ChatMenu\n\t{\n\t\treturn this.#chatMenu;\n\t}\n\n\tgetCollaborationMenu(): CollaborationMenu\n\t{\n\t\treturn this.#collaborationMenu;\n\t}\n\n\t#patchPopupMenu(): void\n\t{\n\t\tEventEmitter.subscribe('BX.Main.Menu:onInit', (event: BaseEvent) => {\n\t\t\tconst { params } = event.getData();\n\t\t\tif (params && Type.isNumber(params.maxWidth))\n\t\t\t{\n\t\t\t\t// We increased menu-item's font-size that's why we increase max-width\n\t\t\t\tparams.maxWidth += 10;\n\t\t\t}\n\t\t});\n\t}\n\n\t#patchJSClock(): void\n\t{\n\t\tEventEmitter.subscribe('onJCClockInit', (config) => {\n\t\t\twindow.JCClock.setOptions({\n\t\t\t\tcenterXInline: 83,\n\t\t\t\tcenterX: 83,\n\t\t\t\tcenterYInline: 67,\n\t\t\t\tcenterY: 79,\n\t\t\t\tminuteLength: 31,\n\t\t\t\thourLength: 26,\n\t\t\t\tpopupHeight: 229,\n\t\t\t\tinaccuracy: 15,\n\t\t\t\tcancelCheckClick: true,\n\t\t\t});\n\t\t});\n\t}\n\n\t#fixSliderBorderRadius(slider, forceBgColor = null)\n\t{\n\t\tif (slider.isSelfContained())\n\t\t{\n\t\t\tDom.style(slider.getContainer(), 'background-color', '#eef2f4');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst frameDocument = slider?.getFrameWindow()?.document;\n\t\t\tif (frameDocument && frameDocument.body)\n\t\t\t{\n\t\t\t\tconst bgColor = Dom.style(frameDocument.body, 'background-color');\n\t\t\t\tconst bgImage = Dom.style(frameDocument.body, 'background-image');\n\t\t\t\tconst foreBgColor = bgColor === 'rgba(0, 0, 0, 0)' && bgImage === 'none' ? '#eef2f4' : 'rgba(0, 0, 0, 0)';\n\n\t\t\t\tDom.style(slider.getContainer(), 'background-color', forceBgColor === null ? foreBgColor : forceBgColor);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.style(slider.getContainer(), 'background-color', forceBgColor === null ? '#eef2f4' : forceBgColor);\n\t\t\t}\n\t\t}\n\t}\n\n\t#makeSliderBlurry(): void\n\t{\n\t\tEventEmitter.subscribe('SidePanel.Slider:onOpenComplete', (event: BaseEvent) => {\n\t\t\tconst [sliderEvent] = event.getData();\n\t\t\tconst slider = sliderEvent.getSlider();\n\n\t\t\tif (!slider.isLoaded())\n\t\t\t{\n\t\t\t\tthis.#fixSliderBorderRadius(slider, 'rgba(0, 0, 0, 0)');\n\t\t\t}\n\n\t\t\tconst previousSlider = SidePanel.Instance.getPreviousSlider();\n\t\t\tif (previousSlider)\n\t\t\t{\n\t\t\t\tDom.style(previousSlider.getOverlay(), '-webkit-backdrop-filter', null);\n\t\t\t\tDom.style(previousSlider.getOverlay(), 'backdrop-filter', null);\n\t\t\t}\n\n\t\t\tconst isMessenger = slider.getUrl().startsWith('im:slider');\n\n\t\t\tDom.style(slider.getOverlay(), '-webkit-backdrop-filter', isMessenger ? IM_SLIDER_BLUR : DEFAULT_SLIDER_BLUR);\n\t\t\tDom.style(slider.getOverlay(), 'backdrop-filter', isMessenger ? IM_SLIDER_BLUR : DEFAULT_SLIDER_BLUR);\n\t\t});\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onClosing', (event: BaseEvent) => {\n\t\t\tconst [sliderEvent] = event.getData();\n\t\t\tconst slider = sliderEvent.getSlider();\n\n\t\t\tconst previousSlider = SidePanel.Instance.getPreviousSlider();\n\t\t\tif (previousSlider)\n\t\t\t{\n\t\t\t\tconst isMessenger = previousSlider.getUrl().startsWith('im:slider');\n\t\t\t\tDom.style(previousSlider.getOverlay(), '-webkit-backdrop-filter', isMessenger ? IM_SLIDER_BLUR : DEFAULT_SLIDER_BLUR);\n\t\t\t\tDom.style(previousSlider.getOverlay(), 'backdrop-filter', isMessenger ? IM_SLIDER_BLUR : DEFAULT_SLIDER_BLUR);\n\t\t\t}\n\n\t\t\tDom.style(slider.getOverlay(), '-webkit-backdrop-filter', null);\n\t\t\tDom.style(slider.getOverlay(), 'backdrop-filter', null);\n\t\t});\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onOpening', () => {\n\t\t\tif (SidePanel.Instance.getOpenSlidersCount() === 1)\n\t\t\t{\n\t\t\t\tDom.addClass(document.body, '--ui-reset-bg-blur');\n\t\t\t}\n\t\t\t// else\n\t\t\t// {\n\t\t\t// \tconst previousSlider = SidePanel.Instance.getPreviousSlider();\n\t\t\t// \tconst frameDocument = previousSlider?.getFrameWindow()?.document;\n\t\t\t// \tDom.addClass(frameDocument?.body, '--ui-reset-bg-blur');\n\t\t\t// }\n\t\t});\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onClosing', () => {\n\t\t\tif (SidePanel.Instance.getOpenSlidersCount() === 1)\n\t\t\t{\n\t\t\t\tDom.removeClass(document.body, '--ui-reset-bg-blur');\n\t\t\t}\n\t\t\t// else\n\t\t\t// {\n\t\t\t// \tconst previousSlider = SidePanel.Instance.getPreviousSlider();\n\t\t\t// \tconst frameDocument = previousSlider?.getFrameWindow()?.document;\n\t\t\t// \tDom.removeClass(frameDocument?.body, '--ui-reset-bg-blur');\n\t\t\t// }\n\t\t});\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onLoad', (event: BaseEvent) => {\n\t\t\tconst [sliderEvent] = event.getData();\n\t\t\tconst slider = sliderEvent.getSlider();\n\t\t\tthis.#fixSliderBorderRadius(slider);\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis.#fixSliderBorderRadius(slider);\n\t\t\t});\n\t\t});\n\t}\n\n\t#preventFromIframe(): void\n\t{\n\t\tconst iframeMode = window !== window.top;\n\t\tif (iframeMode)\n\t\t{\n\t\t\twindow.top.location = window.location.href;\n\t\t}\n\t}\n\n\t#applyUserAgentRules(): void\n\t{\n\t\tif (Browser.isMobile())\n\t\t{\n\t\t\tRuntime.loadExtension('intranet.mobile-popup').then((exports) => {\n\t\t\t\t(new exports.MobilePopup()).show();\n\t\t\t}).catch(() => {\n\t\t\t\t// fail silently\n\t\t\t});\n\t\t}\n\t\telse if (document.referrer !== '' && document.referrer.startsWith(location.origin) === false)\n\t\t{\n\t\t\tRuntime.loadExtension('intranet.recognize-links');\n\t\t}\n\t}\n\n\t#patchRestAPI(): void\n\t{\n\t\tconst AppLayout = Reflection.getClass('BX.rest.AppLayout');\n\t\tif (!AppLayout)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst placementInterface = AppLayout.initializePlacement('DEFAULT');\n\t\tplacementInterface.prototype.showHelper = async function(params, cb)\n\t\t{\n\t\t\tlet query = '';\n\t\t\tif (Type.isNumber(params))\n\t\t\t{\n\t\t\t\tquery = `redirect=detail&code=${params}`;\n\t\t\t}\n\t\t\telse if (Type.isStringFilled(params))\n\t\t\t{\n\t\t\t\tquery = params;\n\t\t\t}\n\t\t\telse if (Type.isPlainObject(params))\n\t\t\t{\n\t\t\t\tfor (const param of Object.keys(params))\n\t\t\t\t{\n\t\t\t\t\tif (query.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tquery += '&';\n\t\t\t\t\t}\n\n\t\t\t\t\tquery += `${param}=${params[param]}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (query.length > 0)\n\t\t\t{\n\t\t\t\tawait Runtime.loadExtension('helper');\n\t\t\t\tconst Helper = Reflection.getClass('BX.Helper');\n\t\t\t\tHelper.show(query);\n\t\t\t}\n\t\t};\n\t}\n}\n","import { Event, Runtime, Dom, Type, Reflection, type JsonObject } from 'main.core';\n\nexport class SearchTitle\n{\n\t#searchOptions: JsonObject = {};\n\t#extensionLoaded: boolean = false;\n\t#container: HTMLElement = null;\n\t#button: HTMLElement = null;\n\t#input: HTMLInputElement = null;\n\t#searchTitleInstance = null;\n\n\tconstructor(options)\n\t{\n\t\tthis.#container = document.getElementById(options.containerId);\n\t\tthis.#button = document.getElementById(options.buttonId);\n\t\tthis.#input = document.getElementById(options.inputId);\n\n\t\tthis.#searchOptions = options.searchOptions;\n\n\t\tEvent.bind(this.#button, 'click', this.#handleButtonClick.bind(this));\n\t\tEvent.bind(this.#input, 'focusout', this.#handleInputFocusOut.bind(this));\n\t}\n\n\topen(): void\n\t{\n\t\tDom.addClass(this.#container, '--active');\n\n\t\tthis.#input.disabled = false;\n\n\t\tsetTimeout(() => {\n\t\t\tthis.#input.focus();\n\t\t}, 200);\n\t}\n\n\tclose(): void\n\t{\n\t\tDom.removeClass(this.#container, '--active');\n\t\tthis.#input.disabled = true;\n\n\t\tif (this.#searchTitleInstance !== null)\n\t\t{\n\t\t\tthis.#searchTitleInstance.clearSearch();\n\t\t\tthis.#searchTitleInstance.closeResult();\n\t\t}\n\t}\n\n\t#handleButtonClick(): void\n\t{\n\t\tif (Dom.hasClass(this.#container, '--active'))\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.open();\n\t\t}\n\n\t\tif (this.#extensionLoaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#extensionLoaded = true;\n\t\tRuntime.loadExtension('intranet.search_title').then(() => {\n\t\t\tconst SearchTitleClass = Reflection.getClass('BX.Intranet.SearchTitle');\n\t\t\tthis.#searchTitleInstance = new SearchTitleClass(this.#searchOptions);\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t}\n\n\t#handleInputFocusOut(event): void\n\t{\n\t\tif (!Type.isStringFilled(this.#input.value) && event.relatedTarget !== this.#button)\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n}\n","import { Event, Runtime, Type, ajax } from 'main.core';\nimport { BaseCache, MemoryCache } from 'main.core.cache';\nimport { EventEmitter } from 'main.core.events';\nimport { Counter, CounterStyle } from 'ui.cnt';\nimport { WidgetLoader } from 'intranet.widget-loader';\nimport { AvatarWidget } from 'intranet.avatar-widget';\nimport { PULL } from 'pull.client';\nimport { WorkTimeStateIcon } from 'timeman.work-time-state-icon';\n\ntype AvatarButtonOptions = {\n\tuserId: number,\n\tskeleton: Object,\n\tsignDocumentsCounter: number,\n\tsignDocumentsPullEventName: string,\n\tworkTimeAvailable: boolean,\n\tworkTimeState: string,\n\tworkTimeAction: string,\n}\n\nexport class AvatarButton\n{\n\tstatic #avatarWrapper: HTMLElement;\n\tstatic #cache: BaseCache<any> = new MemoryCache();\n\tstatic #options: AvatarButtonOptions;\n\n\tstatic init(options: AvatarButtonOptions): void\n\t{\n\t\tthis.#options = options;\n\t\tthis.#avatarWrapper = document.querySelector('[data-id=\"bx-avatar-widget\"]');\n\t\tthis.#setEventHandlerForChangeAvatar();\n\n\t\tif (this.#options.signDocumentsCounter > 0)\n\t\t{\n\t\t\tthis.#showCounter();\n\t\t\tthis.#setEventHandlerForUpdateCounter();\n\t\t}\n\n\t\tif (this.#options.workTimeAvailable)\n\t\t{\n\t\t\tthis.#showWorkTimeState();\n\t\t}\n\n\t\tEvent.bind(this.#avatarWrapper, 'click', () => {\n\t\t\tEvent.unbindAll(this.#avatarWrapper);\n\t\t\tthis.#getWidgetLoader()\n\t\t\t\t.createSkeletonFromConfig(options.skeleton)\n\t\t\t\t.show();\n\t\t\tRuntime.loadExtension(['intranet.avatar-widget']).then(() => {\n\t\t\t\tthis.#showWidget();\n\t\t\t}).catch(() => {});\n\t\t});\n\t}\n\n\tstatic #showWidget(): void\n\t{\n\t\tthis.#getContent().then((response) => {\n\t\t\tthis.#getWidgetLoader().clearBeforeInsertContent();\n\t\t\tAvatarWidget.getInstance().setOptions({\n\t\t\t\tbuttonWrapper: this.#avatarWrapper,\n\t\t\t\tloader: this.#getWidgetLoader().getPopup(),\n\t\t\t\tdata: response.data,\n\t\t\t}).show();\n\t\t\tEvent.bind(this.#avatarWrapper, 'click', () => {\n\t\t\t\tAvatarWidget.getInstance().show();\n\t\t\t});\n\t\t}).catch(() => {});\n\t}\n\n\tstatic #getWidgetLoader(): WidgetLoader\n\t{\n\t\treturn this.#cache.remember('widgetLoader', () => {\n\t\t\treturn new WidgetLoader({\n\t\t\t\tid: 'bx-avatar-header-popup',\n\t\t\t\tbindElement: this.#avatarWrapper,\n\t\t\t\twidth: 450,\n\t\t\t\tuseAngle: false,\n\t\t\t\tfixed: true,\n\t\t\t\toffsetTop: -50,\n\t\t\t\toffsetLeft: 50,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getContent(): Promise\n\t{\n\t\treturn this.#cache.remember('content', () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tajax.runAction('intranet.user.widget.getContent')\n\t\t\t\t\t.then((response) => resolve(response))\n\t\t\t\t\t.catch((response) => reject(response))\n\t\t\t\t;\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #showCounter(): void\n\t{\n\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t}\n\n\tstatic #showWorkTimeState(): void\n\t{\n\t\tthis.#getWorkTimeState().renderTo(this.#getWorkTimeStateWrapper());\n\t}\n\n\tstatic #getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('counterWrapper', () => {\n\t\t\treturn this.#avatarWrapper.querySelector('.air-user-profile-avatar__counter');\n\t\t});\n\t}\n\n\tstatic #getWorkTimeStateWrapper(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('workTimeStateWrapper', () => {\n\t\t\treturn this.#avatarWrapper.querySelector('.air-user-profile-avatar__work-time-state');\n\t\t});\n\t}\n\n\tstatic #getCounter(): Counter\n\t{\n\t\treturn this.#cache.remember('counter', () => {\n\t\t\treturn new Counter({\n\t\t\t\tcolor: Counter.Color.DANGER,\n\t\t\t\tsize: Counter.Size.MEDIUM,\n\t\t\t\tvalue: this.#options.signDocumentsCounter,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: CounterStyle.FILLED_ALERT,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getWorkTimeState(): WorkTimeStateIcon\n\t{\n\t\treturn this.#cache.remember('workTimeState', () => {\n\t\t\treturn new WorkTimeStateIcon({\n\t\t\t\tstate: this.#options.workTimeState,\n\t\t\t\taction: this.#options.workTimeAction,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #setEventHandlerForUpdateCounter(): void\n\t{\n\t\tPULL.subscribe({\n\t\t\tmoduleId: 'sign',\n\t\t\tcommand: this.#options.signDocumentsPullEventName,\n\t\t\tcallback: (params) => {\n\t\t\t\tif (!Type.isNumber(params?.needActionCount))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (params?.needActionCount > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.#getCounter().update(params.needActionCount);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.#getCounter().destroy();\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic #setEventHandlerForChangeAvatar(): void\n\t{\n\t\tconst avatar = this.#avatarWrapper.querySelector('i');\n\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Intranet.UserProfile:Avatar:changed',\n\t\t\t(event) => {\n\t\t\t\tconst data = event.getData()[0];\n\t\t\t\tconst url = data && data.url ? data.url : '';\n\t\t\t\tconst eventUserId = data && data.userId ? data.userId : 0;\n\n\t\t\t\tif (this.#options.userId === eventUserId && avatar)\n\t\t\t\t{\n\t\t\t\t\tavatar.style = Type.isStringFilled(url)\n\t\t\t\t\t\t? `background-size: cover; background-image: url('${encodeURI(url)}')`\n\t\t\t\t\t\t: ''\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n}\n","import { ajax, Event, Runtime } from 'main.core';\nimport { BaseCache, MemoryCache } from 'main.core.cache';\nimport { LicenseWidget as Bitrix24LicenseWidget } from 'bitrix24.license-widget';\nimport { LicenseWidget as IntranetLicenseWidget } from 'intranet.license-widget';\nimport { WidgetLoader } from 'intranet.widget-loader';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { FeaturePromotersRegistry } from 'ui.info-helper';\nimport {Counter, CounterColor, CounterStyle} from 'ui.cnt';\nimport { PULL } from 'pull.client';\n\ntype LicenseButtonOptions = {\n\tordersAwaitingPayment: number,\n\tskeleton: Object,\n\tisSidePanelDemoLicense: boolean,\n\tisAdmin: boolean,\n\tisCloud: boolean,\n\tinfrastructureForm: {\n\t\tid: string,\n\t\tsecCode: string,\n\t},\n};\n\nexport class LicenseButton\n{\n\tstatic #options: LicenseButtonOptions;\n\tstatic #buttonWrapper: HTMLElement;\n\tstatic #cache: BaseCache<any> = new MemoryCache();\n\n\tstatic init(options: LicenseButtonOptions): void\n\t{\n\t\tthis.#options = options;\n\t\tthis.#buttonWrapper = document.querySelector('[data-id=\"licenseWidgetWrapper\"]');\n\t\tthis.#setEventHandlers();\n\n\t\tif (this.#options.isCloud && this.#options.ordersAwaitingPayment > 0)\n\t\t{\n\t\t\tthis.#setCounterValue(this.#options.ordersAwaitingPayment);\n\t\t}\n\n\t\tEvent.bind(this.#buttonWrapper, 'click', () => {\n\t\t\tEvent.unbindAll(this.#buttonWrapper);\n\t\t\tthis.#getWidgetLoader()\n\t\t\t\t.createSkeletonFromConfig(options.skeleton)\n\t\t\t\t.show();\n\t\t\tRuntime.loadExtension([this.#getExtensionWidgetName()]).then(() => {\n\t\t\t\tthis.#showWidget();\n\t\t\t}).catch(() => {});\n\t\t});\n\t}\n\n\tstatic #getExtensionWidgetName(): string\n\t{\n\t\tif (this.#options.isCloud)\n\t\t{\n\t\t\treturn 'bitrix24.license-widget';\n\t\t}\n\n\t\treturn 'intranet.license-widget';\n\t}\n\n\tstatic #showWidget(): void\n\t{\n\t\tthis.#getContent().then((response) => {\n\t\t\tthis.#getWidgetLoader().clearBeforeInsertContent();\n\t\t\tlet licenseData = null;\n\n\t\t\tif (this.#options.isCloud)\n\t\t\t{\n\t\t\t\tlicenseData = response.data;\n\t\t\t\tlicenseData.loader = this.#getWidgetLoader().getPopup();\n\t\t\t\tlicenseData.wrapper = this.#buttonWrapper;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlicenseData = {\n\t\t\t\t\tloader: this.#getWidgetLoader().getPopup(),\n\t\t\t\t\tbuttonWrapper: this.#buttonWrapper,\n\t\t\t\t\tdata: response.data,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.#getWidget().setOptions(licenseData).show();\n\t\t\tEvent.bind(this.#buttonWrapper, 'click', () => {\n\t\t\t\tthis.#getWidget().show();\n\t\t\t});\n\t\t}).catch(() => {});\n\t}\n\n\tstatic #getWidget(): IntranetLicenseWidget | Bitrix24LicenseWidget\n\t{\n\t\treturn this.#cache.remember('widget', () => {\n\t\t\tif (this.#options.isCloud)\n\t\t\t{\n\t\t\t\treturn Bitrix24LicenseWidget.getInstance();\n\t\t\t}\n\n\t\t\treturn IntranetLicenseWidget.getInstance();\n\t\t});\n\t}\n\n\tstatic #getWidgetLoader(): WidgetLoader\n\t{\n\t\treturn this.#cache.remember('widgetLoader', () => {\n\t\t\treturn new WidgetLoader({\n\t\t\t\tbindElement: this.#buttonWrapper,\n\t\t\t\twidth: 374,\n\t\t\t\tid: 'bx-license-header-popup',\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getContent(): Promise\n\t{\n\t\treturn this.#cache.remember('content', () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (this.#options.isCloud)\n\t\t\t\t{\n\t\t\t\t\tajax.runComponentAction('bitrix:bitrix24.license.widget', 'getData', {\n\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t})\n\t\t\t\t\t\t.then((response) => resolve(response))\n\t\t\t\t\t\t.catch((response) => reject(response))\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tajax.runAction('intranet.license.widget.getContent')\n\t\t\t\t\t\t.then((response) => resolve(response))\n\t\t\t\t\t\t.catch((response) => reject(response))\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getCounter(): Counter\n\t{\n\t\treturn this.#cache.remember('counter', () => {\n\t\t\treturn new Counter({\n\t\t\t\tcolor: CounterColor.DANGER,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: CounterStyle.FILLED_ALERT,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('counter-wrapper', () => {\n\t\t\treturn this.#buttonWrapper.querySelector('.air-header-button__counter');\n\t\t});\n\t}\n\n\tstatic #setCounterValue(value: number): void\n\t{\n\t\tif (value < 1)\n\t\t{\n\t\t\tthis.#getCounter().destroy();\n\t\t\tthis.#cache.delete('counter');\n\t\t}\n\n\t\tif (value > 0 && this.#getCounterWrapper())\n\t\t{\n\t\t\tthis.#getCounter().update(value);\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\t}\n\n\tstatic #setEventHandlers(): void\n\t{\n\t\tif (this.#options.isCloud && this.#options.isSidePanelDemoLicense)\n\t\t{\n\t\t\tBX.SidePanel.Instance.bindAnchors({\n\t\t\t\trules: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcondition: [\n\t\t\t\t\t\t\t/\\/settings\\/license_demo.php/,\n\t\t\t\t\t\t],\n\t\t\t\t\t\thandler(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tFeaturePromotersRegistry.getPromoter({ code: 'limit_demo' }).show();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\tif (this.#options.isCloud && this.#options.isAdmin)\n\t\t{\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'bitrix24',\n\t\t\t\tcommand: 'updateCountOrdersAwaitingPayment',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tEventEmitter.emit('BX.Bitrix24.Orders:updateOrdersAwaitingPayment', new BaseEvent({\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcounter: Number(params.count),\n\t\t\t\t\t\t},\n\t\t\t\t\t}));\n\n\t\t\t\t\tif (params.count > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#setCounterValue(Number(params.count));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'Bitrix24InfrastructureSlider:show', this.#showInfrastructureSlider.bind(this));\n\t\t}\n\t}\n\n\tstatic #showInfrastructureSlider(): void\n\t{\n\t\tconst params = this.#options.infrastructureForm;\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\t'bx-infrastructure-slider',\n\t\t\t{\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn `<script data-b24-form=\"inline/${params.id}/${params.secCode}\" data-skip-moving=\"true\"></script>`;\n\t\t\t\t},\n\t\t\t\twidth: 664,\n\t\t\t\tloader: 'default-loader',\n\t\t\t\tcacheable: false,\n\t\t\t\tcloseByEsc: false,\n\t\t\t\tdata: { rightBoundary: 0 },\n\t\t\t\tevents: {\n\t\t\t\t\tonOpen: () => {\n\t\t\t\t\t\t(function(w, d, u) {\n\t\t\t\t\t\t\tconst s = d.createElement('script');\n\t\t\t\t\t\t\ts.async = true;\n\t\t\t\t\t\t\ts.src = `${u}?${Date.now() / 180_000 | 0}`;\n\t\t\t\t\t\t\tconst h = d.getElementsByTagName('script')[0];\n\t\t\t\t\t\t\th.parentNode.insertBefore(s, h);\n\t\t\t\t\t\t})(window, document, `https://bitrix24.team/upload/crm/form/loader_${params.id}_${params.secCode}.js`);\n\t\t\t\t\t},\n\t\t\t\t\tonOpenComplete: () => {\n\t\t\t\t\t\ttop.addEventListener('b24:form:send:success', (event) => {\n\t\t\t\t\t\t\tif (event.detail.object.identification.id === params.id)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tajax.runComponentAction('bitrix:bitrix24.license.widget', 'setOptionWaitingInfrastructure', {\n\t\t\t\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t}\n}\n","import { BaseCache, MemoryCache } from 'main.core.cache';\nimport { ajax, Event, Runtime, Type, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { WidgetLoader } from 'intranet.widget-loader';\nimport { InvitationWidget } from 'intranet.invitation-widget';\nimport {Counter, CounterStyle} from 'ui.cnt';\n\ntype InvitationButtonOptions = {\n\tskeleton: Object,\n\tcounterId: string,\n\tinvitationCounter: number,\n\tshouldShowStructureCounter: boolean,\n};\n\nexport class InvitationButton\n{\n\tstatic #buttonWrapper: HTMLElement;\n\tstatic #cache: BaseCache<any> = new MemoryCache();\n\tstatic #options: InvitationButtonOptions;\n\n\tstatic init(options: InvitationButtonOptions): void\n\t{\n\t\tthis.#options = options;\n\t\tthis.#buttonWrapper = document.querySelector('[data-id=\"invitationButton\"]');\n\n\t\tEvent.bind(this.#buttonWrapper, 'click', () => {\n\t\t\tEvent.unbindAll(this.#buttonWrapper);\n\t\t\tthis.#getWidgetLoader()\n\t\t\t\t.createSkeletonFromConfig(options.skeleton)\n\t\t\t\t.show();\n\t\t\tRuntime.loadExtension(['intranet.invitation-widget']).then(() => {\n\t\t\t\tthis.#showWidget();\n\t\t\t}).catch(() => {});\n\t\t});\n\n\t\tif (this.#options.invitationCounter > 0)\n\t\t{\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\n\t\tthis.#setEventHandlers();\n\t}\n\n\tstatic #showWidget(): void\n\t{\n\t\tthis.#getContent().then((response) => {\n\t\t\tthis.#getWidgetLoader().clearBeforeInsertContent();\n\t\t\tInvitationWidget.getInstance().setOptions({\n\t\t\t\tbuttonWrapper: this.#buttonWrapper,\n\t\t\t\tloader: this.#getWidgetLoader().getPopup(),\n\t\t\t\t...response.data,\n\t\t\t}).show();\n\t\t\tEvent.bind(this.#buttonWrapper, 'click', () => {\n\t\t\t\tInvitationWidget.getInstance().show();\n\t\t\t});\n\t\t}).catch(() => {});\n\t}\n\n\tstatic #getWidgetLoader(): WidgetLoader\n\t{\n\t\treturn this.#cache.remember('widgetLoader', () => {\n\t\t\treturn new WidgetLoader({\n\t\t\t\tbindElement: this.#buttonWrapper,\n\t\t\t\twidth: 350,\n\t\t\t\tid: 'bx-invitation-header-popup',\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getContent(): Promise\n\t{\n\t\treturn this.#cache.remember('content', () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tajax.runAction('intranet.invitationwidget.getData', {\n\t\t\t\t\tdata: {},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\theaderPopup: 'Y',\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t\t.then((response) => resolve(response))\n\t\t\t\t\t.catch((response) => reject(response))\n\t\t\t\t;\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #setEventHandlers(): void\n\t{\n\t\tEventEmitter.subscribeOnce('HR.company-structure:first-popup-showed', this.#onFirstWatchNewStructure.bind(this));\n\t\tEventEmitter.subscribe('onPullEvent-main', (event) => {\n\t\t\tconst [command, params] = event.getCompatData();\n\n\t\t\tif (command === 'user_counter' && params[Loc.getMessage('SITE_ID')])\n\t\t\t{\n\t\t\t\tconst value = params[Loc.getMessage('SITE_ID')][this.#options.counterId];\n\n\t\t\t\tif (value > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.#onReceiveCounterValue(value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic #onReceiveCounterValue(value): void\n\t{\n\t\tif (this.#options.shouldShowStructureCounter)\n\t\t{\n\t\t\tvalue++;\n\t\t}\n\n\t\tthis.#getCounter().update(value);\n\t\tthis.#options.invitationCounter = value;\n\n\t\tif (value > 0)\n\t\t{\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#getCounter().destroy();\n\t\t\tthis.#cache.delete('counter');\n\t\t}\n\t}\n\n\tstatic #getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('counter-wrapper', () => {\n\t\t\treturn this.#buttonWrapper.querySelector('.invitation-widget-counter');\n\t\t});\n\t}\n\n\tstatic #getCounter(): Counter\n\t{\n\t\treturn this.#cache.remember('counter', () => {\n\t\t\treturn new Counter({\n\t\t\t\tvalue: this.#getCounterValue(),\n\t\t\t\tcolor: Counter.Color.DANGER,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: CounterStyle.FILLED_ALERT,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getCounterValue(): number\n\t{\n\t\tlet counterValue = Number(this.#options.invitationCounter);\n\t\tif (this.#options.shouldShowStructureCounter ?? false)\n\t\t{\n\t\t\tcounterValue++;\n\t\t}\n\n\t\treturn counterValue;\n\t}\n\n\tstatic #onFirstWatchNewStructure(): void\n\t{\n\t\tlet value = this.#getCounter().value;\n\n\t\tif (!Type.isNumber(value))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.#options.shouldShowStructureCounter)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvalue--;\n\t\tthis.#options.shouldShowStructureCounter = false;\n\t\tthis.#getCounter().update(value);\n\t\tthis.#options.invitationCounter = value;\n\n\t\tif (value > 0)\n\t\t{\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#getCounter().destroy();\n\t\t\tthis.#cache.delete('counter');\n\t\t}\n\t}\n}\n","import { Tag, Dom, Event, Runtime } from 'main.core';\nimport { type Popup as PopupInstance, type PopupOptions } from 'main.popup';\n\nimport { getBackUrl } from './helpers';\n\nimport '../css/language-switcher.css';\n\ntype LanguageList = {\n\t[languageCode: string]: LanguageListItem[];\n}\n\ntype LanguageListItem = {\n\tNAME: string;\n\tIS_BETA: boolean;\n};\n\nexport class LanguageSwitcher\n{\n\t#popup: ?PopupInstance;\n\n\tasync showLanguageListPopup(bindElement: HTMLElement, languages: LanguageList): void\n\t{\n\t\tif (!this.#popup)\n\t\t{\n\t\t\tawait this.#initPopup(bindElement, languages);\n\t\t}\n\n\t\tif (this.#popup.isShown())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#popup.show();\n\t}\n\n\tasync #initPopup(bindElement: HTMLElement, languages: LanguageList): PopupInstance\n\t{\n\t\tconst windowScrollHandler = () => {\n\t\t\tthis.hideLanguageListPopup();\n\t\t};\n\n\t\tconst { Popup } = await Runtime.loadExtension('main.popup');\n\n\t\tconst popupOptions: PopupOptions = {\n\t\t\tbindElement,\n\t\t\tautoHide: true,\n\t\t\tcloseByEcs: true,\n\t\t\tcachable: false,\n\t\t\tcontent: this.#renderPopupContent(languages),\n\t\t\tevents: {\n\t\t\t\tonPopupClose: () => {\n\t\t\t\t\tEvent.unbind(window, 'scroll', windowScrollHandler);\n\t\t\t\t\tthis.#popup.destroy();\n\t\t\t\t\tthis.#popup = null;\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tthis.#popup = new Popup(popupOptions);\n\n\t\tEvent.bind(window, 'scroll', windowScrollHandler);\n\t}\n\n\thideLanguageListPopup(): void\n\t{\n\t\tthis.#popup?.close();\n\t}\n\n\tswitchPortalLanguage(languageCode: string): void\n\t{\n\t\twindow.location.href = `/auth/?user_lang=${languageCode}&backurl=${getBackUrl()}`;\n\t}\n\n\t#renderPopupContent(languages: LanguageList): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"intranet__language-popup_list\"></div>`;\n\n\t\tObject.entries(languages).forEach(([languageCode: string, languageItem: LanguageListItem]) => {\n\t\t\tconst languageItemElement = Tag.render`\n\t\t\t\t<div class=\"intranet__language-popup_language-item\">\n\t\t\t\t\t<span class=\"intranet__language-popup_language-item-name\">${languageItem.NAME}</span>\n\t\t\t\t\t<span class=\"intranet__language-popup_language-beta\">${languageItem.IS_BETA ? ', beta' : ''}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tEvent.bind(languageItemElement, 'click', () => {\n\t\t\t\tthis.switchPortalLanguage(languageCode);\n\t\t\t});\n\n\t\t\tDom.append(languageItemElement, container);\n\t\t});\n\n\t\treturn container;\n\t}\n}\n\nexport const languageSwitcher = new LanguageSwitcher();\n","import { Reflection } from 'main.core';\nimport { PartnerForm } from './js/partner-form/partner-form';\nimport { SiteTemplate } from './js/site-template';\nimport { SearchTitle } from './js/header/search-title';\nimport { AvatarButton } from './js/header/avatar-button';\nimport { LicenseButton } from './js/header/license-button';\nimport { InvitationButton } from './js/header/invitation-button';\n\nimport { languageSwitcher } from './js/language-switcher';\nimport { showPartnerConnectForm } from './js/partner-form/show-partner-connect-form';\n\nimport './css/index';\n\nconst Template = new SiteTemplate();\nexport {\n\tlanguageSwitcher,\n\tPartnerForm,\n\tTemplate,\n\tSearchTitle,\n\tInvitationButton,\n\tLicenseButton,\n\tAvatarButton,\n};\n\n// Compatibility\n/**\n * @deprecated\n */\nwindow.showPartnerForm = showPartnerConnectForm;\n\n/**\n * @deprecated\n */\nwindow.B24 = {\n\t/**\n\t * @deprecated\n\t */\n\tlicenseInfoPopup: {\n\t\tshow(popupId, title, content, showDemoButton)\n\t\t{\n\t\t\tconst LicenseInfoPopup = Reflection.getClass('BX.Bitrix24.LicenseInfoPopup');\n\t\t\tif (LicenseInfoPopup)\n\t\t\t{\n\t\t\t\tLicenseInfoPopup.show(popupId, title, content, showDemoButton);\n\t\t\t}\n\t\t},\n\t},\n\n\t/**\n\t * @deprecated\n\t */\n\tupdateCounters(counters, send)\n\t{\n\t\tconst LeftMenu = Reflection.getClass('BX.Intranet.LeftMenu');\n\t\tif (LeftMenu)\n\t\t{\n\t\t\tLeftMenu.updateCounters(counters, send);\n\t\t}\n\t},\n};\n"],"names":["showPartnerConnectForm","params","Loc","setMessage","messages","showPartnerFormPopup","titleBar","getMessage","sendButtonText","options","partnerName","partnerUrl","Popup","Button","ButtonColor","Promise","all","Runtime","loadExtension","popupOptions","className","autoHide","cacheable","zIndex","offsetLeft","offsetTop","width","height","overlay","draggable","restrict","closeByEsc","closeIcon","content","encodeURI","buttons","color","SUCCESS","text","onclick","button","setTimeout","setClocking","showIntegratorApplicationForm","popup","show","Form","open","id","parseInt","Math","random","portalUri","forms","zones","lang","sec","defaultForm","showPartnerOrderForm","Type","isObject","noAllPaddings","borderRadius","contentBorderRadius","disableScroll","min","window","innerHeight","contentColor","contentNoPaddings","events","onPopupFirstShow","w","d","u","s","createElement","async","src","Date","now","h","getElementsByTagName","parentNode","insertBefore","document","showHelper","Helper","Reflection","getClass","PartnerForm","showConnectForm","showIntegrationOrderForm","ChatMenu","constructor","EventEmitter","subscribe","bind","getMenu","menuManager","getById","event","data","getData","entityId","target","closest","Public","openNavigationItem","menu","fromItemId","from","name","toLowerCase","toItemId","to","unsetActive","setActive","closeMoreMenu","counters","counterId","counterValue","Object","entries","updateCounter","getBackUrl","backUrl","location","pathname","query","getQueryString","length","ignoredParams","search","slice","isStringFilled","vars","split","checkedIgnoredParams","isArray","result","variable","pair","equal","indexOf","key","value","includes","Composite","MemoryCache","isEnabled","isUndefined","frameRequestStart","isReady","BX","frameCache","frameDataInserted","frameRequestFail","showLoader","page","getStubContainer","querySelector","getLoaderContainer","remember","Tag","render","getLiveFeedSkeleton","getLiveFeedSidebar","getLiveFeedWorkArea","skeleton","container","stub","Dom","append","map","stream","console","error","top","encodeURIComponent","reason","status","getCompatData","redirectUrl","PULL","moduleId","command","callback","localStorage","get","set","Ajax","url","method","processData","skipBxHeader","emulateOnload","floor","RightBar","redraw","Event","passive","goTopButton","addClass","getContainer","removeClass","ready","rightBar","pageYOffset","dataset","lockRedraw","scrollWidth","documentElement","clientWidth","getElementById","Header","Footer","hide","GoTopButton","setEventNamespace","isShown","hasClass","emit","clientHeight","scrollTo","behavior","flag","setIcon","ButtonIcon","ANGLE_DOWN","ANGLE_UP","ButtonManager","createFromNode","CollaborationMenu","counter","decrement","item","getItemById","itemData","getItemData","COUNTER","COUNTER_ID","max","DEFAULT_SLIDER_BLUR","IM_SLIDER_BLUR","SiteTemplate","getRightBar","getHeader","getFooter","getComposite","getChatMenu","getCollaborationMenu","isNumber","maxWidth","config","JCClock","setOptions","centerXInline","centerX","centerYInline","centerY","minuteLength","hourLength","popupHeight","inaccuracy","cancelCheckClick","slider","forceBgColor","isSelfContained","style","frameDocument","getFrameWindow","body","bgColor","bgImage","foreBgColor","sliderEvent","getSlider","isLoaded","previousSlider","SidePanel","Instance","getPreviousSlider","getOverlay","isMessenger","getUrl","startsWith","getOpenSlidersCount","requestAnimationFrame","iframeMode","href","Browser","isMobile","then","exports","MobilePopup","catch","referrer","origin","AppLayout","placementInterface","initializePlacement","prototype","cb","isPlainObject","param","keys","SearchTitle","containerId","buttonId","inputId","searchOptions","disabled","focus","close","clearSearch","closeResult","SearchTitleClass","relatedTarget","AvatarButton","init","signDocumentsCounter","workTimeAvailable","unbindAll","createSkeletonFromConfig","response","clearBeforeInsertContent","AvatarWidget","getInstance","buttonWrapper","loader","getPopup","WidgetLoader","bindElement","useAngle","fixed","resolve","reject","ajax","runAction","renderTo","Counter","Color","DANGER","size","Size","MEDIUM","useAirDesign","CounterStyle","FILLED_ALERT","WorkTimeStateIcon","state","workTimeState","action","workTimeAction","signDocumentsPullEventName","needActionCount","update","destroy","avatar","eventUserId","userId","LicenseButton","isCloud","ordersAwaitingPayment","licenseData","wrapper","Bitrix24LicenseWidget","IntranetLicenseWidget","runComponentAction","mode","CounterColor","delete","isSidePanelDemoLicense","bindAnchors","rules","condition","handler","FeaturePromotersRegistry","getPromoter","code","stopPropagation","preventDefault","isAdmin","BaseEvent","Number","count","GLOBAL_TARGET","infrastructureForm","contentCallback","secCode","rightBoundary","onOpen","onOpenComplete","addEventListener","detail","object","identification","InvitationButton","invitationCounter","InvitationWidget","analyticsLabel","headerPopup","subscribeOnce","shouldShowStructureCounter","LanguageSwitcher","showLanguageListPopup","languages","hideLanguageListPopup","switchPortalLanguage","languageCode","windowScrollHandler","closeByEcs","cachable","onPopupClose","unbind","forEach","languageItem","languageItemElement","NAME","IS_BETA","languageSwitcher","Template","showPartnerForm","B24","licenseInfoPopup","popupId","title","showDemoButton","LicenseInfoPopup","updateCounters","send","LeftMenu"],"mappings":"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"}