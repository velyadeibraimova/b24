this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(e,s,t,a,i,l,r,o,n,d,c,b,v,p,u){"use strict";async function h(e){u.Loc.setMessage(e.messages);await _({...e,titleBar:u.Loc.getMessage("BX24_PARTNER_TITLE"),sendButtonText:u.Loc.getMessage("BX24_BUTTON_SEND")})}async function _(e){const s=e.titleBar;const t=e.sendButtonText;const a=e.partnerName;const i=e.partnerUrl;const[{Popup:l},{Button:r,ButtonColor:o}]=await Promise.all([u.Runtime.loadExtension("main.popup"),u.Runtime.loadExtension("ui.buttons")]);const n={className:"bitrix24-partner__popup",autoHide:false,cacheable:false,zIndex:0,offsetLeft:0,offsetTop:0,width:540,height:350,overlay:true,draggable:{restrict:true},closeByEsc:true,titleBar:s,closeIcon:true,content:`\n\t\t\t<div class="bitrix24-partner__popup-content">\n\t\t\t\t<div class="bitrix24-partner__popup-content_title">${u.Loc.getMessage("PARTNER_TITLE_FOR_NAME")}</div>\n\t\t\t\t<div class="bitrix24-partner__popup-content_main">\n\t\t\t\t\t<div class="bitrix24-partner__popup-content_name">${a}</div>\n\t\t\t\t\t<a class="bitrix24-partner__popup-content_link" href="${encodeURI(i)}" target="_blank">${u.Loc.getMessage("PARTNER_LINK_NAME_MORE")}</a>\n\t\t\t\t</div>\n\t\t\t\t<div class="bitrix24-partner__popup-content_desc">${u.Loc.getMessage("PARTNER_POPUP_DESCRIPTION_BOTTOM")}</div>\n\t\t\t</div>\n\t\t`,buttons:[new r({color:o.SUCCESS,text:t,onclick:async e=>{setTimeout((()=>{e.setClocking(true)}),200);await P();e.setClocking(false)}})]};const d=new l(n);d.show()}async function P(){const{Form:e}=await u.Runtime.loadExtension("ui.feedback.form");e.open({id:`intranet-license-partner-form-${parseInt(Math.random()*1e3,10)}`,portalUri:"https://bitrix24.team",forms:[{zones:["de"],id:883,lang:"de",sec:"a12ty8"},{zones:["com","in","eu","uk"],id:735,lang:"en",sec:"vlhmlv"},{zones:["es","co","mx"],id:900,lang:"es",sec:"w3qmwq"},{zones:["com.br"],id:901,lang:"pt",sec:"prnm4x"},{zones:["cn/tc"],id:902,lang:"cn-tc",sec:"z8isyg"},{zones:["cn"],id:903,lang:"cn-sc",sec:"hsxnam"},{zones:["pl"],id:904,lang:"pl",sec:"2ph9ph"},{zones:["it"],id:905,lang:"it",sec:"2r3owa"},{zones:["fr"],id:906,lang:"fr",sec:"jt2fii"},{zones:["com.tr"],id:907,lang:"tr",sec:"ovevp8"},{zones:["id"],id:908,lang:"id",sec:"7kq7v2"},{zones:["com/my"],id:909,lang:"ms",sec:"kmncmj"},{zones:["com/th"],id:910,lang:"th",sec:"sknbp9"},{zones:["vn"],id:911,lang:"vn",sec:"a573fy"},{zones:["jp"],id:912,lang:"jp",sec:"3purdq"},{zones:["ru"],id:2122,lang:"ru",sec:"8vralr"},{zones:["kz"],id:2128,lang:"ru",sec:"054phh"},{zones:["by"],id:2129,lang:"ru",sec:"srs85j"}],defaultForm:{id:735,lang:"en",sec:"vlhmlv"}})}async function m(e){if(u.Type.isObject(e)===false){return}const{Popup:s}=await u.Runtime.loadExtension("main.popup");const t={id:"B24PartnerOrderForm",autoHide:true,noAllPaddings:true,zIndex:0,offsetLeft:0,offsetTop:0,overlay:true,borderRadius:"10px",contentBorderRadius:"10px",disableScroll:true,height:Math.min(window.innerHeight-60,758),width:560,draggable:{restrict:true},closeByEsc:true,contentColor:"white",contentNoPaddings:true,cacheable:false,content:`\n\t\t\t<script data-b24-form="inline/${e.id}/${e.sec}" data-skip-moving="true">\n\t\t\t\t(function(w, d,u) {\n\t\t\t\t\tvar s = d.createElement("script");\n\t\t\t\t\ts.async=true;\n\t\t\t\t\ts.src=u + "?" + (Date.now()/180000|0);\n\t\t\t\t\tvar h = d.getElementsByTagName("script")[0];\n\t\t\t\t\th.parentNode.insertBefore(s,h);\n\t\t\t\t})(window,document,"https://bitrix24.team/upload/crm/form/loader_${e.id}_${e.sec}.js")\n\t\t\t<\/script>\n\t\t`,events:{onPopupFirstShow(){(function(e,s,t){var a=s.createElement("script");a.async=true;a.src=t+"?"+(Date.now()/18e4|0);var i=s.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i)})(window,document,`https://bitrix24.team/upload/crm/form/loader_${e.id}_${e.sec}.js`)}}};const a=new s(t);a.show()}const f=async()=>{await u.Runtime.loadExtension("helper");const e=u.Reflection.getClass("BX.Helper");e.show("redirect=detail&code=20267044")};class L{static async showConnectForm(e){return h(e)}static showIntegrationOrderForm(e){return m(e)}static async showHelper(){return f()}}var F=babelHelpers.classPrivateFieldLooseKey("handleChatMenuSelect");var g=babelHelpers.classPrivateFieldLooseKey("handleImLayoutChange");var B=babelHelpers.classPrivateFieldLooseKey("handleCounterUpdate");class y{constructor(){Object.defineProperty(this,B,{value:w});Object.defineProperty(this,g,{value:k});Object.defineProperty(this,F,{value:H});c.EventEmitter.subscribe("IM.Layout:onLayoutChange",babelHelpers.classPrivateFieldLooseBase(this,g)[g].bind(this));c.EventEmitter.subscribe("IM.Counters:onUpdate",babelHelpers.classPrivateFieldLooseBase(this,B)[B].bind(this));c.EventEmitter.subscribe("BX.Intranet.Bitrix24.ChatMenu:onSelect",babelHelpers.classPrivateFieldLooseBase(this,F)[F].bind(this))}getMenu(){const e=u.Reflection.getClass("BX.Main.interfaceButtonsManager");if(e){return e.getById("chat-menu")}return null}}function H(e){var s;const t=e.getData();const{id:a,entityId:i}=t;let l=(s=t.event)==null?void 0:s.target;if(l){l=l.closest(".main-buttons-item-link, .menu-popup-item")}const r=u.Reflection.getClass("BX.Messenger.Public");r==null?void 0:r.openNavigationItem({id:a,entityId:i,target:l})}function k(e){const s=e.getData();const t=this.getMenu();let a=s.from.name.toLowerCase();if(a==="market"&&s.from.entityId){a=`${a}_${s.from.entityId}`}let i=s.to.name.toLowerCase();if(i==="market"&&s.to.entityId){i=`${i}_${s.to.entityId}`}t==null?void 0:t.unsetActive(a);t==null?void 0:t.setActive(i);t==null?void 0:t.closeMoreMenu()}function w(e){const s=e.getData();const t=this.getMenu();for(const[e,a]of Object.entries(s)){t==null?void 0:t.updateCounter(e,a)}}function C(){const e=window.location.pathname;const s=E(["logout","login","back_url_pub","user_lang"]);return e+(s.length>0?`?${s}`:"")}function E(e){const s=window.location.search.slice(1);if(!u.Type.isStringFilled(s)){return""}const t=s.split("&");const a=u.Type.isArray(e)?e:[];let i="";for(const e of t){const s=e.split("=");const t=e.indexOf("=");const l=s[0];const r=u.Type.isStringFilled(s[1])?s[1]:false;if(!a.includes(l)){if(i!==""){i+="&"}i+=l+(t===-1?"":"=")+(r===false?"":r)}}return i}let O=e=>e,j,I,x,S;var K=babelHelpers.classPrivateFieldLooseKey("refs");var T=babelHelpers.classPrivateFieldLooseKey("showLoader");var D=babelHelpers.classPrivateFieldLooseKey("getPageSkeleton");var R=babelHelpers.classPrivateFieldLooseKey("bindEvents");class A{constructor(){Object.defineProperty(this,R,{value:N});Object.defineProperty(this,D,{value:W});Object.defineProperty(this,T,{value:M});Object.defineProperty(this,K,{writable:true,value:new d.MemoryCache});if(this.isEnabled()){babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}}isEnabled(){return!u.Type.isUndefined(window.frameRequestStart)}isReady(){var e,s;return((e=window.BX)==null?void 0:(s=e.frameCache)==null?void 0:s.frameDataInserted)===true||!u.Type.isUndefined(window.frameRequestFail)}showLoader(){const e=window.location.pathname;if(e==="/stream/"||e==="/stream/index.php"||e==="/index.php"){babelHelpers.classPrivateFieldLooseBase(this,T)[T]("stream")}else{setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,T)[T]()}),500)}}getStubContainer(){return document.querySelector("#page-area")}getLoaderContainer(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("loader",(()=>u.Tag.render(j||(j=O`
				<div class="composite-skeleton-container">
					<div class="composite-loader-container">
						<svg class="composite-loader-circular" viewBox="25 25 50 50">
							<circle class="composite-loader-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10" />
						</svg>
					</div>
				</div>
			`))))}getLiveFeedSkeleton(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("feed-skeleton",(()=>u.Tag.render(I||(I=O`
				<div class="page top-menu-mode start-page no-background no-all-paddings no-page-header">
					<div class="page__workarea">
						<div class="page__sidebar">${0}</div>
						<main class="page__workarea-content">${0}</main>
					</div>
				</div>
			`),this.getLiveFeedSidebar(),this.getLiveFeedWorkArea())))}getLiveFeedSidebar(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("feed-sidebar",(()=>u.Tag.render(x||(x=O`
				<div class="skeleton__white-bg-element skeleton__sidebar skeleton__intranet-ustat">
					<div class="skeleton__graph-circle"></div>
					<div class="skeleton__graph-right">
						<div class="skeleton__graph-right_top">
							<div class="skeleton__graph-right_top-circle --first"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
						</div>
						<div class="skeleton__graph-right_bottom">
							<div class="skeleton__graph-right_bottom-line"></div>
							<div class="skeleton__graph-right_bottom-line"></div>
						</div>
					</div>
				</div>
				
				<div class="skeleton__white-bg-element skeleton__sidebar">
					<div class="skeleton__sidebar-header">
						<div class="skeleton__sidebar-header_line"></div>
						<div class="skeleton__sidebar-header_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__sidebar">
					<div class="skeleton__sidebar-header">
						<div class="skeleton__sidebar-header_line"></div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__sidebar">
					<div class="skeleton__sidebar-header">
						<div class="skeleton__sidebar-header_line"></div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
				</div>
			`))))}getLiveFeedWorkArea(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("feed-work-area",(()=>u.Tag.render(S||(S=O`
				<div class="skeleton__white-bg-element skeleton__feed-wrap">
					<div class="skeleton__feed-wrap_header">
						<div class="skeleton__feed-wrap_header-link --long"></div>
						<div class="skeleton__feed-wrap_header-link --one"></div>
						<div class="skeleton__feed-wrap_header-link --two"></div>
						<div class="skeleton__feed-wrap_header-link --one"></div>
						<div class="skeleton__feed-wrap_header-link --two"></div>
					</div>
					<div class="skeleton__feed-wrap_header-content">
						<div class="skeleton__feed-wrap_header-text"></div>
					</div>
				</div>
				<div class="skeleton__title-block">
					<div class="skeleton__title-block_text"></div>
				</div>
				<div class="skeleton__white-bg-element skeleton__feed-item">
					<div class="skeleton__feed-item_user-icon"></div>
					<div class="skeleton__feed-item_content">
						<div class="skeleton__feed-item_main">
							<div class="skeleton__feed-item_text --name"></div>
							<div class="skeleton__feed-item_date"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text --short"></div>
						</div>
						<div class="skeleton__feed-item_nav">
							<div class="skeleton__feed-item_nav-line --one"></div>
							<div class="skeleton__feed-item_nav-line --two"></div>
							<div class="skeleton__feed-item_nav-line --three"></div>
							<div class="skeleton__feed-item_nav-line --four"></div>
						</div>
						<div class="skeleton__feed-item_like">
							<div class="skeleton__feed-item_like-icon"></div>
							<div class="skeleton__feed-item_like-name"></div>
						</div>
						<div class="skeleton__feed-item_comment">
							<div class="skeleton__feed-item_comment-icon"></div>
							<div class="skeleton__feed-item_comment-block">
								<div class="skeleton__feed-item_comment-text"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__feed-item">
					<div class="skeleton__feed-item_user-icon"></div>
					<div class="skeleton__feed-item_content">
						<div class="skeleton__feed-item_main">
							<div class="skeleton__feed-item_text --name"></div>
							<div class="skeleton__feed-item_date"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text --short"></div>
						</div>
						<div class="skeleton__feed-item_nav">
							<div class="skeleton__feed-item_nav-line --one"></div>
							<div class="skeleton__feed-item_nav-line --two"></div>
							<div class="skeleton__feed-item_nav-line --three"></div>
							<div class="skeleton__feed-item_nav-line --four"></div>
						</div>
						<div class="skeleton__feed-item_like">
							<div class="skeleton__feed-item_like-icon"></div>
							<div class="skeleton__feed-item_like-name"></div>
						</div>
						<div class="skeleton__feed-item_comment">
							<div class="skeleton__feed-item_comment-icon"></div>
							<div class="skeleton__feed-item_comment-block">
								<div class="skeleton__feed-item_comment-text"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__feed-item">
					<div class="skeleton__feed-item_user-icon"></div>
					<div class="skeleton__feed-item_content">
						<div class="skeleton__feed-item_main">
							<div class="skeleton__feed-item_text --name"></div>
							<div class="skeleton__feed-item_date"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text --short"></div>
						</div>
						<div class="skeleton__feed-item_nav">
							<div class="skeleton__feed-item_nav-line --one"></div>
							<div class="skeleton__feed-item_nav-line --two"></div>
							<div class="skeleton__feed-item_nav-line --three"></div>
							<div class="skeleton__feed-item_nav-line --four"></div>
						</div>
						<div class="skeleton__feed-item_like">
							<div class="skeleton__feed-item_like-icon"></div>
							<div class="skeleton__feed-item_like-name"></div>
						</div>
						<div class="skeleton__feed-item_comment">
							<div class="skeleton__feed-item_comment-icon"></div>
							<div class="skeleton__feed-item_comment-block">
								<div class="skeleton__feed-item_comment-text"></div>
							</div>
						</div>
					</div>
				</div>
			`))))}}function M(e=null){if(this.isReady()){return}const s=babelHelpers.classPrivateFieldLooseBase(this,D)[D](e);const t=this.getStubContainer();const a=s!=null?s:this.getLoaderContainer();if(!t||a.parentNode){return}u.Dom.append(a,t)}function W(e){const s={stream:()=>this.getLiveFeedSkeleton()};if(s[e]){return s[e]()}return null}function N(){c.EventEmitter.subscribe("onFrameDataRequestFail",(()=>{console.error("Composite ajax request failed");top.location=`/auth/?backurl=${encodeURIComponent(C())}`}));c.EventEmitter.subscribe("onAjaxFailure",(e=>{const[s,t]=e.getCompatData();const a=`/auth/?backurl=${C()}`;if(this.isEnabled()&&(s==="auth"||s==="status"&&t===401)){console.error("Auth ajax request failed",s,t);top.location=a}}));if(n.PULL){n.PULL.subscribe({moduleId:"main",command:"composite-cache-up",callback:()=>{setTimeout((()=>{const e=BX.localStorage.get("ajax-composite-cache-up-lock");if(!e){BX.localStorage.set("ajax-composite-cache-up-lock","EXECUTE",2);u.ajax({url:"/blank.php",method:"GET",processData:false,skipBxHeader:true,emulateOnload:false})}}),Math.floor(Math.random()*500))}})}}var X=babelHelpers.classPrivateFieldLooseKey("isTransparentMode");var $=babelHelpers.classPrivateFieldLooseKey("isScrollMode");var U=babelHelpers.classPrivateFieldLooseKey("scrollModeThreshold");var z=babelHelpers.classPrivateFieldLooseKey("goTopButton");class q{constructor(e){Object.defineProperty(this,X,{writable:true,value:false});Object.defineProperty(this,$,{writable:true,value:false});Object.defineProperty(this,U,{writable:true,value:window.innerHeight});Object.defineProperty(this,z,{writable:true,value:void 0});const s=this.redraw.bind(this);u.Event.bind(window,"scroll",s,{passive:true});u.Event.bind(window,"resize",s);babelHelpers.classPrivateFieldLooseBase(this,U)[U]=window.innerHeight;babelHelpers.classPrivateFieldLooseBase(this,z)[z]=e.goTopButton;babelHelpers.classPrivateFieldLooseBase(this,z)[z].subscribe("show",(()=>{u.Dom.addClass(this.getContainer(),"--show-scroll-btn")}));babelHelpers.classPrivateFieldLooseBase(this,z)[z].subscribe("hide",(()=>{u.Dom.removeClass(this.getContainer(),"--show-scroll-btn")}));u.Event.ready((()=>{this.redraw()}))}redraw(){const e=this.getContainer();babelHelpers.classPrivateFieldLooseBase(this,U)[U]=window.innerHeight;if(window.pageYOffset>babelHelpers.classPrivateFieldLooseBase(this,U)[U]){if(!babelHelpers.classPrivateFieldLooseBase(this,$)[$]){u.Dom.addClass(e,"--scroll-mode");babelHelpers.classPrivateFieldLooseBase(this,$)[$]=true}}else if(babelHelpers.classPrivateFieldLooseBase(this,$)[$]){u.Dom.removeClass(e,"--scroll-mode");babelHelpers.classPrivateFieldLooseBase(this,$)[$]=false}if(!e||e.dataset.lockRedraw==="true"){return}const s=document.documentElement.scrollWidth-document.documentElement.clientWidth;if(s>0){if(!babelHelpers.classPrivateFieldLooseBase(this,X)[X]){u.Dom.addClass(e,"--transparent");babelHelpers.classPrivateFieldLooseBase(this,X)[X]=true}}else if(babelHelpers.classPrivateFieldLooseBase(this,X)[X]){u.Dom.removeClass(e,"--transparent");babelHelpers.classPrivateFieldLooseBase(this,X)[X]=false}}getContainer(){return document.getElementById("right-bar")}}class G{getContainer(){return document.getElementById("header")}}class Y{constructor(){c.EventEmitter.subscribe("Kanban.Grid:onFixedModeStart",(()=>{this.hide()}))}show(){u.Dom.removeClass(this.getContainer(),"hidden")}hide(){u.Dom.addClass(this.getContainer(),"hidden")}getContainer(){return document.getElementById("air-footer")}}var V=babelHelpers.classPrivateFieldLooseKey("lastScrollOffset");var J=babelHelpers.classPrivateFieldLooseKey("isReversed");var Q=babelHelpers.classPrivateFieldLooseKey("button");var Z=babelHelpers.classPrivateFieldLooseKey("show");var ee=babelHelpers.classPrivateFieldLooseKey("hide");var se=babelHelpers.classPrivateFieldLooseKey("getButtonWrapper");var te=babelHelpers.classPrivateFieldLooseKey("bindEvents");var ae=babelHelpers.classPrivateFieldLooseKey("handleScroll");var ie=babelHelpers.classPrivateFieldLooseKey("handleButtonClick");var le=babelHelpers.classPrivateFieldLooseKey("setReversed");var re=babelHelpers.classPrivateFieldLooseKey("getButton");class oe extends c.EventEmitter{constructor(){super();Object.defineProperty(this,re,{value:he});Object.defineProperty(this,le,{value:ue});Object.defineProperty(this,ie,{value:pe});Object.defineProperty(this,ae,{value:ve});Object.defineProperty(this,te,{value:be});Object.defineProperty(this,se,{value:ce});Object.defineProperty(this,ee,{value:de});Object.defineProperty(this,Z,{value:ne});Object.defineProperty(this,V,{writable:true,value:0});Object.defineProperty(this,J,{writable:true,value:false});Object.defineProperty(this,Q,{writable:true,value:void 0});this.setEventNamespace("GoTopButton");babelHelpers.classPrivateFieldLooseBase(this,te)[te]()}isShown(){return u.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,se)[se](),"--show")}}function ne(){this.emit("show");u.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,se)[se](),"--show")}function de(){this.emit("hide");u.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,se)[se](),"--show")}function ce(){return document.getElementById("goTopButtonWrapper")}function be(){u.Event.ready((()=>{babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]();u.Event.bind(window,"scroll",(()=>{babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]()}));u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,se)[se](),"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]()}))}))}function ve(){if(window.pageYOffset>document.documentElement.clientHeight){babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]();if(babelHelpers.classPrivateFieldLooseBase(this,J)[J]){babelHelpers.classPrivateFieldLooseBase(this,le)[le](false);babelHelpers.classPrivateFieldLooseBase(this,V)[V]=0}}else if(babelHelpers.classPrivateFieldLooseBase(this,J)[J]===false){babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]()}}function pe(){if(babelHelpers.classPrivateFieldLooseBase(this,J)[J]){babelHelpers.classPrivateFieldLooseBase(this,le)[le](false);window.scrollTo({top:babelHelpers.classPrivateFieldLooseBase(this,V)[V],behavior:"instant"});babelHelpers.classPrivateFieldLooseBase(this,V)[V]=0}else{babelHelpers.classPrivateFieldLooseBase(this,le)[le](true);babelHelpers.classPrivateFieldLooseBase(this,V)[V]=window.pageYOffset;window.scrollTo({top:0,behavior:"instant"})}}function ue(e=true){babelHelpers.classPrivateFieldLooseBase(this,J)[J]=e;if(babelHelpers.classPrivateFieldLooseBase(this,J)[J]){babelHelpers.classPrivateFieldLooseBase(this,re)[re]().setIcon(t.ButtonIcon.ANGLE_DOWN)}else{babelHelpers.classPrivateFieldLooseBase(this,re)[re]().setIcon(t.ButtonIcon.ANGLE_UP)}}function he(){return babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]||t.ButtonManager.createFromNode(document.getElementById("goTopButton"))}var _e=babelHelpers.classPrivateFieldLooseKey("handleCounterUpdate");var Pe=babelHelpers.classPrivateFieldLooseKey("handleLiveFeedCounterDecrement");class me{constructor(){Object.defineProperty(this,Pe,{value:Le});Object.defineProperty(this,_e,{value:fe});c.EventEmitter.subscribe("onImUpdateCounterMessage",babelHelpers.classPrivateFieldLooseBase(this,_e)[_e].bind(this));c.EventEmitter.subscribe("onCounterDecrement",babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].bind(this))}getMenu(){const e=u.Reflection.getClass("BX.Main.interfaceButtonsManager");if(e){return e.getById("top_menu_id_collaboration")}return null}}function fe(e){const s=this.getMenu();const[t]=e.getCompatData();s==null?void 0:s.updateCounter("im-message",t)}function Le(e){const[s]=e.getCompatData();const t=this.getMenu();if(t){const e=t.getItemById("menu_live_feed");if(e){const a=t.getItemData(e);const{COUNTER:i,COUNTER_ID:l}=a;t==null?void 0:t.updateCounter(l,Math.max(0,i-s))}}}const Fe="blur(6px)";const ge="blur(10px)";const Be="18px 18px 0 0";var ye=babelHelpers.classPrivateFieldLooseKey("rightBar");var He=babelHelpers.classPrivateFieldLooseKey("header");var ke=babelHelpers.classPrivateFieldLooseKey("footer");var we=babelHelpers.classPrivateFieldLooseKey("composite");var Ce=babelHelpers.classPrivateFieldLooseKey("chatMenu");var Ee=babelHelpers.classPrivateFieldLooseKey("goTopButton");var Oe=babelHelpers.classPrivateFieldLooseKey("collaborationMenu");var je=babelHelpers.classPrivateFieldLooseKey("patchPopupMenu");var Ie=babelHelpers.classPrivateFieldLooseKey("patchJSClock");var xe=babelHelpers.classPrivateFieldLooseKey("fixSliderBorderRadius");var Se=babelHelpers.classPrivateFieldLooseKey("makeSliderBlurry");var Ke=babelHelpers.classPrivateFieldLooseKey("setSliderBlur");var Te=babelHelpers.classPrivateFieldLooseKey("resetSliderBlur");var De=babelHelpers.classPrivateFieldLooseKey("preventFromIframe");var Re=babelHelpers.classPrivateFieldLooseKey("applyUserAgentRules");var Ae=babelHelpers.classPrivateFieldLooseKey("patchRestAPI");class Me{constructor(){Object.defineProperty(this,Ae,{value:Ye});Object.defineProperty(this,Re,{value:Ge});Object.defineProperty(this,De,{value:qe});Object.defineProperty(this,Te,{value:ze});Object.defineProperty(this,Ke,{value:Ue});Object.defineProperty(this,Se,{value:$e});Object.defineProperty(this,xe,{value:Xe});Object.defineProperty(this,Ie,{value:Ne});Object.defineProperty(this,je,{value:We});Object.defineProperty(this,ye,{writable:true,value:null});Object.defineProperty(this,He,{writable:true,value:null});Object.defineProperty(this,ke,{writable:true,value:null});Object.defineProperty(this,we,{writable:true,value:null});Object.defineProperty(this,Ce,{writable:true,value:null});Object.defineProperty(this,Ee,{writable:true,value:null});Object.defineProperty(this,Oe,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,De)[De]();babelHelpers.classPrivateFieldLooseBase(this,Se)[Se]();babelHelpers.classPrivateFieldLooseBase(this,je)[je]();babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]();babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie]();babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]=new oe;babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]=new q({goTopButton:babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]});babelHelpers.classPrivateFieldLooseBase(this,He)[He]=new G;babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]=new Y;babelHelpers.classPrivateFieldLooseBase(this,we)[we]=new A;babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]=new y;babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]=new me;babelHelpers.classPrivateFieldLooseBase(this,Re)[Re]()}getRightBar(){return babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]}getHeader(){return babelHelpers.classPrivateFieldLooseBase(this,He)[He]}getFooter(){return babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]}getComposite(){return babelHelpers.classPrivateFieldLooseBase(this,we)[we]}getChatMenu(){return babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]}getCollaborationMenu(){return babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]}canUseBlurry(){return!u.Dom.hasClass(document.documentElement,"bx-integrated-gpu")}}function We(){c.EventEmitter.subscribe("BX.Main.Menu:onInit",(e=>{const{params:s}=e.getData();if(s&&u.Type.isNumber(s.maxWidth)){s.maxWidth+=10}}))}function Ne(){c.EventEmitter.subscribe("onJCClockInit",(e=>{window.JCClock.setOptions({centerXInline:83,centerX:83,centerYInline:67,centerY:79,minuteLength:31,hourLength:26,popupHeight:229,inaccuracy:15,cancelCheckClick:true})}))}function Xe(e,s=null){if(e.isSelfContained()){u.Dom.style(e.getContainer(),"background-color","#eef2f4")}else{var t;const a=e==null?void 0:(t=e.getFrameWindow())==null?void 0:t.document;if(a&&a.body){const t=u.Dom.style(a.body,"background-color");const i=u.Dom.style(a.body,"background-image");const l=t==="rgba(0, 0, 0, 0)"&&i==="none"?"#eef2f4":"rgba(0, 0, 0, 0)";u.Dom.style(e.getContainer(),"background-color",s===null?l:s)}else{u.Dom.style(e.getContainer(),"background-color",s===null?"#eef2f4":s)}}}function $e(){c.EventEmitter.subscribe("SidePanel.Slider:onOpenComplete",(e=>{const[t]=e.getData();const a=t.getSlider();if(!a.isLoaded()){babelHelpers.classPrivateFieldLooseBase(this,xe)[xe](a,"rgba(0, 0, 0, 0)")}const i=s.SidePanel.Instance.getPreviousSlider();if(i){babelHelpers.classPrivateFieldLooseBase(this,Te)[Te](i)}babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke](a)}));c.EventEmitter.subscribe("SidePanel.Slider:onClosing",(e=>{const[t]=e.getData();const a=t.getSlider();const i=s.SidePanel.Instance.getPreviousSlider();if(i){babelHelpers.classPrivateFieldLooseBase(this,Ke)[Ke](i)}babelHelpers.classPrivateFieldLooseBase(this,Te)[Te](a)}));c.EventEmitter.subscribe("SidePanel.Slider:onOpening",(()=>{if(s.SidePanel.Instance.getOpenSlidersCount()===1){u.Dom.addClass(document.body,"--ui-reset-bg-blur")}}));c.EventEmitter.subscribe("SidePanel.Slider:onClosing",(()=>{if(s.SidePanel.Instance.getOpenSlidersCount()===1){u.Dom.removeClass(document.body,"--ui-reset-bg-blur")}}));c.EventEmitter.subscribe("SidePanel.Slider:onLoad",(e=>{const[s]=e.getData();const t=s.getSlider();babelHelpers.classPrivateFieldLooseBase(this,xe)[xe](t);requestAnimationFrame((()=>{babelHelpers.classPrivateFieldLooseBase(this,xe)[xe](t)}))}))}function Ue(e){if(!this.canUseBlurry()){return}const s=e.getUrl().startsWith("im:slider");u.Dom.style(e.getOverlay(),"-webkit-backdrop-filter",s?ge:Fe);u.Dom.style(e.getOverlay(),"backdrop-filter",s?ge:Fe);u.Dom.style(e.getOverlay(),"--sidepanel-border-radius",Be)}function ze(e){if(!this.canUseBlurry()){return}u.Dom.style(e.getOverlay(),"-webkit-backdrop-filter",null);u.Dom.style(e.getOverlay(),"backdrop-filter",null);u.Dom.style(e.getOverlay(),"--sidepanel-border-radius",null)}function qe(){const e=window!==window.top;if(e){window.top.location=window.location.href}}function Ge(){if(u.Browser.isMobile()){u.Runtime.loadExtension("intranet.mobile-popup").then((e=>{(new e.MobilePopup).show()})).catch((()=>{}))}else if(document.referrer!==""&&document.referrer.startsWith(location.origin)===false){u.Runtime.loadExtension("intranet.recognize-links")}}function Ye(){const e=u.Reflection.getClass("BX.rest.AppLayout");if(!e){return}const s=e.initializePlacement("DEFAULT");s.prototype.showHelper=async function(e,s){let t="";if(u.Type.isNumber(e)){t=`redirect=detail&code=${e}`}else if(u.Type.isStringFilled(e)){t=e}else if(u.Type.isPlainObject(e)){for(const s of Object.keys(e)){if(t.length>0){t+="&"}t+=`${s}=${e[s]}`}}if(t.length>0){await u.Runtime.loadExtension("helper");const e=u.Reflection.getClass("BX.Helper");e.show(t)}}}var Ve=babelHelpers.classPrivateFieldLooseKey("searchOptions");var Je=babelHelpers.classPrivateFieldLooseKey("extensionLoaded");var Qe=babelHelpers.classPrivateFieldLooseKey("container");var Ze=babelHelpers.classPrivateFieldLooseKey("button");var es=babelHelpers.classPrivateFieldLooseKey("input");var ss=babelHelpers.classPrivateFieldLooseKey("searchTitleInstance");var ts=babelHelpers.classPrivateFieldLooseKey("handleButtonClick");var as=babelHelpers.classPrivateFieldLooseKey("handleInputFocusOut");class is{constructor(e){Object.defineProperty(this,as,{value:rs});Object.defineProperty(this,ts,{value:ls});Object.defineProperty(this,Ve,{writable:true,value:{}});Object.defineProperty(this,Je,{writable:true,value:false});Object.defineProperty(this,Qe,{writable:true,value:null});Object.defineProperty(this,Ze,{writable:true,value:null});Object.defineProperty(this,es,{writable:true,value:null});Object.defineProperty(this,ss,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe]=document.getElementById(e.containerId);babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]=document.getElementById(e.buttonId);babelHelpers.classPrivateFieldLooseBase(this,es)[es]=document.getElementById(e.inputId);babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]=e.searchOptions;u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze],"click",babelHelpers.classPrivateFieldLooseBase(this,ts)[ts].bind(this));u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,es)[es],"focusout",babelHelpers.classPrivateFieldLooseBase(this,as)[as].bind(this))}open(){u.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe],"--active");babelHelpers.classPrivateFieldLooseBase(this,es)[es].disabled=false;setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,es)[es].focus()}),200)}close(){u.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe],"--active");babelHelpers.classPrivateFieldLooseBase(this,es)[es].disabled=true;if(babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]!==null){babelHelpers.classPrivateFieldLooseBase(this,ss)[ss].clearSearch();babelHelpers.classPrivateFieldLooseBase(this,ss)[ss].closeResult()}}}function ls(){if(u.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe],"--active")){this.close()}else{this.open()}if(babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]){return}babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]=true;u.Runtime.loadExtension("intranet.search_title").then((()=>{const e=u.Reflection.getClass("BX.Intranet.SearchTitle");babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]=new e(babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])})).catch((e=>{console.error(e)}))}function rs(e){if(!u.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,es)[es].value)&&e.relatedTarget!==babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]){this.close()}}var os=babelHelpers.classPrivateFieldLooseKey("avatarWrapper");var ns=babelHelpers.classPrivateFieldLooseKey("cache");var ds=babelHelpers.classPrivateFieldLooseKey("options");var cs=babelHelpers.classPrivateFieldLooseKey("setHiddenAvatar");var bs=babelHelpers.classPrivateFieldLooseKey("setVisibleAvatar");var vs=babelHelpers.classPrivateFieldLooseKey("showWidget");var ps=babelHelpers.classPrivateFieldLooseKey("getWidgetLoader");var us=babelHelpers.classPrivateFieldLooseKey("getContent");var hs=babelHelpers.classPrivateFieldLooseKey("showCounter");var _s=babelHelpers.classPrivateFieldLooseKey("showWorkTimeState");var Ps=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper");var ms=babelHelpers.classPrivateFieldLooseKey("getWorkTimeStateWrapper");var fs=babelHelpers.classPrivateFieldLooseKey("getCounter");var Ls=babelHelpers.classPrivateFieldLooseKey("getWorkTimeState");var Fs=babelHelpers.classPrivateFieldLooseKey("setEventHandlerForUpdateCounter");var gs=babelHelpers.classPrivateFieldLooseKey("setEventHandlerForChangeAvatar");class Bs{static init(e){babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]=e;babelHelpers.classPrivateFieldLooseBase(this,os)[os]=document.querySelector('[data-id="bx-avatar-widget"]');babelHelpers.classPrivateFieldLooseBase(this,gs)[gs]();if(babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].signDocumentsCounter>0){babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]();babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs]()}if(babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].workTimeAvailable){babelHelpers.classPrivateFieldLooseBase(this,_s)[_s]()}u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,os)[os],"click",(()=>{u.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,os)[os]);babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]().getPopup().setFixed(true);babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]().createSkeletonFromConfig(e.skeleton).show();babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]();babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]().getPopup().subscribe("onClose",(()=>{babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]()}));babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]().getPopup().subscribe("onShow",(()=>{babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]()}));u.Runtime.loadExtension(["intranet.avatar-widget"]).then((()=>{babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]()})).catch((()=>{}))}))}}function ys(){u.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,os)[os],"opacity","0")}function Hs(){u.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,os)[os],"opacity","1")}function ks(){babelHelpers.classPrivateFieldLooseBase(this,us)[us]().then((e=>{babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]().clearBeforeInsertContent();a.AvatarWidget.getInstance().setOptions({buttonWrapper:babelHelpers.classPrivateFieldLooseBase(this,os)[os],loader:babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]().getPopup(),data:e.data}).show();u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,os)[os],"click",(()=>{a.AvatarWidget.getInstance().show()}))})).catch((()=>{}))}function ws(){return babelHelpers.classPrivateFieldLooseBase(this,ns)[ns].remember("widgetLoader",(()=>new b.WidgetLoader({id:"bx-avatar-header-popup",bindElement:babelHelpers.classPrivateFieldLooseBase(this,os)[os],className:"intranet-avatar-widget-base-popup",width:450,useAngle:false,fixed:true,offsetTop:-50,offsetLeft:-392})))}function Cs(){return babelHelpers.classPrivateFieldLooseBase(this,ns)[ns].remember("content",(()=>new Promise(((e,s)=>{u.ajax.runAction("intranet.user.widget.getContent").then((s=>e(s))).catch((e=>s(e)))}))))}function Es(){babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]())}function Os(){babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,ms)[ms]())}function js(){return babelHelpers.classPrivateFieldLooseBase(this,ns)[ns].remember("counterWrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,os)[os].querySelector(".air-user-profile-avatar__counter")))}function Is(){return babelHelpers.classPrivateFieldLooseBase(this,ns)[ns].remember("workTimeStateWrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,os)[os].querySelector(".air-user-profile-avatar__work-time-state")))}function xs(){return babelHelpers.classPrivateFieldLooseBase(this,ns)[ns].remember("counter",(()=>new p.Counter({color:p.Counter.Color.DANGER,size:p.Counter.Size.MEDIUM,value:babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].signDocumentsCounter,useAirDesign:true,style:p.CounterStyle.FILLED_ALERT})))}function Ss(){return babelHelpers.classPrivateFieldLooseBase(this,ns)[ns].remember("workTimeState",(()=>new i.WorkTimeStateIcon({state:babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].workTimeState,action:babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].workTimeAction})))}function Ks(){n.PULL.subscribe({moduleId:"sign",command:babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].signDocumentsPullEventName,callback:e=>{if(!u.Type.isNumber(e==null?void 0:e.needActionCount)){return}if((e==null?void 0:e.needActionCount)>0){babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]().update(e.needActionCount)}else{babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]().destroy()}}})}function Ts(){const e=babelHelpers.classPrivateFieldLooseBase(this,os)[os].querySelector("i");c.EventEmitter.subscribe("BX.Intranet.UserProfile:Avatar:changed",(s=>{const t=s.getData()[0];const a=t&&t.url?t.url:"";const i=t&&t.userId?t.userId:0;if(babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].userId===i&&e){e.style=u.Type.isStringFilled(a)?`background-size: cover; background-image: url('${encodeURI(a)}')`:""}}))}Object.defineProperty(Bs,gs,{value:Ts});Object.defineProperty(Bs,Fs,{value:Ks});Object.defineProperty(Bs,Ls,{value:Ss});Object.defineProperty(Bs,fs,{value:xs});Object.defineProperty(Bs,ms,{value:Is});Object.defineProperty(Bs,Ps,{value:js});Object.defineProperty(Bs,_s,{value:Os});Object.defineProperty(Bs,hs,{value:Es});Object.defineProperty(Bs,us,{value:Cs});Object.defineProperty(Bs,ps,{value:ws});Object.defineProperty(Bs,vs,{value:ks});Object.defineProperty(Bs,bs,{value:Hs});Object.defineProperty(Bs,cs,{value:ys});Object.defineProperty(Bs,os,{writable:true,value:void 0});Object.defineProperty(Bs,ns,{writable:true,value:new d.MemoryCache});Object.defineProperty(Bs,ds,{writable:true,value:void 0});var Ds=babelHelpers.classPrivateFieldLooseKey("options");var Rs=babelHelpers.classPrivateFieldLooseKey("buttonWrapper");var As=babelHelpers.classPrivateFieldLooseKey("cache");var Ms=babelHelpers.classPrivateFieldLooseKey("getExtensionWidgetName");var Ws=babelHelpers.classPrivateFieldLooseKey("showWidget");var Ns=babelHelpers.classPrivateFieldLooseKey("getWidget");var Xs=babelHelpers.classPrivateFieldLooseKey("getWidgetLoader");var $s=babelHelpers.classPrivateFieldLooseKey("getContent");var Us=babelHelpers.classPrivateFieldLooseKey("getCounter");var zs=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper");var qs=babelHelpers.classPrivateFieldLooseKey("setCounterValue");var Gs=babelHelpers.classPrivateFieldLooseKey("setEventHandlers");var Ys=babelHelpers.classPrivateFieldLooseKey("showInfrastructureSlider");class Vs{static init(e){babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds]=e;babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]=document.querySelector('[data-id="licenseWidgetWrapper"]');babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs]();if(babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].isCloud&&babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].ordersAwaitingPayment>0){babelHelpers.classPrivateFieldLooseBase(this,qs)[qs](babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].ordersAwaitingPayment)}u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs],"click",(()=>{u.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]);babelHelpers.classPrivateFieldLooseBase(this,Xs)[Xs]().createSkeletonFromConfig(e.skeleton).show();u.Runtime.loadExtension([babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]()]).then((()=>{babelHelpers.classPrivateFieldLooseBase(this,Ws)[Ws]()})).catch((()=>{}))}))}}function Js(){if(babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].isCloud){return"bitrix24.license-widget"}return"intranet.license-widget"}function Qs(){babelHelpers.classPrivateFieldLooseBase(this,$s)[$s]().then((e=>{babelHelpers.classPrivateFieldLooseBase(this,Xs)[Xs]().clearBeforeInsertContent();let s=null;if(babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].isCloud){s=e.data;s.loader=babelHelpers.classPrivateFieldLooseBase(this,Xs)[Xs]().getPopup();s.wrapper=babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]}else{s={loader:babelHelpers.classPrivateFieldLooseBase(this,Xs)[Xs]().getPopup(),buttonWrapper:babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs],data:e.data}}babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns]().setOptions(s).show();u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs],"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns]().show()}))})).catch((()=>{}))}function Zs(){return babelHelpers.classPrivateFieldLooseBase(this,As)[As].remember("widget",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].isCloud){return l.LicenseWidget.getInstance()}return r.LicenseWidget.getInstance()}))}function et(){return babelHelpers.classPrivateFieldLooseBase(this,As)[As].remember("widgetLoader",(()=>new b.WidgetLoader({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs],width:374,id:"bx-license-header-popup"})))}function st(){return babelHelpers.classPrivateFieldLooseBase(this,As)[As].remember("content",(()=>new Promise(((e,s)=>{if(babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].isCloud){u.ajax.runComponentAction("bitrix:bitrix24.license.widget","getData",{mode:"class"}).then((s=>e(s))).catch((e=>s(e)))}else{u.ajax.runAction("intranet.license.widget.getContent").then((s=>e(s))).catch((e=>s(e)))}}))))}function tt(){return babelHelpers.classPrivateFieldLooseBase(this,As)[As].remember("counter",(()=>new p.Counter({color:p.CounterColor.DANGER,useAirDesign:true,style:p.CounterStyle.FILLED_ALERT})))}function at(){return babelHelpers.classPrivateFieldLooseBase(this,As)[As].remember("counter-wrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs].querySelector(".air-header-button__counter")))}function it(e){if(e<1){babelHelpers.classPrivateFieldLooseBase(this,Us)[Us]().destroy();babelHelpers.classPrivateFieldLooseBase(this,As)[As].delete("counter")}if(e>0&&babelHelpers.classPrivateFieldLooseBase(this,zs)[zs]()){babelHelpers.classPrivateFieldLooseBase(this,Us)[Us]().update(e);babelHelpers.classPrivateFieldLooseBase(this,Us)[Us]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,zs)[zs]())}}function lt(){if(babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].isCloud&&babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].isSidePanelDemoLicense){BX.SidePanel.Instance.bindAnchors({rules:[{condition:[/\/settings\/license_demo.php/],handler(e){o.FeaturePromotersRegistry.getPromoter({code:"limit_demo"}).show();e.stopPropagation();e.preventDefault()}}]})}if(babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].isCloud&&babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].isAdmin){n.PULL.subscribe({moduleId:"bitrix24",command:"updateCountOrdersAwaitingPayment",callback:e=>{c.EventEmitter.emit("BX.Bitrix24.Orders:updateOrdersAwaitingPayment",new c.BaseEvent({data:{counter:Number(e.count)}}));if(e.count>0){babelHelpers.classPrivateFieldLooseBase(this,qs)[qs](Number(e.count))}}});c.EventEmitter.subscribe(c.EventEmitter.GLOBAL_TARGET,"Bitrix24InfrastructureSlider:show",babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys].bind(this))}}function rt(){const e=babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds].infrastructureForm;BX.SidePanel.Instance.open("bx-infrastructure-slider",{contentCallback:()=>`<script data-b24-form="inline/${e.id}/${e.secCode}" data-skip-moving="true"><\/script>`,width:664,loader:"default-loader",cacheable:false,closeByEsc:false,data:{rightBoundary:0},events:{onOpen:()=>{(function(e,s,t){const a=s.createElement("script");a.async=true;a.src=`${t}?${Date.now()/18e4|0}`;const i=s.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i)})(window,document,`https://bitrix24.team/upload/crm/form/loader_${e.id}_${e.secCode}.js`)},onOpenComplete:()=>{top.addEventListener("b24:form:send:success",(s=>{if(s.detail.object.identification.id===e.id){u.ajax.runComponentAction("bitrix:bitrix24.license.widget","setOptionWaitingInfrastructure",{mode:"class",data:{}})}}))}}})}Object.defineProperty(Vs,Ys,{value:rt});Object.defineProperty(Vs,Gs,{value:lt});Object.defineProperty(Vs,qs,{value:it});Object.defineProperty(Vs,zs,{value:at});Object.defineProperty(Vs,Us,{value:tt});Object.defineProperty(Vs,$s,{value:st});Object.defineProperty(Vs,Xs,{value:et});Object.defineProperty(Vs,Ns,{value:Zs});Object.defineProperty(Vs,Ws,{value:Qs});Object.defineProperty(Vs,Ms,{value:Js});Object.defineProperty(Vs,Ds,{writable:true,value:void 0});Object.defineProperty(Vs,Rs,{writable:true,value:void 0});Object.defineProperty(Vs,As,{writable:true,value:new d.MemoryCache});var ot=babelHelpers.classPrivateFieldLooseKey("buttonWrapper");var nt=babelHelpers.classPrivateFieldLooseKey("cache");var dt=babelHelpers.classPrivateFieldLooseKey("options");var ct=babelHelpers.classPrivateFieldLooseKey("showWidget");var bt=babelHelpers.classPrivateFieldLooseKey("getWidgetLoader");var vt=babelHelpers.classPrivateFieldLooseKey("getContent");var pt=babelHelpers.classPrivateFieldLooseKey("setEventHandlers");var ut=babelHelpers.classPrivateFieldLooseKey("onReceiveCounterValue");var ht=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper");var _t=babelHelpers.classPrivateFieldLooseKey("getCounter");var Pt=babelHelpers.classPrivateFieldLooseKey("getCounterValue");var mt=babelHelpers.classPrivateFieldLooseKey("onFirstWatchNewStructure");class ft{static init(e){babelHelpers.classPrivateFieldLooseBase(this,dt)[dt]=e;babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]=document.querySelector('[data-id="invitationButton"]');u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ot)[ot],"click",(()=>{u.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]);babelHelpers.classPrivateFieldLooseBase(this,bt)[bt]().createSkeletonFromConfig(e.skeleton).show();u.Runtime.loadExtension(["intranet.invitation-widget"]).then((()=>{babelHelpers.classPrivateFieldLooseBase(this,ct)[ct]()})).catch((()=>{}))}));if(babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].invitationCounter>0){babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,ht)[ht]())}babelHelpers.classPrivateFieldLooseBase(this,pt)[pt]()}}function Lt(){babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]().then((e=>{babelHelpers.classPrivateFieldLooseBase(this,bt)[bt]().clearBeforeInsertContent();v.InvitationWidget.getInstance().setOptions({buttonWrapper:babelHelpers.classPrivateFieldLooseBase(this,ot)[ot],loader:babelHelpers.classPrivateFieldLooseBase(this,bt)[bt]().getPopup(),...e.data}).show();u.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ot)[ot],"click",(()=>{v.InvitationWidget.getInstance().show()}))})).catch((()=>{}))}function Ft(){return babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].remember("widgetLoader",(()=>new b.WidgetLoader({bindElement:babelHelpers.classPrivateFieldLooseBase(this,ot)[ot],width:350,id:"bx-invitation-header-popup"})))}function gt(){return babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].remember("content",(()=>new Promise(((e,s)=>{u.ajax.runAction("intranet.invitationwidget.getData",{data:{},analyticsLabel:{headerPopup:"Y"}}).then((s=>e(s))).catch((e=>s(e)))}))))}function Bt(){c.EventEmitter.subscribeOnce("HR.company-structure:first-popup-showed",babelHelpers.classPrivateFieldLooseBase(this,mt)[mt].bind(this));c.EventEmitter.subscribe("onPullEvent-main",(e=>{const[s,t]=e.getCompatData();if(s==="user_counter"&&t[u.Loc.getMessage("SITE_ID")]){const e=t[u.Loc.getMessage("SITE_ID")][babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].counterId];if(e>0){babelHelpers.classPrivateFieldLooseBase(this,ut)[ut](e)}}}))}function yt(e){if(babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].shouldShowStructureCounter){e++}babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]().update(e);babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].invitationCounter=e;if(e>0){babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,ht)[ht]())}else{babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]().destroy();babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].delete("counter")}}function Ht(){return babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].remember("counter-wrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,ot)[ot].querySelector(".invitation-widget-counter")))}function kt(){return babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].remember("counter",(()=>new p.Counter({value:babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt](),color:p.Counter.Color.DANGER,useAirDesign:true,style:p.CounterStyle.FILLED_ALERT})))}function wt(){var e;let s=Number(babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].invitationCounter);if((e=babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].shouldShowStructureCounter)!=null?e:false){s++}return s}function Ct(){let e=babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]().value;if(!u.Type.isNumber(e)){return}if(!babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].shouldShowStructureCounter){return}e--;babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].shouldShowStructureCounter=false;babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]().update(e);babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].invitationCounter=e;if(e>0){babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,ht)[ht]())}else{babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]().destroy();babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].delete("counter")}}Object.defineProperty(ft,mt,{value:Ct});Object.defineProperty(ft,Pt,{value:wt});Object.defineProperty(ft,_t,{value:kt});Object.defineProperty(ft,ht,{value:Ht});Object.defineProperty(ft,ut,{value:yt});Object.defineProperty(ft,pt,{value:Bt});Object.defineProperty(ft,vt,{value:gt});Object.defineProperty(ft,bt,{value:Ft});Object.defineProperty(ft,ct,{value:Lt});Object.defineProperty(ft,ot,{writable:true,value:void 0});Object.defineProperty(ft,nt,{writable:true,value:new d.MemoryCache});Object.defineProperty(ft,dt,{writable:true,value:void 0});let Et=e=>e,Ot,jt;var It=babelHelpers.classPrivateFieldLooseKey("popup");var xt=babelHelpers.classPrivateFieldLooseKey("initPopup");var St=babelHelpers.classPrivateFieldLooseKey("renderPopupContent");class Kt{constructor(){Object.defineProperty(this,St,{value:Dt});Object.defineProperty(this,xt,{value:Tt});Object.defineProperty(this,It,{writable:true,value:void 0})}async showLanguageListPopup(e,s){if(!babelHelpers.classPrivateFieldLooseBase(this,It)[It]){await babelHelpers.classPrivateFieldLooseBase(this,xt)[xt](e,s)}if(babelHelpers.classPrivateFieldLooseBase(this,It)[It].isShown()){return}babelHelpers.classPrivateFieldLooseBase(this,It)[It].show()}hideLanguageListPopup(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,It)[It])==null?void 0:e.close()}switchPortalLanguage(e){window.location.href=`/auth/?user_lang=${e}&backurl=${C()}`}}async function Tt(e,s){const t=()=>{this.hideLanguageListPopup()};const{Popup:a}=await u.Runtime.loadExtension("main.popup");const i={bindElement:e,autoHide:true,closeByEcs:true,cachable:false,content:babelHelpers.classPrivateFieldLooseBase(this,St)[St](s),events:{onPopupClose:()=>{u.Event.unbind(window,"scroll",t);babelHelpers.classPrivateFieldLooseBase(this,It)[It].destroy();babelHelpers.classPrivateFieldLooseBase(this,It)[It]=null}}};babelHelpers.classPrivateFieldLooseBase(this,It)[It]=new a(i);u.Event.bind(window,"scroll",t)}function Dt(e){const s=u.Tag.render(Ot||(Ot=Et`<div class="intranet__language-popup_list"></div>`));Object.entries(e).forEach((([e,t])=>{const a=u.Tag.render(jt||(jt=Et`
				<div class="intranet__language-popup_language-item">
					<span class="intranet__language-popup_language-item-name">${0}</span>
					<span class="intranet__language-popup_language-beta">${0}</span>
				</div>
			`),t.NAME,t.IS_BETA?", beta":"");u.Event.bind(a,"click",(()=>{this.switchPortalLanguage(e)}));u.Dom.append(a,s)}));return s}const Rt=new Kt;const At=new Me;window.showPartnerForm=h;window.B24={licenseInfoPopup:{show(e,s,t,a){const i=u.Reflection.getClass("BX.Bitrix24.LicenseInfoPopup");if(i){i.show(e,s,t,a)}}},updateCounters(e,s){const t=u.Reflection.getClass("BX.Intranet.LeftMenu");if(t){t.updateCounters(e,s)}}};e.languageSwitcher=Rt;e.PartnerForm=L;e.Template=At;e.SearchTitle=is;e.InvitationButton=ft;e.LicenseButton=Vs;e.AvatarButton=Bs})(this.BX.Intranet.Bitrix24=this.BX.Intranet.Bitrix24||{},BX.SidePanel,BX.UI,BX.Intranet,BX.Timeman,BX.Bitrix24,BX.Intranet,BX.UI,BX,BX.Cache,BX.Event,BX.Intranet,BX.Intranet,BX.UI,BX);
//# sourceMappingURL=bitrix24.bundle.map.js